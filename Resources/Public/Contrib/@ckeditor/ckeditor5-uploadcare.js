import{Plugin as He,Command as ri}from"@ckeditor/ckeditor5-core";import{IconOneDrive as Fn,IconGooglePhotos as Vn,IconGoogleDrive as Nn,IconFacebook as Bn,IconDropbox as jn,IconUploadcareLink as Hn,IconUploadcareImageUpload as io,IconError as Gn,IconUploadcareImageEdit as oo}from"@ckeditor/ckeditor5-icons";import{ButtonView as Mt,MenuBarMenuListItemButtonView as Wn,View as pt,FocusCycler as qn,Dialog as ft,DialogViewPosition as ao,SpinnerView as Xn,IconView as Zn,Notification as Yn}from"@ckeditor/ckeditor5-ui";import{FocusTracker as Kn,DomEmitterMixin as Jn,global as ke,getAncestors as Qn,ObservableMixin as no,uid as so,createElement as ii}from"@ckeditor/ckeditor5-utils";import{FileRepository as co}from"@ckeditor/ckeditor5-upload";(function(i,e){for(var t=Rt,r=i();;)try{var o=-parseInt(t(464))/1*(-parseInt(t(467))/2)+parseInt(t(453))/3+parseInt(t(456))/4+-parseInt(t(474))/5+-parseInt(t(465))/6+-parseInt(t(455))/7+-parseInt(t(469))/8*(-parseInt(t(457))/9);if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Pt,321221);function Pt(){var i=["GPhotos","GDrive","Dropbox","1622105LyZpLP","url","366408wCeZjo","facebook","2476936FksrKI","1083664HiJKIh","24345jugqHY","URL","OneDrive","gphotos","Facebook","gdrive","local","16781pesOhu","3668178vQNhnL","dropbox","2cJpeZZ","onedrive","3552lVpMDj","Local"];return Pt=function(){return i},Pt()}var O;function Rt(i,e){var t=Pt();return Rt=function(r,o){r=r-453;var a=t[r];return a},Rt(i,e)}(function(i){var e=Rt;i[e(470)]=e(463),i[e(458)]=e(475),i[e(473)]=e(466),i[e(472)]=e(462),i[e(461)]=e(454),i[e(471)]=e(460),i[e(459)]=e(468)})(O||(O={}));function Dt(i,e,t){const r=i.t,o=i.t;switch(e){case O.Local:return{text:o(t==="Insert"?"Upload from computer":"Replace from computer"),shortText:o("From computer")};case O.URL:return{text:t==="Insert"?o("Insert via URL"):r("Replace via URL"),shortText:o("Via URL")};case O.Dropbox:return{text:r(t==="Insert"?"Insert with Dropbox":"Replace with Dropbox"),shortText:r("With Dropbox")};case O.Facebook:return{text:r(t==="Insert"?"Insert with Facebook":"Replace with Facebook"),shortText:r("With Facebook")};case O.GDrive:return{text:r(t==="Insert"?"Insert with Google Drive":"Replace with Google Drive"),shortText:r("With Google Drive")};case O.GPhotos:return{text:r(t==="Insert"?"Insert with Google Photos":"Replace with Google Photos"),shortText:r("With Google Photos")};case O.OneDrive:return{text:r(t==="Insert"?"Insert with OneDrive":"Replace with OneDrive"),shortText:r("With OneDrive")};default:return e}}function gt(i,{insertAt:e}={}){if(!i||typeof document>"u")return;const t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",window.litNonce&&r.setAttribute("nonce",window.litNonce),e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}gt(':where([uc-wgt-common]){--cfg-init-activity:"start-from";--cfg-done-activity:""}:where([uc-wgt-common]){--uc-font-family:system-ui;--uc-font-size:14px;--uc-line-height:normal;--uc-simple-btn-font-family:system-ui;--uc-simple-btn-font-size:14px;--uc-button-size:32px;--uc-preview-size:32px;--uc-padding:10px;--uc-radius:8px;--uc-transition:.2s ease;--uc-dialog-width:430px;--uc-dialog-max-width:920px;--uc-dialog-max-height:675px;--uc-simple-btn-padding:7px 14px;--uc-grid-col:3;--uc-grid-preview-image-height:auto;--uc-grid-gap:calc(var(--uc-padding)/2);--uc-grid-aspect-ratio:1/1;--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}@supports not (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-rgb-light:23 75 215;--uc-primary-light:rgb(var(--uc-primary-rgb-light));--uc-primary-hover-light:rgb(var(--uc-primary-rgb-light)/90%);--uc-primary-transparent-light:rgb(var(--uc-primary-rgb-light)/10%);--uc-background-light:#fff;--uc-foreground-light:#181818;--uc-primary-foreground-light:#fff;--uc-secondary-light:hsla(0,0%,9%,.05);--uc-secondary-hover-light:hsla(0,0%,9%,.08);--uc-secondary-foreground-light:#181818;--uc-muted-light:#f5f5f5;--uc-muted-foreground-light:#717171;--uc-destructive-light:rgb(232 19 20/5%);--uc-destructive-foreground-light:#e81314;--uc-border-light:#e4e4e8;--uc-dialog-shadow-light:0px 6px 20px rgba(0,0,0,.1);--uc-simple-btn-light:#ebebeb;--uc-simple-btn-hover-light:#e4e4e4;--uc-simple-btn-foreground-light:#181818;--uc-primary-rgb-dark:87 154 255;--uc-primary-dark:rgb(var(--uc-primary-rgb-dark));--uc-primary-hover-dark:rgb(var(--uc-primary-rgb-dark)/90%);--uc-primary-transparent-dark:rgb(var(--uc-primary-rgb-dark)/7%);--uc-background-dark:#1b1b1b;--uc-foreground-dark:#e1e1e1;--uc-primary-foreground-dark:#000;--uc-secondary-dark:hsla(0,0%,88%,.07);--uc-secondary-hover-dark:hsla(0,0%,88%,.1);--uc-secondary-foreground-dark:#e1e1e1;--uc-muted-dark:#242424;--uc-muted-foreground-dark:#989898;--uc-destructive-dark:rgba(244,90,79,.1);--uc-destructive-foreground-dark:#f45a4f;--uc-border-dark:#3d3d3d;--uc-dialog-shadow-dark:0px 6px 20px rgba(0,0,0,.25);--uc-simple-btn-dark:#242424;--uc-simple-btn-hover-dark:#2b2b2b;--uc-simple-btn-foreground-dark:#fff}}@supports (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-oklch-light:47% .22 264;--uc-primary-light:oklch(var(--uc-primary-oklch-light));--uc-primary-hover-light:oklch(var(--uc-primary-oklch-light)/90%);--uc-primary-transparent-light:oklch(var(--uc-primary-oklch-light)/7%);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(21% 0 0);--uc-primary-foreground-light:oklch(100% 0 0);--uc-secondary-light:oklch(21% 0 0/.05);--uc-secondary-hover-light:oklch(21% 0 0/.08);--uc-secondary-foreground-light:oklch(21% 0 0);--uc-muted-light:oklch(97% 0 0);--uc-muted-foreground-light:oklch(40% 0 0);--uc-destructive-light:oklch(59% .235 28.5/.05);--uc-destructive-foreground-light:oklch(59% .235 28.5);--uc-border-light:oklch(92% 0 0);--uc-dialog-shadow-light:0px 6px 20px oklch(0% 0 0/.1);--uc-simple-btn-light:oklch(94% 0 0);--uc-simple-btn-hover-light:oklch(92% 0 0);--uc-simple-btn-foreground-light:oklch(20% 0 0);--uc-primary-oklch-dark:69% .1768 258.4;--uc-primary-dark:oklch(var(--uc-primary-oklch-dark));--uc-primary-hover-dark:oklch(var(--uc-primary-oklch-dark)/90%);--uc-primary-transparent-dark:oklch(var(--uc-primary-oklch-dark)/7%);--uc-background-dark:oklch(22% 0 0);--uc-foreground-dark:oklch(91% 0 0);--uc-primary-foreground-dark:oklch(0% 0 0);--uc-secondary-dark:oklch(91% 0 0/.07);--uc-secondary-hover-dark:oklch(91% 0 0/.1);--uc-secondary-foreground-dark:oklch(91% 0 0);--uc-muted-dark:oklch(26% 0 0);--uc-muted-foreground-dark:oklch(68% 0 0);--uc-destructive-dark:oklch(67% .191 27.5/.1);--uc-destructive-foreground-dark:oklch(67% .191 27.5);--uc-border-dark:oklch(36% 0 0);--uc-dialog-shadow-dark:0px 6px 20px oklch(0% 0 0/.25);--uc-simple-btn-dark:oklch(26% 0 0);--uc-simple-btn-hover-dark:oklch(29% 0 0);--uc-simple-btn-foreground-dark:oklch(100% 0 0)}}@media only screen and (max-height:600px){:where([uc-wgt-common]){--uc-dialog-max-height:100%}}@media only screen and (max-width:680px){:where([uc-wgt-common]){--uc-grid-col:2}}@media only screen and (max-width:430px){:where([uc-wgt-common]){--uc-dialog-max-width:100vw;--uc-dialog-max-height:var(--uploadcare-blocks-window-height);--uc-grid-col:1}}@media (prefers-color-scheme:light){:where([uc-wgt-common]){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}}@media (prefers-color-scheme:dark){:where([uc-wgt-common]){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}}:where(.uc-light){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}:where(.uc-dark){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}:where(.uc-purple){--uc-primary-oklch-light:47% .22 300;--uc-primary-oklch-dark:69% .1768 300}:where(.uc-red){--uc-primary-oklch-light:47% .21 21;--uc-primary-oklch-dark:71% .1768 21}:where(.uc-orange){--uc-primary-oklch-light:47% .1376 51.88;--uc-primary-oklch-dark:69% .1768 51.88}:where(.uc-green){--uc-primary-oklch-light:45% .14 130;--uc-primary-oklch-dark:69% .1768 130}:where(.uc-turquoise){--uc-primary-oklch-light:45% .0854 174;--uc-primary-oklch-dark:69% .1768 174}:where(.uc-gray){--uc-primary-oklch-light:10% 0 0;--uc-primary-oklch-dark:97% 0 0}:where(.uc-contrast){--uc-border-light:oklch(50% 0 0);--uc-border-dark:oklch(50% 0 0);--uc-muted-light:oklch(98% 0 0);--uc-muted-dark:oklch(16% 0 0);--uc-muted-foreground-light:oklch(20% 0 0);--uc-muted-foreground-dark:oklch(80% 0 0);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(0% 0 0);--uc-background-dark:oklch(10% 0 0);--uc-foreground-dark:oklch(100% 0 0)}:where([uc-wgt-common]){color:var(--uc-foreground);font-family:var(--uc-font-family);font-size:var(--uc-font-size);line-height:var(--uc-line-height)}:where([uc-wgt-common]) *{box-sizing:border-box}:where([uc-wgt-common]) [hidden]{display:none!important}:where([uc-wgt-common]) [activity]:not([active],.active){display:none}:where([uc-wgt-common]) dialog:not([open]) [activity]{display:none}:where([uc-wgt-common]) button{align-items:center;border:none;border-radius:var(--uc-radius);cursor:pointer;display:flex;font-family:inherit;font-size:1em;height:var(--uc-button-size);justify-content:center;padding-left:14px;padding-right:14px;transition:background-color var(--uc-transition);user-select:none;white-space:nowrap}:where([uc-wgt-common]) button:focus-visible{outline-offset:2px}:where([uc-wgt-common]) button.uc-primary-btn{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}:where([uc-wgt-common]) button.uc-primary-btn:hover{background-color:var(--uc-primary-hover)}:where([uc-wgt-common]) button.uc-secondary-btn{background-color:var(--uc-secondary);color:var(--uc-secondary-foreground)}:where([uc-wgt-common]) button.uc-secondary-btn:hover{background-color:var(--uc-secondary-hover)}:where([uc-wgt-common].uc-contrast) button.uc-secondary-btn{border:1px solid var(--uc-border)}:where([uc-wgt-common]) button.uc-mini-btn{background-color:transparent;color:var(--uc-secondary-foreground);height:var(--uc-button-size);padding:0}:where([uc-wgt-common]) button.uc-mini-btn:hover{background-color:var(--uc-secondary)}:where([uc-wgt-common]) :is(button[disabled],button.uc-primary-btn[disabled],button.uc-secondary-btn[disabled]){opacity:.5;pointer-events:none}:where([uc-wgt-common]) a{color:var(--uc-primary);text-decoration:none}:where([uc-wgt-common]) a[disabled]{pointer-events:none}:where([uc-wgt-common]) input[type=text]{background-color:var(--uc-background);border:1px solid var(--uc-border);border-radius:var(--uc-radius);color:var(--uc-foreground);display:flex;font-family:inherit;font-size:1em;height:var(--uc-button-size);outline:1px solid transparent;padding-left:10px;padding-right:10px;transition:border-color var(--uc-transition),outline-color var(--uc-transition);width:100%}:where([uc-wgt-common]) input[type=text]::placeholder{color:var(--uc-muted-foreground)}:where([uc-wgt-common]) input[type=text]:focus{border-color:var(--uc-primary-hover);outline-color:var(--uc-primary-hover)}:where([uc-wgt-common]) input[disabled]{opacity:.6;pointer-events:none}:where([uc-wgt-common]) select[disabled],:where([uc-wgt-common]) uc-select[disabled]{opacity:.6;pointer-events:none}uc-icon{align-items:center;display:inline-flex;height:var(--uc-button-size);justify-content:center;width:var(--uc-button-size)}uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}uc-range{align-items:center;display:inline-flex;height:var(--uc-button-size);justify-content:center;position:relative}uc-range datalist{display:none}uc-range input{height:100%;opacity:0;width:100%}uc-range .uc-track-wrapper{left:10px;pointer-events:none;right:10px;user-select:none}uc-range .uc-track,uc-range .uc-track-wrapper{align-items:center;display:flex;height:2px;justify-content:center;position:absolute}uc-range .uc-track{background-color:currentColor;border-radius:2px;left:0;opacity:.5;right:0}uc-range .uc-slider{border-radius:100%;height:16px;transform:translate(-50%);width:16px}uc-range .uc-bar,uc-range .uc-slider{background-color:currentColor;position:absolute}uc-range .uc-bar{border-radius:2px;height:100%;left:0}uc-range .uc-caption{display:inline-flex;justify-content:center;position:absolute}uc-config{display:none}:where([uc-simple-btn]){display:inline-flex;position:relative}:where([uc-simple-btn]) button{background-color:var(--uc-simple-btn);color:var(--uc-simple-btn-foreground);font-family:var(--uc-simple-btn-font-family);font-size:var(--uc-simple-btn-font-size);gap:.5em;height:auto;padding:var(--uc-simple-btn-padding)}:where([uc-simple-btn]) button uc-icon{height:auto;width:auto}:where([uc-simple-btn]) button uc-icon svg{height:.9em;width:.9em}:where([uc-simple-btn]) button:hover{background-color:var(--uc-simple-btn-hover)}:where([uc-simple-btn])>uc-drop-area{display:contents}:where([uc-simple-btn]) .uc-visual-drop-area{align-items:center;background-color:transparent;border:1px dashed var(--uc-simple-btn-foreground);border-radius:inherit;color:transparent;display:flex;font-size:var(--uc-simple-btn-font-size);height:100%;justify-content:center;left:0;opacity:0;padding:var(--uc-simple-btn-padding);position:absolute;top:0;transition:opacity var(--uc-transition);width:100%}:where([uc-simple-btn])>uc-drop-area[drag-state=active] .uc-visual-drop-area{opacity:1}:where([uc-simple-btn])>uc-drop-area[drag-state=inactive] .uc-visual-drop-area{opacity:0}:where([uc-simple-btn])>uc-drop-area[drag-state=near] .uc-visual-drop-area{opacity:1}:where([uc-simple-btn])>uc-drop-area[drag-state=over] .uc-visual-drop-area{opacity:1}uc-source-btn>button{align-items:center;background-color:unset;border-radius:var(--uc-radius);color:var(--uc-foreground);cursor:pointer;display:flex;height:unset;margin-bottom:2px;padding:2px var(--uc-padding);transition:background-color var(--uc-transition),color var(--uc-transition);user-select:none;width:100%}uc-source-btn:last-child>button{margin-bottom:0}uc-source-btn>button:hover{background-color:var(--uc-primary-transparent)}:where(.uc-contrast) uc-source-btn>button:hover{background-color:var(--uc-secondary);color:var(--uc-foreground)}uc-source-btn uc-icon{display:inline-flex;flex-grow:1;justify-content:center;margin-right:var(--uc-padding);min-width:var(--uc-button-size);opacity:.8}:where(.uc-contrast) uc-source-btn uc-icon{opacity:1}uc-source-btn .uc-txt{align-items:center;border:none;box-sizing:border-box;display:flex;height:var(--uc-button-size);padding:0;white-space:nowrap;width:100%}:where([uc-drop-area]){border:1px dashed var(--uc-border);border-radius:calc(var(--uc-radius)*1.75);overflow:hidden;padding:2px;transition:border var(--uc-transition),border-radius var(--uc-transition)}:where([uc-drop-area]),:where([uc-drop-area]) .uc-content-wrapper{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-drop-area]) .uc-text{color:var(--uc-muted-foreground);margin:var(--uc-padding);position:relative;transition:color var(--uc-transition)}:where([uc-drop-area])[ghost][drag-state=inactive]{display:none}:where([uc-drop-area])[ghost]:not([fullscreen]):is([drag-state=active],[drag-state=near],[drag-state=over]){background:var(--uc-background)}:where([uc-drop-area]):is([drag-state=active],[drag-state=near],[drag-state=over],:hover){background:var(--uc-primary-transparent);border-color:var(--uc-primary-transparent)}:where(.uc-contrast) :where([uc-drop-area]):is([drag-state=active],[drag-state=near],[drag-state=over],:hover){background:transparent;border-color:var(--uc-foreground);border-style:solid;border-width:2px;color:var(--uc-foreground)}:where([uc-drop-area]):is([drag-state=active],[drag-state=near]){opacity:1}:where([uc-drop-area])[drag-state=over]{border-color:var(--uc-primary);opacity:1}:where([uc-drop-area])[with-icon]{min-height:180px}:where([uc-drop-area])[with-icon] .uc-content-wrapper{display:flex;flex-direction:column}:where([uc-drop-area])[with-icon] .uc-text{color:var(--uc-foreground);font-size:1.1em;font-weight:500}:where([uc-drop-area])[with-icon] .uc-icon-container{background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);height:64px;margin:var(--uc-padding);overflow:hidden;position:relative;transition:color var(--uc-transition),background-color var(--uc-transition);width:64px}:where([uc-drop-area])[with-icon] uc-icon{height:32px;left:calc(50% - 16px);position:absolute;top:calc(50% - 16px);transition:transform var(--uc-transition);width:32px}:where([uc-drop-area])[with-icon] uc-icon:last-child{transform:translateY(48px)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-icon-container,:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-text{color:var(--uc-foreground)}:where([uc-drop-area])[with-icon]:hover .uc-icon-container{background-color:var(--uc-primary-transparent)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-icon-container{background-color:var(--uc-muted)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-icon-container{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-text{color:var(--uc-foreground)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-text{color:var(--uc-foreground)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) uc-icon:first-child{transform:translateY(-48px)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) uc-icon:last-child{transform:translateY(0)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper[drag-state=near] uc-icon:last-child{transform:scale(1.3)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper[drag-state=over] uc-icon:last-child{transform:scale(1.5)}:where([uc-drop-area])[fullscreen]{align-items:center;display:flex;height:calc(100vh - var(--uc-padding)*2);inset:0;justify-content:center;margin:var(--uc-padding);position:fixed;width:calc(100vw - var(--uc-padding)*2);z-index:2147483647}:where([uc-drop-area])[fullscreen] .uc-content-wrapper{background-color:var(--uc-background);border-radius:calc(var(--uc-radius)*1.75);box-shadow:var(--uc-dialog-shadow);color:var(--uc-foreground);height:180px;max-width:calc(var(--uc-dialog-width)*.8);transition:color var(--uc-transition),background-color var(--uc-transition),box-shadow var(--uc-transition),border-radius var(--uc-transition),transform var(--uc-transition);width:100%}:where([uc-drop-area])[with-icon][fullscreen][drag-state=active]>.uc-content-wrapper,:where([uc-drop-area])[with-icon][fullscreen][drag-state=near]>.uc-content-wrapper{opacity:0;transform:translateY(10px)}:where([uc-drop-area])[with-icon][fullscreen][drag-state=over]>.uc-content-wrapper{opacity:1;transform:translateY(0)}:is(:where([uc-drop-area])[with-icon][fullscreen])>.uc-content-wrapper uc-icon:first-child{transform:translateY(-48px)}:where([uc-drop-area])[clickable]{cursor:pointer}@supports selector(dialog::backdrop){:where([uc-modal])>dialog::backdrop{background-color:#0000001a}:where([uc-modal])[strokes]>dialog::backdrop{background-image:var(--modal-backdrop-background-image)}}:where([uc-modal])>dialog[open]{opacity:1;transform:translateY(0);visibility:visible}:where([uc-modal])>dialog:not([open]){opacity:0;transform:translateY(20px);visibility:hidden}:where([uc-modal])>dialog{background-color:var(--uc-background);border:0;border-radius:calc(var(--uc-radius)*1.75);box-shadow:var(--uc-dialog-shadow);display:flex;flex-direction:column;margin:auto;max-height:min(calc(100% - var(--uc-padding)*2),var(--uc-dialog-max-height));max-width:min(calc(100% - var(--uc-padding)*2),var(--uc-dialog-max-width));min-height:var(--uc-button-size);overflow:hidden;padding:0;transition:transform .4s ease,opacity .4s ease;width:min(var(--uc-dialog-width),100%)}:where(.uc-contrast) :where([uc-modal])>dialog{outline:1px solid var(--uc-border)}uc-url-source{background-color:var(--uc-background);display:block}uc-url-source>.uc-content{display:grid;grid-gap:4px;grid-template-columns:1fr min-content;padding:var(--uc-padding);padding-top:0}uc-url-source .uc-url-input{display:flex}uc-camera-source{background-color:var(--uc-background);border-radius:var(--uc-radius);display:flex;flex-direction:column;height:100%;max-height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-camera-source[active]){height:100%;width:100%}uc-camera-source:not(.uc-initialized) .uc-controls{display:none}uc-camera-source video{background-color:var(--uc-muted);border-radius:var(--uc-radius);display:block;max-height:100%;object-fit:contain;object-position:center center;width:100%}uc-camera-source .uc-toolbar{background-color:var(--uc-background);bottom:0;display:flex;justify-content:space-between;padding:var(--uc-padding);position:absolute;width:100%}uc-camera-source .uc-content{display:flex;flex:1;height:100%;justify-content:center;overflow:hidden;padding:var(--uc-padding);padding-top:0;width:100%}uc-camera-source .uc-message-box{display:flex;flex-direction:column;grid-gap:40px;align-items:center;color:var(--uc-foreground);justify-content:center;padding:40px 40px 0}uc-camera-source .uc-message-box button{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}uc-camera-source .uc-shot-btn{background-color:var(--uc-primary-light);border-radius:50%;color:var(--uc-background);height:58px;opacity:.85;transition:bottom var(--uc-transition),opacity var(--uc-transition),transform var(--uc-transition);width:58px}uc-camera-source .uc-shot-btn:hover{opacity:1;transform:scale(1.05)}uc-camera-source .uc-shot-btn:active{opacity:1;transform:scale(1)}uc-camera-source .uc-shot-btn[disabled]{bottom:-80px}uc-camera-source .uc-shot-btn uc-icon svg{height:20px;width:20px}uc-camera-source .uc-controls{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;min-height:74px;padding:0 var(--uc-padding) var(--uc-padding);position:relative}uc-camera-source .uc-switcher{display:flex;gap:calc(var(--uc-padding)/2)}uc-camera-source .uc-switch.uc-active{background-color:var(--uc-secondary)}uc-camera-source .uc-camera-actions{align-items:center;display:flex;gap:5px;justify-content:center}uc-camera-source .uc-stop-record{background-color:var(--uc-destructive-foreground-light);opacity:1}:where(uc-camera-source:is(.uc-recording)) .uc-recording-timer uc-icon{display:none}:where(uc-camera-source:is(.uc-recording)) .uc-recording-timer{pointer-events:none}uc-camera-source .uc-recording-timer{overflow:hidden;position:relative;z-index:1}:where(uc-camera-source) .uc-recording-timer uc-icon{height:10px;margin-right:10px;width:10px}uc-camera-source .uc-recording-timer .uc-line{background-color:var(--uc-foreground-light);bottom:0;content:"";height:2px;left:0;position:absolute;right:0;transform:scaleX(0);transform-origin:left;transition:transform var(--uc-transition)}uc-camera-source .uc-btn-microphone{z-index:1}uc-camera-source .uc-select{display:flex}uc-camera-source .uc-audio-select{width:98px}uc-camera-source .uc-audio-select select{width:100%}uc-camera-source .uc-camera-action{inset:0 var(--uc-padding) var(--uc-padding);margin:0 auto;position:absolute}uc-external-source{background-color:var(--uc-background);display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-external-source[active]){height:100%;width:100%}uc-external-source>.uc-content{display:grid;flex:1;grid-template-rows:1fr min-content;position:relative}uc-external-source iframe{border:none;display:block;height:100%;width:100%}uc-external-source .uc-iframe-wrapper{overflow:hidden}uc-external-source .uc-toolbar{display:flex;width:100%;grid-gap:var(--uc-padding);align-items:center;border-top:1px solid var(--uc-border);justify-content:space-between;padding:var(--uc-padding)}uc-external-source .uc-back-btn{padding-left:0}uc-external-source .uc-selection-status-box{align-items:center;color:var(--uc-foreground);display:flex;flex-direction:column;justify-content:center}uc-external-source .uc-selection-status-box button{background:none;color:var(--uc-primary);height:auto;padding:0}uc-external-source .uc-selection-status-box button:hover{text-decoration:underline}uc-external-source uc-activity-header{justify-content:flex-end;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:1}uc-external-source uc-activity-header .uc-close-btn{pointer-events:auto}uc-external-source .uc-done-btn>span.uc-hidden{pointer-events:none;visibility:hidden}uc-external-source .uc-done-btn>uc-spinner{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-upload-list{background-color:var(--uc-background);display:flex;flex-direction:column;height:max-content;overflow:hidden;position:relative;transition:opacity var(--uc-transition);width:100%}uc-upload-list .uc-no-files{height:32px;padding:20px}uc-upload-list .uc-files{display:block;flex:1;min-height:32px;overflow:auto;padding:0 var(--uc-padding)}uc-upload-list .uc-files-wrapper{display:contents}uc-upload-list .uc-toolbar{background-color:var(--uc-background);display:flex;gap:4px;justify-content:space-between;padding:var(--uc-padding)}uc-upload-list .uc-toolbar-spacer{flex:1}uc-upload-list uc-drop-area{border-radius:var(--uc-radius);height:calc(100% - var(--uc-padding)*2);left:0;margin:var(--uc-padding);position:absolute;top:0;width:calc(100% - var(--uc-padding)*2)}uc-upload-list uc-activity-header>.uc-header-text{padding:0 var(--uc-padding)}uc-upload-list .uc-common-error{align-items:center;background-color:var(--uc-destructive);border-radius:var(--uc-radius);color:var(--uc-destructive-foreground);display:flex;font-size:.925em;justify-content:center;margin:4px var(--uc-padding) 0 var(--uc-padding);padding:var(--uc-padding)}uc-upload-list .uc-add-more-btn uc-icon{display:none}uc-upload-list[mode=grid] .uc-files{display:flex;flex-wrap:wrap;gap:var(--uc-grid-gap)}uc-upload-list .uc-files .uc-add-more-btn,uc-upload-list[mode=grid] uc-file-item{aspect-ratio:var(--uc-grid-aspect-ratio);flex:0 0 calc((100% - var(--uc-grid-gap)*(var(--uc-grid-col) - 1))/var(--uc-grid-col));height:var(--uc-grid-preview-image-height);max-width:calc((100% - var(--uc-grid-gap)*(var(--uc-grid-col) - 1))/var(--uc-grid-col))}uc-upload-list .uc-files .uc-add-more-btn{display:none}uc-start-from{display:block;overflow-y:auto}uc-start-from .uc-content{background-color:var(--uc-background);display:grid;gap:calc(var(--uc-padding)*2);grid-auto-flow:row;height:100%;padding:calc(var(--uc-padding)*2);width:100%}[uc-modal]>dialog:has(uc-start-from[active]){width:var(--uc-dialog-width)}[uc-modal] uc-start-from uc-drop-area{border-radius:var(--uc-radius)}@media only screen and (max-width:430px){[uc-modal] uc-start-from uc-drop-area{display:none}}uc-file-item{--uc-file-item-gap:4px;--uc-file-item-height:calc(var(--uc-preview-size) + var(--uc-padding)*2 + var(--uc-file-item-gap));display:block;min-height:var(--uc-file-item-height);overflow:hidden}uc-file-item:last-of-type{--uc-file-item-gap:0}uc-file-item>.uc-inner{align-items:center;background-color:var(--uc-muted);border-radius:var(--uc-radius);display:grid;font-size:.925em;gap:2px;grid-template-columns:var(--uc-preview-size) 1fr max-content;margin-bottom:var(--uc-file-item-gap);overflow:hidden;padding:var(--uc-padding);position:relative;transition:background-color var(--uc-transition)}uc-file-item>.uc-inner[focused]{background-color:transparent}uc-file-item>.uc-inner[uploading] .uc-edit-btn{display:none}uc-file-item>:where(.uc-inner[failed],.uc-inner[limit-overflow]){background-color:var(--uc-destructive)}uc-file-item .uc-thumb{background-color:var(--uc-secondary);background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:var(--uc-radius);display:inline-flex;height:var(--uc-preview-size);position:relative;width:var(--uc-preview-size)}uc-file-item .uc-file-name-wrapper{align-items:flex-start;color:var(--uc-muted-foreground);display:flex;flex-direction:column;justify-content:center;max-width:100%;overflow:hidden;padding-left:var(--uc-padding);padding-right:var(--uc-padding);text-align:left}uc-file-item .uc-file-name{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}uc-file-item .uc-file-error{color:var(--uc-destructive-foreground);display:none;font-size:.85em;z-index:2}uc-file-item button.uc-edit-btn,uc-file-item button.uc-remove-btn{color:var(--uc-muted-foreground)}uc-file-item button svg{pointer-events:none}uc-file-item button.uc-upload-btn{display:none}uc-file-item .uc-badge{align-items:center;background-color:var(--uc-foreground);border-radius:50%;bottom:2px;color:var(--uc-background);display:flex;height:14px;justify-content:center;opacity:0;position:absolute;right:2px;transform:scale(.3);transition:opacity var(--uc-transition),transform var(--uc-transition);width:14px}uc-file-item>.uc-inner:where([failed],[limit-overflow],[finished]) .uc-badge{opacity:1;transform:scale(1)}uc-file-item>.uc-inner:where([failed],[limit-overflow]) .uc-badge{background-color:var(--uc-destructive-foreground)}uc-file-item>.uc-inner:where([failed],[limit-overflow]) .uc-file-error{display:block}uc-file-item .uc-badge uc-icon,uc-file-item .uc-badge uc-icon svg{height:100%;width:100%}uc-file-item .uc-progress-bar{height:2px;opacity:.7;top:calc(100% - 2px)}:where(.uc-contrast) uc-file-item .uc-progress-bar{opacity:1}uc-file-item .uc-file-actions{align-items:center;display:flex;gap:2px;justify-content:center}uc-file-item[mode=grid]{min-height:auto;overflow:visible}uc-file-item[mode=grid] .uc-inner{background-color:transparent;border-radius:0;grid-template-columns:1fr;grid-template-rows:1fr max-content;height:100%;margin-bottom:0;padding:0}uc-file-item[mode=grid] .uc-inner[failed] .uc-badge{display:none}uc-file-item[mode=grid] .uc-thumb{height:100%;width:100%}uc-file-item[mode=grid] .uc-badge{bottom:var(--uc-padding);right:var(--uc-padding)}uc-file-item[mode=grid] .uc-file-name-wrapper{padding:0}uc-file-item[mode=grid] .uc-file-name:not([hidden])+.uc-file-error{bottom:calc(var(--uc-padding) + var(--uc-font-size))}uc-file-item[mode=grid] .uc-file-error{background-color:var(--uc-destructive-foreground);bottom:var(--uc-padding);color:var(--uc-background)}uc-file-item[mode=grid] .uc-file-error,uc-file-item[mode=grid] .uc-file-hint{border-radius:var(--uc-radius);left:var(--uc-padding);padding:calc(var(--uc-padding)/2) var(--uc-padding);position:absolute;right:var(--uc-padding)}uc-file-item[mode=grid] .uc-file-hint{background-color:var(--uc-background);bottom:calc(var(--uc-padding)*2);color:var(--uc-foreground)}uc-file-item[mode=grid] .uc-file-actions{position:absolute;right:var(--uc-padding);top:var(--uc-padding)}uc-file-item[mode=grid] button{background-color:var(--uc-background)}uc-file-item[mode=grid] button:hover{background-color:var(--uc-muted)}uc-file-item[mode=grid] .uc-progress-bar{background-color:var(--uc-background);border-radius:var(--uc-radius);bottom:var(--uc-padding);height:4px!important;left:var(--uc-padding);right:var(--uc-padding);top:auto!important;transition:background-color .3s,opacity .3s;width:auto;z-index:1}uc-file-item[mode=grid] .uc-progress-bar :is(.uc-fake-progress,.uc-progress){background-color:var(--uc-primary)}uc-file-item[mode=grid] .uc-progress-bar[hasfilename]{bottom:calc(var(--uc-padding) + var(--uc-font-size))}uc-progress-bar-common{background-color:var(--uc-background);bottom:0;display:block;height:10px;left:0;position:fixed;right:0;transition:opacity .3s;z-index:10000}uc-progress-bar-common:not([active]){opacity:0;pointer-events:none}uc-progress-bar{--l-progress-value:0;bottom:0;height:100%;left:0;opacity:1;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:opacity .3s;width:100%}uc-progress-bar.uc-progress-bar--hidden{opacity:0}uc-progress-bar .uc-progress{background-color:var(--uc-primary);height:100%;opacity:1;position:absolute;transform:translate(0);transition:width .6s,opacity .3s;width:calc(var(--l-progress-value)*1%)}uc-progress-bar .uc-progress--hidden{opacity:0}uc-progress-bar .uc-fake-progress{--l-fake-progress-width:30;animation:fake-progress-animation 1s ease-in-out infinite;background-color:var(--uc-primary);height:100%;opacity:1;position:absolute;transition:opacity .3s;width:calc(var(--l-fake-progress-width)*1%);z-index:1}uc-progress-bar .uc-fake-progress--hidden{animation:none;opacity:0}@keyframes fake-progress-animation{0%{transform:translate(-100%)}to{transform:translate(calc(100/var(--l-fake-progress-width)*100*1%))}}uc-activity-header{color:var(--uc-foreground);display:flex;font-size:1em;font-weight:500;gap:var(--uc-padding);justify-content:space-between;padding:var(--uc-padding)}uc-activity-header>*{align-items:center;display:flex}uc-copyright{display:flex;justify-content:center;width:100%}uc-copyright .uc-credits{all:unset;background-color:var(--uc-background);border-radius:6px;bottom:12px;color:var(--uc-muted-foreground);cursor:pointer;font-size:12px;font-weight:400;opacity:.9;padding:2px 5px;position:absolute;transition:opacity var(--uc-transition),background-color var(--uc-transition)}uc-copyright .uc-credits:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}uc-copyright .uc-credits:hover{background-color:var(--uc-muted);opacity:1}[uc-cloud-image-editor]{--color-primary-accent:var(--uc-primary);--color-text-base:var(--uc-foreground);--color-text-accent-contrast:var(--uc-background);--color-fill-contrast:var(--uc-background);--color-modal-backdrop:oklch(0 0 0/.1);--color-image-background:var(--uc-muted);--color-focus-ring:var(--color-primary-accent);--color-crop-guides:var(--uc-foreground);--font-size-ui:var(--uc-font-size);--size-touch-area:var(--uc-button-size);--size-panel-heading:calc(var(--uc-button-size) + var(--uc-padding)*2);--size-ui-min-width:130px;--size-line-width:1px;--size-modal-width:650px;--size-icon:calc(var(--uc-button-size)/2);--border-radius-editor:var(--uc-radius);--border-radius-thumb:var(--uc-radius);--border-radius-ui:var(--uc-radius);--border-radius-base:var(--uc-radius);--cldtr-gap-min:5px;--cldtr-gap-mid-1:10px;--cldtr-gap-mid-2:15px;--cldtr-gap-max:20px;--transition-duration-2:var(--transition-duration-all,.2s);--transition-duration-3:var(--transition-duration-all,.3s);--transition-duration-4:var(--transition-duration-all,.4s);--transition-duration-5:var(--transition-duration-all,.5s);--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading);--transparent-pixel:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=);display:block;height:100%;max-height:100%;width:100%}[uc-cloud-image-editor] :is([can-handle-paste]:hover,[can-handle-paste]:focus){--can-handle-paste:"true"}[uc-cloud-image-editor] :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover){--filter-effect:var(--hover-filter)!important;--opacity-effect:var(--hover-opacity)!important;--color-effect:var(--hover-color-rgb)!important;--background-effect:var(--hover-background)!important}[uc-cloud-image-editor] :is([tabindex]:active,[with-effects]:active){--filter-effect:var(--down-filter)!important;--opacity-effect:var(--down-opacity)!important;--color-effect:var(--down-color-rgb)!important;--background-effect:var(--down-background)!important}[uc-cloud-image-editor] :is([tabindex][active],[with-effects][active]){--filter-effect:var(--active-filter)!important;--opacity-effect:var(--active-opacity)!important;--color-effect:var(--active-color-rgb)!important;--background-effect:var(--active-background)!important}[uc-cloud-image-editor] [hidden-scrollbar]::-webkit-scrollbar{display:none}[uc-cloud-image-editor] [hidden-scrollbar]{-ms-overflow-style:none;scrollbar-width:none}[uc-cloud-image-editor].uc-editor_ON{--modal-header-opacity:0;--modal-header-height:0px;--modal-toolbar-height:calc(var(--size-panel-heading)*2)}[uc-cloud-image-editor].uc-editor_OFF{--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading)}[uc-cloud-image-editor]>.uc-wrapper{--l-min-img-height:var(--modal-toolbar-height);--l-max-img-height:100%;--l-edit-button-width:120px;--l-toolbar-horizontal-padding:var(--cldtr-gap-mid-1);display:grid;grid-template-rows:minmax(var(--l-min-img-height),var(--l-max-img-height)) minmax(var(--modal-toolbar-height),auto);height:100%;overflow:hidden;overflow-y:auto;position:relative}@media only screen and (max-width:800px){[uc-cloud-image-editor]>.uc-wrapper{--l-edit-button-width:70px;--l-toolbar-horizontal-padding:var(--cldtr-gap-min)}}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport{align-items:center;display:flex;justify-content:center;overflow:hidden}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image{--viewer-image-opacity:1;background-color:var(--color-image-background);box-sizing:border-box;display:block;height:100%;left:0;object-fit:scale-down;opacity:var(--viewer-image-opacity);pointer-events:auto;position:absolute;top:0;transform:scale(1);user-select:none;width:100%;z-index:10}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_visible_viewer{transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_to_cropper{--viewer-image-opacity:0;background-image:var(--transparent-pixel);pointer-events:none;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_effects{--viewer-image-opacity:0;pointer-events:none;transform:scale(1);transition:opacity var(--transition-duration-3) cubic-bezier(.5,0,1,1),transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container{background-color:var(--color-image-background);display:block;height:100%;position:relative;transition:var(--transition-duration-3);width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar{position:relative;transition:.3s}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content{background-color:var(--color-fill-contrast);bottom:0;box-sizing:border-box;height:var(--modal-toolbar-height);left:0;min-height:var(--size-panel-heading);position:absolute;width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__viewer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:space-between;padding-left:var(--l-toolbar-horizontal-padding);padding-right:var(--l-toolbar-horizontal-padding)}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__editor{display:flex}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-info_pan{position:absolute;user-select:none}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer{display:flex;max-width:120px;position:absolute;transform:translate(-40px);user-select:none;z-index:2}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer>.uc-file_type{padding:4px .8em}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash{background-color:var(--color-fill-contrast);display:flex;flex-direction:column;height:100%;position:absolute;width:100%;z-index:4}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content{align-items:center;display:flex;flex:1;flex-direction:column;justify-content:center}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_icon{align-items:center;background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);display:flex;height:40px;justify-content:center;width:40px}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_text{color:var(--uc-foreground);font-size:var(--font-size-ui);margin-top:var(--cldtr-gap-max)}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_footer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:center}uc-crop-frame>.uc-svg{border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);height:100%;left:0;opacity:inherit;position:absolute;top:0;transition:var(--transition-duration-3);width:100%;z-index:2}uc-crop-frame>.uc-thumb{--idle-color-rgb:var(--color-text-base);--hover-color-rgb:var(--color-primary-accent);--focus-color-rgb:var(--color-primary-accent);--down-color-rgb:var(--color-primary-accent);--color-effect:var(--idle-color-rgb);color:var(--color-effect);transition:color var(--transition-duration-3),opacity var(--transition-duration-3)}uc-crop-frame>.uc-thumb--visible{opacity:1;pointer-events:auto}uc-crop-frame>.uc-thumb--hidden{opacity:0;pointer-events:none}uc-crop-frame>.uc-guides{transition:var(--transition-duration-3)}uc-crop-frame>.uc-guides--hidden{opacity:0}uc-crop-frame>.uc-guides--semi-hidden{opacity:.2}uc-crop-frame>.uc-guides--visible{opacity:1}uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control{--l-base-min-width:var(--uc-button-size);--l-base-height:var(--uc-button-size);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--filter-effect:var(--idle-filter);--idle-color-rgb:var(--uc-secondary-foreground);--idle-opacity:1;--idle-filter:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-opacity:1;--hover-filter:.8;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--hover-color-rgb);--down-opacity:1;--down-filter:.6;--down-background:var(--uc-secondary);border-radius:var(--uc-radius)}uc-editor-button-control>button,uc-editor-crop-button-control>button,uc-editor-filter-control>button,uc-editor-operation-control>button{all:unset;align-items:center;color:var(--color-effect);cursor:pointer;display:grid;grid-template-columns:var(--l-base-min-width) auto;grid-template-rows:100%;height:var(--l-base-height);opacity:var(--opacity-effect);position:relative;transition:var(--l-width-transition)}:where(uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control)>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-filter-control>uc-icon.uc-original-icon>svg{height:100%;width:100%}uc-editor-button-control.uc-active,uc-editor-crop-button-control.uc-active,uc-editor-filter-control.uc-active,uc-editor-operation-control.uc-active{--idle-color-rgb:var(--uc-primary-foreground);--idle-background:var(--uc-primary);--idle-opacity:1;--hover-color-rgb:var(--uc-primary-foreground);--hover-background:var(--uc-primary);--hover-opacity:1}uc-editor-filter-control.uc-not_active .uc-preview[loaded]{opacity:1}uc-editor-filter-control.uc-active .uc-preview{opacity:0}uc-editor-button-control.uc-not_active,uc-editor-crop-button-control.uc-not_active,uc-editor-filter-control.uc-not_active,uc-editor-operation-control.uc-not_active{--idle-color-rgb:var(--uc-secondary-foreground)}:where(.uc-contrast) uc-editor-button-control.uc-not_active,:where(.uc-contrast) uc-editor-crop-button-control.uc-not_active,:where(.uc-contrast) uc-editor-filter-control.uc-not_active,:where(.uc-contrast) uc-editor-operation-control.uc-not_active{--idle-background:transparent;--hover-background:var(--uc-secondary);outline:1px solid var(--uc-border);outline-offset:-1px}uc-editor-button-control>button:before,uc-editor-crop-button-control>button:before,uc-editor-filter-control>button:before,uc-editor-operation-control>button:before{background-color:var(--background-effect);border-radius:var(--border-radius-editor);content:"";height:100%;left:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-button-control>button .uc-title,uc-editor-crop-button-control>button .uc-title,uc-editor-filter-control>button .uc-title,uc-editor-operation-control>button .uc-title{font-size:.7em;letter-spacing:1.004px;padding-right:var(--cldtr-gap-mid-1);text-transform:uppercase}uc-editor-button-control>button uc-icon,uc-editor-crop-button-control>button uc-icon,uc-editor-filter-control>button uc-icon,uc-editor-operation-control>button uc-icon{pointer-events:none}uc-editor-filter-control>button .uc-preview{background-repeat:no-repeat;background-size:contain;border-radius:var(--border-radius-editor);filter:brightness(var(--filter-effect));height:var(--l-base-height);left:0;opacity:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-filter-control>.uc-original-icon{color:var(--color-effect);opacity:.3}uc-editor-image-cropper{color:var(--color-crop-guides);display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;touch-action:none;width:100%;z-index:10}uc-editor-image-cropper.uc-active_from_editor,uc-editor-image-cropper.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1) translate(0);transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3)}uc-editor-image-cropper.uc-inactive_to_editor{opacity:0;pointer-events:none;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1),opacity var(--transition-duration-3) calc(var(--transition-duration-3) + .05s)}uc-editor-image-cropper>.uc-canvas{z-index:1}uc-editor-image-cropper>.uc-canvas,uc-editor-image-fader{display:block;height:100%;left:0;position:absolute;top:0;width:100%}uc-editor-image-fader.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-start;z-index:3}uc-editor-image-fader.uc-active_from_cropper{opacity:1;pointer-events:auto}uc-editor-image-fader.uc-active_from_cropper,uc-editor-image-fader.uc-inactive_to_cropper{transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end;z-index:3}uc-editor-image-fader.uc-inactive_to_cropper{opacity:0;pointer-events:none}uc-editor-image-fader .uc-fader-image{content-visibility:auto;display:block;height:100%;left:0;object-fit:scale-down;position:absolute;top:0;transform:scale(1);user-select:none;width:100%}uc-editor-image-fader .uc-fader-image--preview{background-color:var(--color-image-background);border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);opacity:0;transform:scale(1);transition:var(--transition-duration-3)}uc-editor-scroller{height:100%;overflow-x:scroll}uc-editor-scroller,uc-editor-slider{align-items:center;display:flex;width:100%}uc-editor-slider{height:var(--size-panel-heading);justify-content:center}uc-editor-toolbar{height:100%;position:relative;width:100%}@media only screen and (max-width:600px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-mid-1);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}@media only screen and (min-width:601px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-max);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}uc-editor-toolbar>.uc-toolbar-container{height:100%;overflow:hidden;position:relative;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar{background-color:var(--color-fill-contrast);display:grid;grid-template-rows:1fr 1fr;height:100%;position:absolute;transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-3) ease-in-out,visibility var(--transition-duration-3) ease-in-out;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--visible{opacity:1;pointer-events:auto;transform:translateY(0)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--top-hidden{opacity:0;pointer-events:none;transform:translateY(100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--bottom-hidden{opacity:0;pointer-events:none;transform:translateY(-100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row{align-items:center;display:flex;justify-content:space-between;padding-left:var(--l-controls-padding);padding-right:var(--l-controls-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles{display:grid;grid-auto-flow:column;position:relative;grid-gap:0 var(--l-tab-gap);align-items:center;height:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggles_indicator{background-color:var(--uc-secondary-foreground);bottom:0;height:2px;left:0;position:absolute;transform:translate(0);transition:transform var(--transition-duration-3);width:var(--size-touch-area)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row{position:relative}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content{content-visibility:auto;display:flex;height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--visible{opacity:1;pointer-events:auto}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--hidden{opacity:0;pointer-events:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--visible{display:contents}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles.uc-tab-toggles--hidden,uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--hidden{display:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui{width:var(--uc-button-size)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_align{box-sizing:border-box;display:grid;grid-template-areas:". inner .";grid-template-columns:1fr auto 1fr;min-width:100%;padding-left:var(--uc-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner{display:grid;gap:6px;grid-area:inner;grid-auto-flow:column}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner:last-child{padding-right:var(--uc-padding)}uc-editor-toolbar .uc-controls-list_last-item{margin-right:var(--cldtr-gap-max)}uc-editor-toolbar .uc-info-tooltip_container{align-items:flex-start;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-editor-toolbar .uc-info-tooltip_wrapper{display:flex;flex-direction:column;height:100%;justify-content:flex-end;pointer-events:none;position:absolute;top:calc(-100% - var(--cldtr-gap-mid-2))}uc-editor-toolbar .uc-info-tooltip{background-color:var(--color-text-accent-contrast);border-radius:var(--border-radius-editor);color:var(--color-text-base);font-size:.7em;letter-spacing:1px;opacity:0;padding:3px 6px;text-transform:uppercase;transform:translateY(100%);transition:var(--transition-duration-3);z-index:3}uc-editor-toolbar .uc-info-tooltip_visible{opacity:1;transform:translateY(0)}uc-editor-toolbar .uc-slider{padding-left:var(--l-slider-padding);padding-right:var(--l-slider-padding)}uc-btn-ui>button{--filter-effect:var(--idle-brightness);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--l-transition-effect:var( --css-transition,color var(--transition-duration-2),background-color var(--transition-duration-2),filter var(--transition-duration-2) );all:unset;align-items:center;background-color:var(--background-effect);border-radius:var(--uc-radius);box-sizing:var(--css-box-sizing,border-box);color:var(--color-effect);cursor:pointer;display:inline-flex;filter:brightness(var(--filter-effect));font-size:1em;height:var(--css-height,var(--uc-button-size));opacity:var(--opacity-effect);padding-left:var(--css-padding-left,14px);padding-right:var(--css-padding-right,14px);transition:var(--l-transition-effect);user-select:none}uc-btn-ui>button>uc-icon{pointer-events:none}uc-btn-ui .uc-text{white-space:nowrap}uc-btn-ui .uc-icon{align-items:center;color:var(--color-effect);display:flex;filter:brightness(var(--filter-effect));justify-content:center;transition:var(--l-transition-effect)}uc-btn-ui .uc-icon_left{margin-left:0;margin-right:var(--cldtr-gap-mid-1)}uc-btn-ui .uc-icon_right{margin-left:var(--cldtr-gap-mid-1);margin-right:0}uc-btn-ui .uc-icon_single{margin-left:0;margin-right:0}uc-btn-ui .uc-icon_hidden{display:none;margin:0}uc-btn-ui.uc-primary>button{--idle-color-rgb:var(--uc-primary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-primary);--hover-color-rgb:var(--uc-primary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-hover);--down-color-rgb:var(--uc-primary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary)}uc-btn-ui.uc-primary-icon>button{--idle-color-rgb:var(--uc-primary);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-primary);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-transparent);--down-color-rgb:var(--uc-primary);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary-transparent);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary);padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-secondary>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary-hover);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent}:where(.uc-contrast) uc-btn-ui.uc-secondary>button{border:1px solid var(--uc-border)}uc-btn-ui.uc-secondary-icon>button,uc-btn-ui.uc-tab>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent;padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-default>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-primary);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary-transparent)}:where(.uc-contrast) uc-btn-ui.uc-default>button{--idle-background:transparent;--hover-background:var(--uc-secondary);--active-background:var(--uc-foreground);--active-color-rgb:var(--uc-background)}uc-line-loader-ui{height:2px;left:0;opacity:.5;position:absolute;top:0;width:100%;z-index:9999}uc-line-loader-ui .uc-inner{height:100%;max-width:200px;width:25%}uc-line-loader-ui .uc-line{background-color:var(--uc-primary);height:100%;transform:translate(-101%);transition:transform 1s;width:100%}uc-slider-ui{--l-thumb-size:24px;--l-zero-dot-size:5px;--l-zero-dot-offset:2px;--idle-color-rgb:var(--uc-foreground);--hover-color-rgb:var(--uc-primary);--down-color-rgb:var(--uc-primary);--color-effect:var(--idle-color-rgb);--l-color:var(--color-effect);align-items:center;display:flex;height:calc(var(--l-thumb-size) + (var(--l-zero-dot-size) + var(--l-zero-dot-offset))*2);justify-content:center;position:relative;width:100%}uc-slider-ui .uc-thumb{background-color:var(--l-color);border-radius:50%;height:var(--l-thumb-size);left:0;opacity:1;position:absolute;transform:translate(0);transition:opacity var(--transition-duration-2),background-color var(--transition-duration-2);width:var(--l-thumb-size)}uc-slider-ui .uc-steps{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding-left:calc(var(--l-thumb-size)/2);padding-right:calc(var(--l-thumb-size)/2);position:absolute;width:100%}uc-slider-ui .uc-border-step{height:10px;opacity:1}uc-slider-ui .uc-border-step,uc-slider-ui .uc-minor-step{border-right:1px solid var(--uc-foreground);transition:border-color var(--transition-duration-2);width:0}uc-slider-ui .uc-minor-step{height:4px;opacity:.6}uc-slider-ui .uc-zero-dot{background-color:var(--color-primary-accent);border-radius:50%;height:var(--l-zero-dot-size);left:calc(var(--l-thumb-size)/2 - var(--l-zero-dot-size)/2);opacity:0;position:absolute;top:calc(100% - var(--l-zero-dot-offset)*2);transition:var(--transition-duration-3);width:var(--l-zero-dot-size)}uc-slider-ui .uc-input{cursor:pointer;height:100%;margin:0;opacity:0;position:absolute;width:calc(100% - 10px)}uc-presence-toggle.uc-transition{transition:opacity var(--transition-duration-3),visibility var(--transition-duration-3)}uc-presence-toggle.uc-visible{opacity:1;pointer-events:inherit}uc-presence-toggle.uc-hidden{opacity:0;pointer-events:none}uc-presence-toggle.uc-initial{display:none!important;transition:none!important}[uc-cloud-image-editor] [role=button]:focus-visible,[uc-cloud-image-editor] button:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}[uc-cloud-image-editor] .uc-cloud-mask{pointer-events:none}:where([uc-cloud-image-editor]) uc-icon{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-cloud-image-editor]) uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}uc-cloud-image-editor-activity{background-color:var(--uc-background);display:flex;height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-cloud-image-editor-activity[active]){height:100%;width:100%}uc-select,uc-select select{display:inline-flex}uc-select select{align-items:center;background-color:var(--uc-secondary);border:none;border-radius:var(--uc-radius);color:var(--uc-secondary-foreground);cursor:pointer;font-family:inherit;font-size:1em;height:var(--uc-button-size);justify-content:center;padding:0 14px;position:relative;transition:background-color var(--uc-transition);user-select:none;white-space:nowrap}@keyframes uc-spinner-keyframes{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.uc-spinner{animation:uc-spinner-keyframes .4s linear infinite;border-color:currentcolor transparent transparent currentcolor;border-radius:50%;border-style:solid;border-width:2px;height:1em;width:1em}uc-thumb{height:100%;width:100%}:where([uc-wgt-common]) uc-source-btn[type]{all:unset}[uc-file-uploader-inline] uc-start-from{container-type:inline-size;height:100%}[uc-file-uploader-inline]{--cfg-done-activity:"start-from";--cfg-init-activity:"start-from";flex:1}[uc-file-uploader-inline] uc-activity-header:after{content:"";height:var(--uc-button-size);width:var(--uc-button-size)}[uc-file-uploader-inline] uc-activity-header .uc-close-btn{display:none}[uc-file-uploader-inline] uc-copyright .uc-credits{position:static}@container (min-width: 500px){[uc-file-uploader-inline] uc-start-from .uc-content{grid-template-columns:1fr max-content;height:100%}[uc-file-uploader-inline] uc-start-from uc-copyright{grid-column:2}[uc-file-uploader-inline] uc-start-from uc-drop-area{grid-row:span 3}[uc-file-uploader-inline] uc-start-from:has(uc-copyright[hidden]) uc-drop-area{grid-row:span 2}[uc-file-uploader-inline] uc-start-from:has(.uc-cancel-btn[hidden]) uc-drop-area{grid-row:span 2}[uc-file-uploader-inline] uc-start-from:has(uc-copyright[hidden]):has(.uc-cancel-btn[hidden]) uc-drop-area{grid-row:span 1}}'),gt(".ck-uploadcare-theme{--uc-font-size:13px;--uc-radius:2px;--uc-padding:0.9em;--uc-primary-oklch-light:54.45% 0.182 263.76;--uc-foreground-light:#333;--uc-secondary-foreground-light:#333;--uc-muted-foreground-light:#333;--uc-border-light:#ccced1}"),gt(':root{--ck-image-processing-highlight-color:#f9fafa;--ck-image-processing-background-color:#e3e5e8}.ck.ck-editor__editable .image-inline.image-processing picture,.ck.ck-editor__editable .image.image-processing picture{display:block;height:100%;position:relative;width:100%}.ck.ck-editor__editable .image-inline.image-processing picture:before,.ck.ck-editor__editable .image.image-processing picture:before{animation:ck-image-processing-animation 2s linear infinite;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;content:"";height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.ck.ck-editor__editable .image-inline.image-processing picture img,.ck.ck-editor__editable .image.image-processing picture img{height:100%}.ck.ck-editor__editable .image-inline.image-processing-blur,.ck.ck-editor__editable .image.image-processing-blur{clip-path:inset(0);filter:blur(1.6rem)}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}');const z=zt;(function(i,e){const t=zt,r=i();for(;;)try{if(-parseInt(t(411))/1*(parseInt(t(425))/2)+-parseInt(t(437))/3*(-parseInt(t(357))/4)+parseInt(t(381))/5*(parseInt(t(433))/6)+parseInt(t(406))/7*(parseInt(t(401))/8)+-parseInt(t(435))/9*(-parseInt(t(419))/10)+parseInt(t(413))/11*(parseInt(t(384))/12)+parseInt(t(426))/13*(-parseInt(t(364))/14)===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Ft,920573);function zt(i,e){const t=Ft();return zt=function(r,o){return r=r-354,t[r]},zt(i,e)}function Ft(){const i=["uploadcareLicenseKeyTrialLimit","trialLimit","GDrive","_createDropdownButtons","icon","commands","uploadcareLicenseKeyDomainLimit","get","ImageInsertUI","usageLimit","340HHGtcR","forEach","afterInit","1680408AClTIC","_createToolbarButton","expired","shortText","domainLimit","uploadcareLicenseKeyExpired","isImageSelected","entries","text","_showLicenseError","has","uploadcareLicenseKeyUsageLimit","map","URL","Insert","plugins","OneDrive","64FAfvOF","UploadcareUI","locale","Uploadcare","uploadcare","917182MBtrfn","uploadcare.uploader.sourceList","featureNotAllowed","reduce","uploadcareLicenseKeyNotAllowed","1ZkEKdf","type","77RQJNRf","assetManager","isOfficialPlugin","_getIntegrationKey","tooltip","url","74850JKxlDj","uploadcareLicenseKeyValid","bind","withText","label","_createButton","3130086WmVngS","871POAjNh","licenseKey","_createMenuBarButtons","init","push","invalid","uploadcareLicenseKeyEvaluationLimit","138522jbpRuh","isPremiumPlugin","2097miLfVt","config","3NeqmXG","_licenseKeyCheckInterval","Facebook","Dropbox","execute","1627276FVIhhQ","Local","GPhotos","registerIntegration","uploadcareLicenseKeyInvalid","upload","destroy","681940xDZVpU","editor","evaluationLimit","_normalizeConfigSourceList","isEnabled","Replace","pluginName"];return Ft=function(){return i},Ft()}class lo extends He{[z(427)];[z(438)];static get[z(370)](){return z(402)}static get[z(415)](){return!0}static get[z(434)](){return!0}[z(429)](){const e=z;this[e(427)]=this[e(365)][e(436)][e(378)](e(427));const t=this[e(365)];this[e(438)]=setInterval(()=>{const r=e;let o;for(const a in t){const n=a,s=t[n];if(r(420)==s||r(361)==s||r(389)==s||r(377)==s||r(410)==s||r(432)==s||r(371)==s||r(395)==s){delete t[n],o=s,clearInterval(this[r(438)]),this[r(438)]=void 0;break}}r(361)==o&&t[r(393)](r(431)),r(389)==o&&t[r(393)](r(386)),r(377)==o&&t[r(393)](r(388)),r(410)==o&&t[r(393)](r(408),r(404)),r(432)==o&&t[r(393)](r(366)),r(371)==o&&t[r(393)](r(372)),r(395)==o&&t[r(393)](r(380))},1e3)}[z(383)](){const e=z,{editor:t}=this,r=t[e(376)][e(378)](e(405));if(!r)return;const o=this[e(367)](t[e(436)][e(378)](e(407)))[e(409)]((a,n)=>{const s=e,c=this[s(416)](n[s(412)]);return a[c]||(a[c]=[]),a[c][s(430)](n),a},{});t[e(399)][e(394)](e(379))&&t[e(376)][e(378)](e(405))&&Object[e(391)](o)[e(382)](([a,n])=>{const s=e;t[s(399)][s(378)](s(379))[s(360)]({name:a,observable:()=>r,buttonViewCreator:()=>this[s(385)](n),formViewCreator:()=>this[s(374)](n),menuBarButtonViewCreator:()=>this[s(428)](n),override:s(414)!==a})})}[z(363)](){const e=z;super[e(363)](),this[e(438)]&&clearInterval(this[e(438)])}[z(367)](e){const t=z,{locale:r}=this[t(365)];return e[t(396)](o=>{const a=t,n=Dt(r,o,a(398));switch(o){case O[a(358)]:return{icon:io,type:O[a(358)],...n};case O[a(397)]:return{icon:Hn,type:O[a(397)],...n};case O[a(355)]:return{icon:jn,type:O[a(355)],...n};case O[a(354)]:return{icon:Bn,type:O[a(354)],...n};case O[a(373)]:return{icon:Nn,type:O[a(373)],...n};case O[a(359)]:return{icon:Vn,type:O[a(359)],...n};case O[a(400)]:return{icon:Fn,type:O[a(400)],...n}}})}[z(416)](e){const t=z;switch(e){case O[t(358)]:return t(362);case O[t(397)]:return t(418);default:return t(414)}}[z(424)](e,t){const r=z,o=this[r(365)],a=new e(o[r(403)]),n=o[r(376)][r(378)](r(405));return a[r(421)](r(368)).to(n),a.on(r(356),()=>{n[r(356)](t)}),a}[z(385)](e){const t=z,{locale:r}=this[t(365)],o=this[t(365)][t(399)][t(378)](t(379)),a=e[0],n=this[t(424)](Mt,a[t(412)]);return n[t(375)]=a[t(375)],n[t(421)](t(423)).to(o,t(390),s=>Dt(r,a[t(412)],t(s?369:398))[t(392)]),n[t(417)]=!0,n}[z(374)](e){const t=z,{locale:r}=this[t(365)],o=this[t(365)][t(399)][t(378)](t(379));return e[t(396)](a=>{const n=t,s=this[n(424)](Mt,a[n(412)]);return s[n(422)]=!0,s[n(375)]=a[n(375)],s[n(421)](n(423)).to(o,n(390),c=>Dt(r,a[n(412)],n(c?369:398))[n(392)]),s})}[z(428)](e){const t=z;return e[t(396)](r=>{const o=t,a=this[o(424)](Wn,r[o(412)]);return a[o(375)]=r[o(375)],a[o(423)]=r[o(387)],a})}}gt(":root{--ck-uploadcare-form-view-width:700px;--ck-uploadcare-external-source-view-height:350px;--ck-uploadcare-color-image-background:oklch(0.97 0 0);--ck-uploadcare-color-icon-error:#db3700;--ck-uploadcare-color-skeleton:#fafafa}.ck .ck-uploadcare-form{max-width:100%;width:var(--ck-uploadcare-form-view-width)}.ck .ck-uploadcare-form .ck-uploadcare-form__loading .ck-uploadcare-form__loading-spinner{align-items:center;background-color:var(--ck-uploadcare-color-image-background);display:flex;flex-direction:column;height:var(--ck-uploadcare-external-source-view-height);justify-content:center;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__loading .ck-uploadcare-form__loading-spinner .ck-spinner-container{margin-bottom:10px}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents{align-items:center;background-color:var(--ck-uploadcare-color-image-background);display:flex;flex-direction:column;gap:5px;height:var(--ck-uploadcare-external-source-view-height);justify-content:center;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents h3{font-weight:700;margin:0;padding:0}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents .ck-icon{color:var(--ck-uploadcare-color-icon-error)}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents .ck-button{margin-top:10px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton{height:115px;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;height:50%;justify-content:center;min-width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div span{background-color:var(--ck-uploadcare-color-skeleton);display:block;height:32px;width:32px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div{gap:20px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div span:first-child{left:8px;position:absolute;width:80px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div span:last-child{position:absolute;right:8px;width:80px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div:first-child{gap:4px}.ck .ck-uploadcare-form .mini-btn{display:none}.ck .ck-uploadcare-form .uc-viewport{height:var(--ck-uploadcare-external-source-view-height)}.ck .ck-uploadcare-form .uc-primary-btn,.ck .ck-uploadcare-form .uc-secondary-btn,.ck .ck-uploadcare-form uc-btn-ui button{min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}.ck .ck-uploadcare-form .uc-primary-btn,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button{background:var(--ck-color-button-action-background)}.ck .ck-uploadcare-form .uc-primary-btn:not(.ck-disabled):hover,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck .ck-uploadcare-form .uc-primary-btn:not(.ck-disabled):active,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck .ck-uploadcare-form .uc-primary-btn.ck-disabled,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck .ck-uploadcare-form .uc-secondary-btn,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button{background:var(--ck-color-button-default-background)}.ck .ck-uploadcare-form .uc-secondary-btn:not(.ck-disabled):hover,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck .ck-uploadcare-form .uc-secondary-btn:not(.ck-disabled):active,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck .ck-uploadcare-form .uc-secondary-btn.ck-disabled,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck .ck-uploadcare-form uc-upload-list .uc-toolbar{gap:var(--ck-spacing-large)}.ck .ck-uploadcare-form uc-upload-list .uc-files{max-height:var(--ck-uploadcare-external-source-view-height);overflow-y:auto;padding-top:var(--ck-spacing-large)}.ck .ck-uploadcare-form .uc-content{gap:var(--ck-spacing-large);padding:var(--ck-spacing-large)}.ck .ck-uploadcare-form .uc-content>.uc-iframe-wrapper{height:var(--ck-uploadcare-external-source-view-height)}.ck .ck-uploadcare-form .uc-content>.uc-toolbar{padding:var(--ck-spacing-large) 0 0}.ck .ck-uploadcare-form uc-start-from .uc-content{gap:0}.ck .ck-uploadcare-form uc-file-item>.uc-inner{font-size:1em}.ck .ck-uploadcare-form uc-file-item>.uc-inner:where([finished]) .uc-badge{background:var(--ck-color-button-action-active-background)}.ck .ck-uploadcare-form uc-external-source .uc-cancel-btn{pointer-events:none;visibility:hidden}.ck .ck-uploadcare-form uc-activity-header,.ck .ck-uploadcare-form uc-source-list{display:none}.ck .ck-uploadcare-form uc-cloud-image-editor-block [icon=closeMax] .uc-icon_left{transform:rotate(90deg)}");var mt=Nt;(function(i,e){for(var t=Nt,r=i();;)try{var o=parseInt(t(458))/1+-parseInt(t(453))/2+-parseInt(t(469))/3*(parseInt(t(454))/4)+parseInt(t(459))/5+-parseInt(t(452))/6*(-parseInt(t(455))/7)+parseInt(t(456))/8*(-parseInt(t(467))/9)+-parseInt(t(468))/10;if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Vt,907215);function Vt(){var i=["forwardCycle","bindTemplate","createCollection","focusCycler","getFocusableElement","div","10575HRjmGB","1899610PCdxGn","3sGzKxo","focusTracker","12NJmLiX","590492NPYPvr","3166936ozrJMZ","1922732ODhfNF","10496TZMWGE","true","1497558wSLGUc","8394230BcxDlK","fire"];return Vt=function(){return i},Vt()}function Nt(i,e){var t=Vt();return Nt=function(r,o){r=r-452;var a=t[r];return a},Nt(i,e)}class uo extends pt{[mt(470)];[mt(464)];constructor(e){var t=mt;super(e),this[t(470)]=new Kn,this[t(464)]=new qn({focusables:this[t(463)](),focusTracker:this[t(470)]})}[mt(465)](){var e=mt;return{tag:e(466),attributes:{"aria-hidden":e(457),tabindex:"0"},on:{focus:this[e(462)].to(()=>{var t=e;this[t(464)][t(460)](t(461))})}}}}var ho=xt;function xt(i,e){var t=Bt();return xt=function(r,o){r=r-323;var a=t[r];return a},xt(i,e)}function Bt(){var i=["div","focus","1790870jtmLTZ","24227KmlndD","uc-light","ck-reset_all-excluded","197855nxLdtb","360svilRo","207696CJHGOp","element","563184NySDML","uc-file-uploader-inline","561ndzQPu","195388BUgiEN","uploader-","setTemplate","42keUURa","9nfMPoG","getFocusableElement","183404XDFqne","ck-uploadcare-theme","ck-uploadcare-form","6uzYnQj"];return Bt=function(){return i},Bt()}(function(i,e){for(var t=xt,r=i();;)try{var o=-parseInt(t(323))/1+parseInt(t(337))/2+-parseInt(t(326))/3*(parseInt(t(340))/4)+-parseInt(t(333))/5*(parseInt(t(343))/6)+-parseInt(t(330))/7*(parseInt(t(334))/8)+-parseInt(t(344))/9*(parseInt(t(329))/10)+parseInt(t(339))/11*(parseInt(t(335))/12);if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Bt,271373);class es extends uo{constructor(e,t){var r=xt;super(e),this[r(342)]({tag:r(327),attributes:{class:["ck",r(332),r(325)],tabindex:"-1"},children:[{tag:r(338),attributes:{class:[r(331),r(324)],"ctx-name":r(341)+t}},this[r(345)]()]})}[ho(328)](){var e=ho;this[e(336)][e(328)]()}}(function(i,e){const t=$e,r=i();for(;;)try{if(-parseInt(t(489))/1*(-parseInt(t(478))/2)+-parseInt(t(495))/3*(-parseInt(t(496))/4)+parseInt(t(507))/5+parseInt(t(485))/6+parseInt(t(475))/7+parseInt(t(504))/8+-parseInt(t(454))/9===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(jt,445771);function jt(){const i=["uploadcareImageId","change","document","getAttribute","mapper","ImageUtils","toViewElement","aspect-ratio","addClass","load","element","replace","findViewImgElement","x/ ","imageInline","setStyle","2866731rSgNFQ","stopListening","image-processing","1625174tPMHxH","origin","imageBlock","baseURI","src","removeClass","px) 100vw, ","5096334bXFlIL","plugins","/-/resize/","removeStyle","1nyskZq","window","width","some","image/webp","height","35451iwKZsu","164vCnGwF","domConverter","match","isArray","hasAttribute","get","map","function","2347488rwmfVm","join","(max-width: ","538205LRVqBf","view","editing","22601808QrJbpn","filter","listenTo","location","viewToDom"];return jt=function(){return i},jt()}function $e(i,e){const t=jt();return $e=function(r,o){return r=r-454,t[r]},$e(i,e)}function ts(i){const e=$e,t=go(i);return r=>!(!r||!r.is(e(469),e(480))&&!r.is(e(469),e(473)))&&(!!r[e(500)](e(459))||!!r[e(500)](e(482))&&t(r[e(462)](e(482))))}function oi(i,e){const t=$e,r=[320,480,768,1024,1200,1600,1920,2400][t(455)](o=>o<=e)[t(502)](o=>i[t(470)](/\/$/,"")+t(487)+o+t(472)+o+"w");return{imageFallbackUrl:i,imageSources:[{srcset:r[t(505)](", "),sizes:t(506)+e+t(484)+e+"px",type:t(493)}]}}function po(i,e,t){const r=$e,o=i[r(498)](/\/crop\/(\d+)x(\d+)\//);return{width:o?parseInt(o[1],10):e,height:o?parseInt(o[2],10):t}}function fo(i,e){const t=$e,r=new(Jn()),o=i[t(486)][t(501)](t(464)),a=i[t(509)][t(463)][t(465)](e),n=o[t(471)](a),s=i[t(509)][t(508)][t(497)][t(458)](n),c=e[t(462)](t(491)),l=e[t(462)](t(494)),d=t(477);i[t(509)][t(508)][t(460)](u=>{const p=t;u[p(467)](d,a),u[p(474)](p(466),c+"/"+l,n)}),r[t(456)](s,t(468),()=>{const u=t;r[u(476)](s,u(468)),i[u(509)][u(508)][u(460)](p=>{const f=u;p[f(483)](d,a),p[f(488)](f(466),n)})})}function go(i){const e=$e;if(Array[e(499)](i)){const t=i[e(502)](go);return r=>t[e(492)](o=>o(r))}if(e(479)==i){const t=ke[e(490)][e(457)][e(479)];return r=>new URL(r,ke[e(461)][e(481)])[e(479)]==t}return e(503)==typeof i?i:i instanceof RegExp?t=>!(!t[e(498)](i)&&!t[e(470)](/^https?:\/\//,"")[e(498)](i)):()=>!1}(function(i,e){for(var t=Ht,r=i();;)try{var o=parseInt(t(288))/1+parseInt(t(289))/2*(parseInt(t(293))/3)+-parseInt(t(295))/4*(-parseInt(t(290))/5)+-parseInt(t(291))/6+-parseInt(t(287))/7*(parseInt(t(297))/8)+parseInt(t(294))/9+-parseInt(t(298))/10;if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Gt,609632);function mo(i,e){var t=Ht;return Qn(i[t(292)])[t(296)](e)}function Ht(i,e){var t=Gt();return Ht=function(r,o){r=r-287;var a=t[r];return a},Ht(i,e)}function Gt(){var i=["58026oVrUyA","2314986ltxvcK","10XYnkGy","4435500iJUvvj","target","3shZxVz","8960922MqkMDy","2031844QWsqTV","includes","112jeODsG","16718430HKxhOq","103187UAvVPo"];return Gt=function(){return i},Gt()}const Z=qt;(function(i,e){const t=qt,r=i();for(;;)try{if(parseInt(t(157))/1*(-parseInt(t(182))/2)+parseInt(t(173))/3*(-parseInt(t(216))/4)+parseInt(t(159))/5+-parseInt(t(204))/6+-parseInt(t(150))/7+parseInt(t(189))/8+parseInt(t(191))/9===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Wt,159673);function Wt(){const i=["model","idle","_formView","get","uuid","doneFlow","3FKGzkg","getAPI","Replace","execute","_type","Insert","_editor","focus","removeAllFiles","69424RcxSjf","show","imageInfo","detail","uploadCare","element","addEventListener","840840WldNpu","change","1889244YoFwAb","isOpen","stopDelegating","getOutputCollectionState","width","ctxElement","setCurrentActivity","initFlow","document","_insertImage","_initListeners","insertImage","status","499140kTLbsF","_initDialog","done-click","_dialog","editing","imageBlock","removeSelectionAttribute","allEntries","text","setAttribute","plugins","Local","226040BhCfSA","_editing","_insertAsset","EDITOR_TOP_CENTER","selection","view","image","1189279VjMJTa","ucContextId","getLastPosition","_api","getSelectedElement","linkHref","attributes","2jmBYtI","imageInline","1118365xePuyz","destroy","stopListening","source-list","setSelection","length","hide","configElement"];return Wt=function(){return i},Wt()}function qt(i,e){const t=Wt();return qt=function(r,o){return r=r-150,t[r]},qt(i,e)}class rs extends no(){[Z(179)];[Z(207)];[Z(217)];[Z(153)];[Z(177)]=null;[Z(169)]=null;constructor(e,t,r){const o=Z;super(),this[o(179)]=e,this[o(217)]=t,this[o(207)]=e[o(214)][o(170)](ft),this[o(153)]=t[o(196)][o(174)](),this[o(177)]=r,this[o(217)][o(166)][o(213)](o(162),this[o(177)]),this[o(205)](),this[o(201)](),this[o(153)][o(198)]()}[Z(160)](){const e=Z;this[e(169)]&&(this[e(169)][e(160)](),this[e(169)]=null),this[e(153)]&&this[e(153)][e(172)](),this[e(161)](),this[e(193)]()}[Z(205)](){const e=Z,{locale:t,model:r}=this[e(179)],o=r[e(199)][e(220)][e(154)](),a=o&&(o.is(e(187),e(209))||o.is(e(187),e(158)));this[e(169)]=new es(t,this[e(217)][e(151)]),this[e(207)][e(183)]({id:e(186),icon:io,title:Dt(t,this[e(177)],e(a?175:178))[e(212)],content:this[e(169)],position:ao[e(219)],isModal:!0,onShow:()=>{const n=e;this[n(169)][n(180)]()},onHide:()=>{const n=e;this[n(153)][n(181)](),this[n(179)][n(208)][n(221)][n(180)](),this[n(160)]()},keystrokeHandlerOptions:{filter:n=>!mo(n,this[e(169)][e(187)])}})}[Z(201)](){const e=Z;this[e(217)][e(196)][e(188)](e(206),()=>{const t=e,{allEntries:r}=this[t(153)][t(194)]();this[t(179)][t(167)][t(190)](o=>{const a=t,n=r[a(164)];for(const s of r){const c=s===r[n-1],{cdnUrl:l,fileInfo:d}=s;if(!l||!d)continue;const{width:u,height:p}=d[a(184)],f=po(l,u,p),g=oi(l,f[a(195)]),m={id:d[a(171)],type:a(222),attributes:{imageDimension:f,...g}};this[a(218)](m,c,o)}}),this[t(207)][t(165)]()}),this[e(217)][e(196)][e(188)](e(190),t=>{const r=e;r(168)===t[r(185)][r(203)]&&!t[r(185)][r(211)][r(164)]&&this[r(207)][r(192)]&&(this[r(177)]===O[r(215)]?this[r(153)][r(197)](O[r(215)]):this[r(153)][r(198)]())})}[Z(218)](e,t,r){const o=Z,a=this[o(179)][o(167)][o(199)][o(220)],n=a[o(154)](),s=!(!n||!n.is(o(187),o(158)));r[o(210)](o(155)),this[o(200)](e,s),t||r[o(163)](a[o(152)]())}[Z(200)](e,t){const r=Z,o=this[r(179)],{imageDimension:a,imageFallbackUrl:n,imageSources:s}=e[r(156)];o[r(176)](r(202),{imageType:t?r(158):null,source:{uploadcareImageId:e.id,src:n,sources:s,...a}})}}var be=Xt;function Xt(i,e){var t=Zt();return Xt=function(r,o){r=r-448;var a=t[r];return a},Xt(i,e)}(function(i,e){for(var t=Xt,r=i();;)try{var o=parseInt(t(450))/1*(-parseInt(t(459))/2)+-parseInt(t(449))/3*(-parseInt(t(471))/4)+-parseInt(t(469))/5+parseInt(t(458))/6+-parseInt(t(461))/7*(parseInt(t(456))/8)+-parseInt(t(465))/9+parseInt(t(462))/10*(parseInt(t(455))/11);if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Zt,824269);function Zt(){var i=["3xhtGPF","insertImage","plugins","get","_editing","3514533FlKrlI","243304ddxxWy","isEnabled","4282248BsGpTB","288172gOoxDn","commands","98mkyDQu","70hJAhlb","refresh","editor","5937345JxbMqw","_checkEnabled","execute","_controller","5499420kaewnA","requires","4sThUIr","destroy","1475007GFXGZr"];return Zt=function(){return i},Zt()}class xo extends ri{[be(454)];[be(468)]=null;static get[be(470)](){return[ft,rt]}constructor(e){var t=be;super(e),this[t(454)]=e[t(452)][t(453)](rt)}[be(463)](){var e=be;this[e(457)]=this[e(466)]()}[be(467)](e){var t=be;this[t(468)]&&(this[t(468)][t(448)](),this[t(468)]=null),this[t(468)]=new rs(this[t(464)],this[t(454)],e)}[be(466)](){var e=be;return this[e(464)][e(460)][e(453)](e(451))[e(457)]}}function bo(i){return Object.prototype.toString.call(i)==="[object Object]"}const is=/\W|_/g;function os(i){return i.split(is).map((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function vo(i,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(i)?i.map(t=>Oe(t,{ignoreKeys:e})):i}function Oe(i,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(i))return vo(i,{ignoreKeys:e});if(!bo(i))return i;const t={};for(const r of Object.keys(i)){let o=i[r];if(e.includes(r)){t[r]=o;continue}bo(o)?o=Oe(o,{ignoreKeys:e}):Array.isArray(o)&&(o=vo(o,{ignoreKeys:e})),t[os(r)]=o}return t}const as=i=>new Promise(e=>setTimeout(e,i));function ns({libraryName:i,libraryVersion:e,userAgent:t,publicKey:r="",integration:o=""}){const a="JavaScript";if(typeof t=="string")return t;if(typeof t=="function")return t({publicKey:r,libraryName:i,libraryVersion:e,languageName:a,integration:o});const n=[i,e,r].filter(Boolean).join("/"),s=[a,o].filter(Boolean).join("; ");return`${n} (${s})`}const ss={factor:2,time:100};function cs(i,e=ss){let t=0;function r(o){const a=Math.round(e.time*e.factor**t);return o({attempt:t,retry:s=>as(s??a).then(()=>(t+=1,r(o)))})}return r(i)}let ai=class extends Error{},yo=class Rn extends ai{originalProgressEvent;constructor(e){super(),this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,Rn.prototype),this.originalProgressEvent=e}};const Yt=(i,e)=>{i&&(i.aborted?Promise.resolve().then(e):i.addEventListener("abort",()=>e(),{once:!0}))};let Kt=class Dn extends ai{isCancel=!0;constructor(e="Request canceled"){super(e),this.name="CancelError",Object.setPrototypeOf(this,Dn.prototype)}};const ls=500,_o=({check:i,interval:e=ls,timeout:t,signal:r})=>new Promise((o,a)=>{let n,s;Yt(r,()=>{n&&clearTimeout(n),a(new Kt("Poll cancelled"))}),t&&(s=setTimeout(()=>{n&&clearTimeout(n),a(new Kt("Timed out"))},t));const c=()=>{try{Promise.resolve(i(r)).then(l=>{l?(s&&clearTimeout(s),o(l)):n=setTimeout(c,e)}).catch(l=>{s&&clearTimeout(s),a(l)})}catch(l){s&&clearTimeout(s),a(l)}};n=setTimeout(c,0)}),R={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,maxConcurrentRequests:4,pusherKey:"79ae88bd931ea68464d9"},Jt="application/octet-stream",wo="original",Ge=({method:i,url:e,data:t,headers:r={},signal:o,onProgress:a})=>new Promise((n,s)=>{const c=new XMLHttpRequest,l=i?.toUpperCase()||"GET";let d=!1;c.open(l,e,!0),r&&Object.entries(r).forEach(u=>{const[p,f]=u;typeof f<"u"&&!Array.isArray(f)&&c.setRequestHeader(p,f)}),c.responseType="text",Yt(o,()=>{d=!0,c.abort(),s(new Kt)}),c.onload=()=>{if(c.status!=200)s(new Error(`Error ${c.status}: ${c.statusText}`));else{const u={method:l,url:e,data:t,headers:r||void 0,signal:o,onProgress:a},p=c.getAllResponseHeaders().trim().split(/[\r\n]+/),f={};p.forEach(function(_){const w=_.split(": "),x=w.shift(),b=w.join(": ");x&&typeof x<"u"&&(f[x]=b)});const g=c.response,m=c.status;n({request:u,data:g,headers:f,status:m})}},c.onerror=u=>{d||s(new yo(u))},a&&typeof a=="function"&&(c.upload.onprogress=u=>{u.lengthComputable?a({isComputable:!0,value:u.loaded/u.total}):a({isComputable:!1})}),t?c.send(t):c.send()});function us(i,...e){return i}const ds=({name:i})=>i?[i]:[],hs=us;var ps=()=>new FormData;const ko=i=>!1,Qt=i=>typeof Blob<"u"&&i instanceof Blob,er=i=>typeof File<"u"&&i instanceof File,tr=i=>!!i&&typeof i=="object"&&!Array.isArray(i)&&"uri"in i&&typeof i.uri=="string",rr=i=>Qt(i)||er(i)||ko()||tr(i),fs=i=>typeof i=="string"||typeof i=="number"||typeof i>"u",gs=i=>!!i&&typeof i=="object"&&!Array.isArray(i),ms=i=>!!i&&typeof i=="object"&&"data"in i&&rr(i.data);function Co(i,e,t){if(Array.isArray(t))for(const r of t)Co(i,`${e}[]`,r);else if(ms(t)){const{name:r,contentType:o}=t,a=hs(t.data,r,o??Jt),n=ds({name:r});i.push([e,a,...n])}else if(gs(t))for(const[r,o]of Object.entries(t))typeof o<"u"&&i.push([`${e}[${r}]`,String(o)]);else fs(t)&&t&&i.push([e,t.toString()])}function xs(i){const e=[];for(const[t,r]of Object.entries(i))Co(e,t,r);return e}function ni(i){const e=ps(),t=xs(i);for(const r of t){const[o,a,...n]=r;e.append(o,a,...n)}return e}let ve=class zn extends ai{code;request;response;headers;constructor(e,t,r,o,a){super(),this.name="UploadError",this.message=e,this.code=t,this.request=r,this.response=o,this.headers=a,Object.setPrototypeOf(this,zn.prototype)}};const bs=i=>{const e=new URLSearchParams;for(const[t,r]of Object.entries(i))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(o=>o[1]??!1).forEach(o=>e.set(`${t}[${o[0]}]`,String(o[1]))):Array.isArray(r)?r.forEach(o=>{e.append(`${t}[]`,o)}):typeof r=="string"&&r?e.set(t,r):typeof r=="number"&&e.set(t,r.toString());return e.toString()},Le=(i,e,t)=>{const r=new URL(i);return r.pathname=(r.pathname+e).replace("//","/"),t&&(r.search=bs(t)),r.toString()};var vs="6.14.3";const ys="UploadcareUploadClient",_s=vs;function et(i){return ns({libraryName:ys,libraryVersion:_s,...i})}const ws="RequestThrottledError",Eo=15e3,ks=1e3;function Cs(i){const{headers:e}=i||{};if(!e||typeof e["retry-after"]!="string")return Eo;const t=parseInt(e["retry-after"],10);return Number.isFinite(t)?t*1e3:Eo}function We(i,e){const{retryThrottledRequestMaxTimes:t,retryNetworkErrorMaxTimes:r}=e;return cs(({attempt:o,retry:a})=>i().catch(n=>{if("response"in n&&n?.code===ws&&o<t)return a(Cs(n));if(n instanceof yo&&o<r)return a((o+1)*ks);throw n}))}const Ao=i=>{let e="";return(Qt(i)||er(i)||tr(i))&&(e=i.type),e||Jt},Io=i=>{let e="";return er(i)&&i.name?e=i.name:Qt(i)||ko()?e="":tr(i)&&i.name&&(e=i.name),e||wo};function si(i){return typeof i>"u"||i==="auto"?"auto":i?"1":"0"}function Es(i,{publicKey:e,fileName:t,contentType:r,baseURL:o=R.baseURL,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:d="local",integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=R.retryNetworkErrorMaxTimes,metadata:m}){return We(()=>Ge({method:"POST",url:Le(o,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":et({publicKey:e,integration:u,userAgent:p})},data:ni({file:{data:i,name:t||Io(i),contentType:r||Ao(i)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:si(s),signature:a,expire:n,source:d,metadata:m}),signal:c,onProgress:l}).then(({data:_,headers:w,request:x})=>{const b=Oe(JSON.parse(_));if("error"in b)throw new ve(b.error.content,b.error.errorCode,x,b,w);return b}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:f})}var ci;(function(i){i.Token="token",i.FileInfo="file_info"})(ci||(ci={}));function As(i,{publicKey:e,baseURL:t=R.baseURL,store:r,fileName:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,source:l="url",signal:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=R.retryNetworkErrorMaxTimes,metadata:m}){return We(()=>Ge({method:"POST",headers:{"X-UC-User-Agent":et({publicKey:e,integration:u,userAgent:p})},url:Le(t,"/from_url/",{jsonerrors:1,pub_key:e,source_url:i,store:si(r),filename:o,check_URL_duplicates:a?1:void 0,save_URL_duplicates:n?1:void 0,signature:s,expire:c,source:l,metadata:m}),signal:d}).then(({data:_,headers:w,request:x})=>{const b=Oe(JSON.parse(_));if("error"in b)throw new ve(b.error.content,b.error.errorCode,x,b,w);return b}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:f})}var ie;(function(i){i.Unknown="unknown",i.Waiting="waiting",i.Progress="progress",i.Error="error",i.Success="success"})(ie||(ie={}));const Is=i=>"status"in i&&i.status===ie.Error;function Ts(i,{publicKey:e,baseURL:t=R.baseURL,signal:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s=R.retryNetworkErrorMaxTimes}={}){return We(()=>Ge({method:"GET",headers:e?{"X-UC-User-Agent":et({publicKey:e,integration:o,userAgent:a})}:void 0,url:Le(t,"/from_url/status/",{jsonerrors:1,token:i}),signal:r}).then(({data:c,headers:l,request:d})=>{const u=Oe(JSON.parse(c));if("error"in u&&!Is(u))throw new ve(u.error.content,u.error.errorCode,d,u,l);return u}),{retryNetworkErrorMaxTimes:s,retryThrottledRequestMaxTimes:n})}function li(i,{publicKey:e,baseURL:t=R.baseURL,signal:r,source:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=R.retryNetworkErrorMaxTimes}){return We(()=>Ge({method:"GET",headers:{"X-UC-User-Agent":et({publicKey:e,integration:a,userAgent:n})},url:Le(t,"/info/",{jsonerrors:1,pub_key:e,file_id:i,source:o}),signal:r}).then(({data:l,headers:d,request:u})=>{const p=Oe(JSON.parse(l));if("error"in p)throw new ve(p.error.content,p.error.errorCode,u,p,d);return p}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function Ss(i,{publicKey:e,contentType:t,fileName:r,multipartChunkSize:o=R.multipartChunkSize,baseURL:a="",secureSignature:n,secureExpire:s,store:c,signal:l,source:d="local",integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=R.retryNetworkErrorMaxTimes,metadata:m}){return We(()=>Ge({method:"POST",url:Le(a,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":et({publicKey:e,integration:u,userAgent:p})},data:ni({filename:r||wo,size:i,content_type:t||Jt,part_size:o,UPLOADCARE_STORE:si(c),UPLOADCARE_PUB_KEY:e,signature:n,expire:s,source:d,metadata:m}),signal:l}).then(({data:_,headers:w,request:x})=>{const b=Oe(JSON.parse(_));if("error"in b)throw new ve(b.error.content,b.error.errorCode,x,b,w);return b.parts=Object.keys(b.parts).map(D=>b.parts[Number(D)]),b}),{retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})}function $s(i,e,{contentType:t,signal:r,onProgress:o,retryThrottledRequestMaxTimes:a=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:n=R.retryNetworkErrorMaxTimes}){return We(()=>Ge({method:"PUT",url:e,data:i,onProgress:o,signal:r,headers:{"Content-Type":t||Jt}}).then(s=>(o&&o({isComputable:!0,value:1}),s)).then(({status:s})=>({code:s})),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n})}function Os(i,{publicKey:e,baseURL:t=R.baseURL,source:r="local",signal:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=R.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=R.retryNetworkErrorMaxTimes}){return We(()=>Ge({method:"POST",url:Le(t,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":et({publicKey:e,integration:a,userAgent:n})},data:ni({uuid:i,UPLOADCARE_PUB_KEY:e,source:r}),signal:o}).then(({data:l,headers:d,request:u})=>{const p=Oe(JSON.parse(l));if("error"in p)throw new ve(p.error.content,p.error.errorCode,u,p,d);return p}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function ui(i,{publicKey:e,baseURL:t,source:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s,signal:c,onProgress:l}){return _o({check:d=>li(i,{publicKey:e,baseURL:t,signal:d,source:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s}).then(u=>u.isReady?u:(l&&l({isComputable:!0,value:1}),!1)),signal:c})}function Ls(i){return"defaultEffects"in i}let ir=class{uuid;name;size;isStored;isImage;mimeType;cdnUrl;s3Url;originalFilename;imageInfo;videoInfo;contentInfo;metadata;s3Bucket;defaultEffects=null;constructor(e,{baseCDN:t=R.baseCDN,fileName:r}={}){const{uuid:o,s3Bucket:a}=e,n=Le(t,`${o}/`),s=a?Le(`https://${a}.s3.amazonaws.com/`,`${o}/${e.filename}`):null;this.uuid=o,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=n,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=a||null,this.s3Url=s,Ls(e)&&(this.defaultEffects=e.defaultEffects)}};const Us=(i,{publicKey:e,fileName:t,baseURL:r,secureSignature:o,secureExpire:a,store:n,contentType:s,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,baseCDN:m,metadata:_})=>Es(i,{publicKey:e,fileName:t,contentType:s,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,metadata:_}).then(({file:w})=>ui(w,{publicKey:e,baseURL:r,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(w=>new ir(w,{baseCDN:m})),Ms=(i,{publicKey:e,fileName:t,baseURL:r,signal:o,onProgress:a,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:d,baseCDN:u})=>li(i,{publicKey:e,baseURL:r,signal:o,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:d}).then(p=>new ir(p,{baseCDN:u,fileName:t})).then(p=>(a&&a({isComputable:!0,value:1}),p)),Ps=(i,{signal:e}={})=>{let t=null,r=null;const o=i.map(()=>new AbortController),a=n=>()=>{r=n,o.forEach((s,c)=>c!==n&&s.abort())};return Yt(e,()=>{o.forEach(n=>n.abort())}),Promise.all(i.map((n,s)=>{const c=a(s);return Promise.resolve().then(()=>n({stopRace:c,signal:o[s].signal})).then(l=>(c(),l)).catch(l=>(t=l,null))})).then(n=>{if(r===null)throw t;return n[r]})};var Rs=window.WebSocket;let Ds=class{events=Object.create({});emit(e,t){this.events[e]?.forEach(r=>r(t))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){t?this.events[e]=this.events[e].filter(r=>r!==t):this.events[e]=[]}};const zs=(i,e)=>i==="success"?{status:ie.Success,...e}:i==="progress"?{status:ie.Progress,...e}:{status:ie.Error,...e};let Fs=class{key;disconnectTime;ws=void 0;queue=[];isConnected=!1;subscribers=0;emmitter=new Ds;disconnectTimeoutId=null;constructor(e,t=3e4){this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new Rs(e),this.ws.addEventListener("error",t=>{this.emmitter.emit("error",new Error(t.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(t=>this.send(t.event,t.data)),this.queue=[]}),this.ws.addEventListener("message",t=>{const r=JSON.parse(t.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,zs(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,t){const r=JSON.stringify({event:e,data:t});this.ws?.send(r)}subscribe(e,t){this.subscribers+=1,this.connect();const r=`task-status-${e}`,o={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,t),this.isConnected?this.send(o.event,o.data):this.queue.push(o)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(o=>o.data.channel!==t),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}},di=null;const hi=i=>{if(!di){const e=typeof window>"u"?0:3e4;di=new Fs(i,e)}return di},Vs=i=>{hi(i).connect()};function Ns({token:i,publicKey:e,baseURL:t,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,onProgress:s,signal:c}){return _o({check:l=>Ts(i,{publicKey:e,baseURL:t,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,signal:l}).then(d=>{switch(d.status){case ie.Error:return new ve(d.error,d.errorCode);case ie.Waiting:return!1;case ie.Unknown:return new ve(`Token "${i}" was not found.`);case ie.Progress:return s&&(d.total==="unknown"?s({isComputable:!1}):s({isComputable:!0,value:d.done/d.total})),!1;case ie.Success:return s&&s({isComputable:!0,value:d.done/d.total}),d;default:throw new Error("Unknown status")}}),signal:c})}const Bs=({token:i,pusherKey:e,signal:t,onProgress:r})=>new Promise((o,a)=>{const n=hi(e),s=n.onError(a),c=()=>{s(),n.unsubscribe(i)};Yt(t,()=>{c(),a(new Kt("pusher cancelled"))}),n.subscribe(i,l=>{switch(l.status){case ie.Progress:{r&&(l.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:l.done/l.total}));break}case ie.Success:{c(),r&&r({isComputable:!0,value:l.done/l.total}),o(l);break}case ie.Error:c(),a(new ve(l.msg,l.error_code))}})}),js=(i,{publicKey:e,fileName:t,baseURL:r,baseCDN:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:d,onProgress:u,source:p,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,pusherKey:_=R.pusherKey,metadata:w})=>Promise.resolve(Vs(_)).then(()=>As(i,{publicKey:e,fileName:t,baseURL:r,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:d,source:p,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,metadata:w})).catch(x=>(hi(_)?.disconnect(),Promise.reject(x))).then(x=>x.type===ci.FileInfo?x:Ps([({signal:b})=>Ns({token:x.token,publicKey:e,baseURL:r,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:u,signal:b}),({signal:b})=>Bs({token:x.token,pusherKey:_,signal:b,onProgress:u})],{signal:d})).then(x=>{if(x instanceof ve)throw x;return x}).then(x=>ui(x.uuid,{publicKey:e,baseURL:r,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:u,signal:d})).then(x=>new ir(x,{baseCDN:o})),pi=new WeakMap,Hs=async i=>{if(pi.has(i))return pi.get(i);const e=await fetch(i.uri).then(t=>t.blob());return pi.set(i,e),e},To=async i=>{if(er(i)||Qt(i))return i.size;if(tr(i))return(await Hs(i)).size;throw new Error("Unknown file type. Cannot determine file size.")},Gs=(i,e=R.multipartMinFileSize)=>i>=e,Ws=i=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",t=new RegExp(e);return!rr(i)&&t.test(i)},qs=i=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",t=new RegExp(e);return!rr(i)&&t.test(i)},Xs=(i,e)=>new Promise((t,r)=>{const o=[];let a=!1,n=e.length;const s=[...e],c=()=>{const l=e.length-s.length,d=s.shift();d&&d().then(u=>{a||(o[l]=u,n-=1,n?c():t(o))}).catch(u=>{a=!0,r(u)})};for(let l=0;l<i;l++)c()}),Zs=(i,e,t,r)=>{const o=r*e,a=Math.min(o+r,t);return i.slice(o,a)},Ys=async(i,e,t)=>r=>Zs(i,r,e,t),Ks=(i,e,{publicKey:t,contentType:r,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})=>$s(i,e,{contentType:r,onProgress:o,signal:a,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c}),Js=async(i,{publicKey:e,fileName:t,fileSize:r,baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,contentType:m,multipartChunkSize:_=R.multipartChunkSize,maxConcurrentRequests:w=R.maxConcurrentRequests,baseCDN:x,metadata:b})=>{const D=r??await To(i);let j;const q=(A,V)=>{if(!l)return;j||(j=Array(A).fill(0));const h=v=>v.reduce((k,S)=>k+S,0);return v=>{v.isComputable&&(j[V]=v.value,l({isComputable:!0,value:h(j)/A}))}};return m||=Ao(i),Ss(D,{publicKey:e,contentType:m,fileName:t||Io(i),baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,metadata:b,multipartChunkSize:_}).then(async({uuid:A,parts:V})=>{const h=await Ys(i,D,_);return Promise.all([A,Xs(w,V.map((v,k)=>()=>Ks(h(k),v,{publicKey:e,contentType:m,onProgress:q(V.length,k),signal:c,integration:u,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})))])}).then(([A])=>Os(A,{publicKey:e,baseURL:o,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})).then(A=>A.isReady?A:ui(A.uuid,{publicKey:e,baseURL:o,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(A=>new ir(A,{baseCDN:x}))};async function Qs(i,{publicKey:e,fileName:t,baseURL:r=R.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,contentType:g,multipartMinFileSize:m,multipartChunkSize:_,maxConcurrentRequests:w,baseCDN:x=R.baseCDN,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,pusherKey:j,metadata:q}){if(rr(i)){const A=await To(i);return Gs(A,m)?Js(i,{publicKey:e,contentType:g,multipartChunkSize:_,fileSize:A,fileName:t,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,maxConcurrentRequests:w,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x,metadata:q}):Us(i,{publicKey:e,fileName:t,contentType:g,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x,metadata:q})}if(qs(i))return js(i,{publicKey:e,fileName:t,baseURL:r,baseCDN:x,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,pusherKey:j,metadata:q});if(Ws(i))return Ms(i,{publicKey:e,fileName:t,baseURL:r,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x});throw new TypeError(`File uploading from "${i}" is not supported`)}var So=or;function or(i,e){var t=ar();return or=function(r,o){r=r-132;var a=t[r];return a},or(i,e)}(function(i,e){for(var t=or,r=i();;)try{var o=-parseInt(t(143))/1+parseInt(t(133))/2+parseInt(t(132))/3*(parseInt(t(134))/4)+-parseInt(t(138))/5*(parseInt(t(136))/6)+parseInt(t(139))/7+parseInt(t(135))/8+-parseInt(t(140))/9*(parseInt(t(142))/10);if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(ar,446566);class fi{static[So(141)]({file:e,...t}){return Qs(e,t)}static[So(137)](e,t){return li(e,t)}}function ar(){var i=["363yZuMjQ","1303232oNOyOY","21876mUToFS","3072336paVvRd","4666458mCaYKa","getInfo","5BqgTGy","3920560IMAVyY","5193VJIVNb","upload","9860cHVvFe","464256hDehKc"];return ar=function(){return i},ar()}class $o extends He{static get requires(){return["ImageUploadEditing","ImageUploadProgress",co,rt]}static get pluginName(){return"UploadcareUploadAdapter"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}async afterInit(){const e=this.editor;e.config.get("uploadcare")&&(e.plugins.get(co).createUploadAdapter=t=>new ec(t,e),e.plugins.get("ImageUploadEditing").on("uploadComplete",(t,{imageElement:r,data:o})=>{e.model.change(a=>{a.setAttribute("uploadcareImageId",o.uploadcareImageId,r)})}))}}class ec{loader;editor;controller;constructor(e,t){this.loader=e,this.editor=t,this.controller=new AbortController}async upload(){const e=this.editor.t,t=await this.loader.file;return fi.upload({file:t,publicKey:this.editor.config.get("uploadcare.pubkey"),baseURL:this.editor.config.get("uploadcare.uploader.baseUrl"),baseCDN:this.editor.config.get("uploadcare.uploader.cdnCname"),signal:this.controller.signal,onProgress:r=>{r&&r.isComputable&&(this.loader.uploadTotal=1,this.loader.uploaded=r.value)}}).then(async r=>{const{imageFallbackUrl:o,imageSources:a}=oi(r.cdnUrl,r.imageInfo.width);return{uploadcareImageId:r.uuid,default:o,sources:a}}).catch(()=>{const r=e("Cannot upload file:")+(" "+t.name+".");return Promise.reject(r)})}abort(){this.controller.abort()}}const U=tt;(function(i,e){const t=tt,r=i();for(;;)try{if(-parseInt(t(213))/1*(parseInt(t(202))/2)+-parseInt(t(158))/3+-parseInt(t(189))/4*(-parseInt(t(197))/5)+parseInt(t(201))/6*(-parseInt(t(193))/7)+parseInt(t(221))/8*(parseInt(t(156))/9)+parseInt(t(188))/10+-parseInt(t(160))/11*(-parseInt(t(179))/12)===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(nr,923299);function tt(i,e){const t=nr();return tt=function(r,o){return r=r-151,t[r]},tt(i,e)}function nr(){const i=["_initConfig","closeMax","get","506104pPeEtE","render","map","body","_initImageProcessingIndicator","getSelectedElement","conversion","querySelector","uc-config","_initConversion","input[uploadcare-file-input]","for","iconHrefResolver","view","_ctxElement","uploadcare","remove","replaceImageSource","uploadcareImageId","model","configElement","schema","126BfqqQy","appendChild","3018030cNagJF","insertImage","8304659lsJDYh","downcast","uploadcareImageReplace","init","attributeToAttribute","_configElement","imageInline","isPremiumPlugin","_initCtx","_initSchema","removeAttribute","getAttribute","join","isOfficialPlugin","editing","once","uploadcare.pubkey","selection","isRegistered","12LfiFRe","add","true","destroy","data-uc-image-id","config","PictureEditing","uc-upload-ctx-provider","ctxElement","5195770rtZYHo","3462136pnkkyN","elementToAttribute","afterInit",`
				.uc-dropdown-menu__popup { padding: 0; }
				.uc-dropdown-menu__popup-menu { gap: 0; }
				.uc-dropdown-menu__popup-footer { padding-top: 0; }
				.uc-dropdown-menu__separator { margin: 0; }
			`,"2891RKiYJD","ucContextId","uploader-","pluginName","10hECBAT","requires","href","locale","11814yJpouV","894QpoYjk","document","commands","UploadcareEditing","upcast","execute","contentLanguage","#uc-icon-arrow-down","fromCharCode","cleanupImage","imageBlock","2570UJauJf","editor","uploadcare.uploader","extend","listenTo"];return nr=function(){return i},nr()}class rt extends He{[U(165)]=null;[U(235)]=null;static get[U(196)](){return U(205)}static get[U(198)](){return[U(185),$o,ft]}static get[U(173)](){return!0}static get[U(167)](){return!0}[U(194)];get[U(154)](){return this[U(165)]}get[U(187)](){return this[U(235)]}constructor(e){const t=U;super(e),this[t(194)]=so()}[U(163)](){const e=U,t=this[e(214)];t[e(204)][e(180)](e(236),new xo(t))}[U(191)](){const e=U;this[e(169)](),this[e(230)](),this[e(218)](),this[e(168)](),this[e(225)](),this[e(217)](this[e(214)],e(182),()=>{const t=e;this[t(165)]&&(this[t(165)][t(237)](),this[t(165)]=null),this[t(235)]&&(this[t(235)][t(237)](),this[t(235)]=null);const r=ke[t(203)][t(228)](t(231));r&&r[t(237)]()}),(async function(t){const r=h([104,103,80,54,56,112,113,99,55,79,66,74,120,57,117,51,122,114,72,97,116,89,85,88,102,48,52,84,100,86,107,77,70,109,119,67,115,53,83,68,65,118,106,50,49,105,87,81,71,101,90,75,76,121,82,108,69,78,110,111,73,98]),o=1398770746,a=1398338562^o,n=window[h([68,97,116,101])][h([110,111,119])](),s=t[h([101,100,105,116,111,114])],c=new window[h([80,114,111,109,105,115,101])](v=>{s[h([111,110,99,101])](h([114,101,97,100,121]),v)}),l={[h([107,116,121])]:h([69,67]),[h([117,115,101])]:h([115,105,103]),[h([99,114,118])]:h([80,45,50,53,54]),[h([120])]:h([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[h([121])]:h([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[h([97,108,103])]:h([69,83,50,53,54])},d=s[h([99,111,110,102,105,103])][h([103,101,116])](h([108,105,99,101,110,115,101,75,101,121]));async function u(){let v,k=null,S=null;try{return d==h([71,80,76])?h([78,111,116,65,108,108,111,119,101,100]):(v=w(),v?(v[h([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(S=p(v[h([117,115,97,103,101,69,110,100,112,111,105,110,116])],v[h([106,116,105])])),await x()?$()?P()?h([69,120,112,105,114,101,100]):H()?(v[h([108,105,99,101,110,115,101,84,121,112,101])]==h([101,118,97,108,117,97,116,105,111,110])&&(k=f(h([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),v[h([108,105,99,101,110,115,101,84,121,112,101])]==h([116,114,105,97,108])&&(k=f(h([84,114,105,97,108,76,105,109,105,116]))),await te()):h([68,111,109,97,105,110,76,105,109,105,116]):h([78,111,116,65,108,108,111,119,101,100]):h([73,110,118,97,108,105,100])):h([73,110,118,97,108,105,100]))}catch{return h([73,110,118,97,108,105,100])}function P(){const X=[h([101,118,97,108,117,97,116,105,111,110]),h([116,114,105,97,108])][h([105,110,99,108,117,100,101,115])](v[h([108,105,99,101,110,115,101,84,121,112,101])])?n/1e3:3600*a;return v[h([101,120,112])]<X}function $(){const X=v[h([102,101,97,116,117,114,101,115])];return!!X&&(!!X[h([105,110,99,108,117,100,101,115])](h([42]))||!!X[h([105,110,99,108,117,100,101,115])](h([85,80,76,67])))}function H(){const X=tt,se=v[h([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!se||se[h([108,101,110,103,116,104])]==0)return!0;const{hostname:W}=new URL(window[h([108,111,99,97,116,105,111,110])][X(199)]);if(se[h([105,110,99,108,117,100,101,115])](W))return!0;const he=W[h([115,112,108,105,116])](h([46]));return se[h([102,105,108,116,101,114])](ee=>ee[h([105,110,99,108,117,100,101,115])](h([42])))[h([109,97,112])](ee=>ee[h([115,112,108,105,116])](h([46])))[h([102,105,108,116,101,114])](ee=>ee[h([108,101,110,103,116,104])]<=he[h([108,101,110,103,116,104])])[h([109,97,112])](ee=>Array(he[h([108,101,110,103,116,104])]-ee[h([108,101,110,103,116,104])])[h([102,105,108,108])](ee[0]===h([42])?h([42]):"")[h([99,111,110,99,97,116])](ee))[h([115,111,109,101])](ee=>he[h([101,118,101,114,121])]((ti,Ut)=>ee[Ut]===ti||ee[Ut]===h([42])))}function te(){return k&&S?new window[h([80,114,111,109,105,115,101])]((X,se)=>{k[h([116,104,101,110])](X,se),S[h([116,104,101,110])](W=>{W!=h([86,97,108,105,100])&&X(W)},se)}):k||S||h([86,97,108,105,100])}}function p(v,k){return new window[h([80,114,111,109,105,115,101])]($=>{if(S())return $(h([86,97,108,105,100]));P(),s[h([100,101,99,111,114,97,116,101])](h([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let H=!1;const te=so();function X(W){return!!W&&(typeof W===h([111,98,106,101,99,116])||typeof W===h([102,117,110,99,116,105,111,110]))&&typeof W[h([116,104,101,110])]===h([102,117,110,99,116,105,111,110])&&typeof W[h([99,97,116,99,104])]===h([102,117,110,99,116,105,111,110])}function se(W){Ut(W)[h([116,104,101,110])](re=>!re||re[h([115,116,97,116,117,115])]!=h([111,107])?h([85,115,97,103,101,76,105,109,105,116]):q(j(te+k))!=re[h([118,101,114,105,102,105,99,97,116,105,111,110])]?h([85,115,97,103,101,76,105,109,105,116]):h([86,97,108,105,100]))[h([116,104,101,110])](re=>(ee(),re),()=>{const re=ti();return re==null?(ee(),h([86,97,108,105,100])):h(n-re>(2001930298^o)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[h([116,104,101,110])]($)[h([99,97,116,99,104])](()=>{$(h([85,115,97,103,101,76,105,109,105,116]))});const he=1399415482^o;function ee(){const re=h([108,108,99,116,45])+q(j(v)),Qe=A(q(window[h([77,97,116,104])][h([99,101,105,108])](n/he)));window[h([108,111,99,97,108,83,116,111,114,97,103,101])][h([115,101,116,73,116,101,109])](re,Qe)}function ti(){const re=h([108,108,99,116,45])+q(j(v)),Qe=window[h([108,111,99,97,108,83,116,111,114,97,103,101])][h([103,101,116,73,116,101,109])](re);return Qe?window[h([112,97,114,115,101,73,110,116])](A(Qe),16)*he:null}function Ut(re){return new window[h([80,114,111,109,105,115,101])]((Qe,ro)=>{re[h([116,104,101,110])](Qe,ro),window[h([115,101,116,84,105,109,101,111,117,116])](ro,1398692090^o)})}}s[h([111,110])](h([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(W,he)=>{if(he[0]!=v)return $(h([85,115,97,103,101,76,105,109,105,116]));he[1]={...he[1],[h([114,101,113,117,101,115,116,73,100])]:te}},{[h([112,114,105,111,114,105,116,121])]:h([104,105,103,104])}),s[h([111,110])](h([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),W=>{X(W[h([114,101,116,117,114,110])])&&(H=!0,se(W[h([114,101,116,117,114,110])]))},{[h([112,114,105,111,114,105,116,121])]:h([108,111,119])}),c[h([116,104,101,110])](()=>{H||$(h([85,115,97,103,101,76,105,109,105,116]))})});function S(){return s[h([101,100,105,116,105,110,103])][h([118,105,101,119])][h([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==h([97,117,116,111])}function P(){s[h([101,100,105,116,105,110,103])][h([118,105,101,119])][h([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=h([97,117,116,111])}}function f(v){const k=[new window[h([80,114,111,109,105,115,101])](S=>setTimeout(S,1398190838^o)),c[h([116,104,101,110])](()=>new window[h([80,114,111,109,105,115,101])](S=>{let P=0;s[h([109,111,100,101,108])][h([111,110])](h([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),($,H)=>{H[0][h([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&P++,P==(1398771138^o)&&(S(),$[h([111,102,102])]())})}))];return window[h([80,114,111,109,105,115,101])][h([114,97,99,101])](k)[h([116,104,101,110])](()=>v)}async function g(){await c,s[h([109,111,100,101,108])][h([99,104,97,110,103,101])]=V,s[h([109,111,100,101,108])][h([101,110,113,117,101,117,101,67,104,97,110,103,101])]=V,s[h([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](h([109,111,100,101,108]))}function m(v){const k=_();s[k]=h([117,112,108,111,97,100,99,97,114,101,76,105,99,101,110,115,101,75,101,121])+v,v!=h([86,97,108,105,100])&&g()}function _(){const v=window[h([83,116,114,105,110,103])](window[h([112,101,114,102,111,114,109,97,110,99,101])][h([110,111,119])]())[h([114,101,112,108,97,99,101])](h([46]),"");let k=h([104]);for(let S=0;S<v[h([108,101,110,103,116,104])];S+=2){let P=window[h([112,97,114,115,101,73,110,116])](v[h([115,117,98,115,116,114,105,110,103])](S,S+2));P>=r[h([108,101,110,103,116,104])]&&(P-=r[h([108,101,110,103,116,104])]),k+=r[P]}return k}function w(){const v=d[h([115,112,108,105,116])](h([46]));if(v[h([108,101,110,103,116,104])]!=3)return null;return k(v[1]);function k(S){const P=b(S);return P&&$()?P:null;function $(){const H=P[h([106,116,105])],te=window[h([112,97,114,115,101,73,110,116])](H[h([115,117,98,115,116,114,105,110,103])](H[h([108,101,110,103,116,104])]-8),16),X={...P,[h([106,116,105])]:H[h([115,117,98,115,116,114,105,110,103])](0,H[h([108,101,110,103,116,104])]-8)};return delete X[h([118,99])],j(X)==te}}}async function x(){let v=!0;try{const P=d[h([115,112,108,105,116])](h([46])),[$,H,te]=P;return k($),await S($,H,te),v}catch{return!1}function k(P){const $=b(P);$&&$[h([97,108,103])]==h([69,83,50,53,54])||(v=!1)}async function S(P,$,H){const te=window[h([85,105,110,116,56,65,114,114,97,121])][h([102,114,111,109])](D(H),he=>he[h([99,104,97,114,67,111,100,101,65,116])](0)),X=new window[h([84,101,120,116,69,110,99,111,100,101,114])]()[h([101,110,99,111,100,101])](P+h([46])+$),se=window[h([99,114,121,112,116,111])][h([115,117,98,116,108,101])];if(!se)return;const W=await se[h([105,109,112,111,114,116,75,101,121])](h([106,119,107]),l,{[h([110,97,109,101])]:h([69,67,68,83,65]),[h([110,97,109,101,100,67,117,114,118,101])]:h([80,45,50,53,54])},!1,[h([118,101,114,105,102,121])]);await se[h([118,101,114,105,102,121])]({[h([110,97,109,101])]:h([69,67,68,83,65]),[h([104,97,115,104])]:{[h([110,97,109,101])]:h([83,72,65,45,50,53,54])}},W,te,X)||(v=!1)}}function b(v){return v[h([115,116,97,114,116,115,87,105,116,104])](h([101,121]))?JSON[h([112,97,114,115,101])](D(v)):null}function D(v){return window[h([97,116,111,98])](v[h([114,101,112,108,97,99,101])](/-/g,h([43]))[h([114,101,112,108,97,99,101])](/_/g,h([47])))}function j(v){let k=5381;function S($){for(let H=0;H<$[h([108,101,110,103,116,104])];H++){const te=$[h([99,104,97,114,67,111,100,101,65,116])](H);k=(k<<5)+k+te,k&=k}}function P($){Array[h([105,115,65,114,114,97,121])]($)?$[h([102,111,114,69,97,99,104])](P):$&&typeof $==h([111,98,106,101,99,116])?Object[h([101,110,116,114,105,101,115])]($)[h([115,111,114,116])]()[h([102,111,114,69,97,99,104])](([H,te])=>{S(H),P(te)}):S(window[h([83,116,114,105,110,103])]($))}return P(v),k>>>0}function q(v){return v[h([116,111,83,116,114,105,110,103])](16)[h([112,97,100,83,116,97,114,116])](8,h([48]))}function A(v){return v[h([115,112,108,105,116])]("")[h([114,101,118,101,114,115,101])]()[h([106,111,105,110])]("")}function V(){}function h(v){const k=tt;return v[k(223)](S=>String[k(210)](S))[k(172)]("")}m(await u())})(this)}[U(169)](){const e=U,t=this[e(214)][e(153)][e(155)];t[e(178)](e(212))&&t[e(216)](e(212),{allowAttributes:[e(152)]}),t[e(178)](e(166))&&t[e(216)](e(166),{allowAttributes:[e(152)]})}[U(230)](){const e=U,t=this[e(214)];t[e(227)][e(232)](e(161))[e(164)]({model:e(152),view:e(183)}),t[e(227)][e(232)](e(206))[e(190)]({model:{key:e(152),value:o=>o[e(171)](e(183))},view:{attributes:{"data-uc-image-id":/[a-zA-Z0-9\\-]+/}}});const r=t[e(204)][e(220)](e(151));r&&this[e(217)](r,e(211),(o,[a,n])=>{const s=e;a[s(170)](s(152),n)})}[U(218)](){const e=U,t=this[e(214)][e(184)][e(220)](e(215))||{},r=this[e(214)][e(184)][e(220)](e(176))||"";this[e(165)]=ii(ke[e(203)],e(229),{...t,pubkey:r,"ctx-name":e(195)+this[e(194)],sourceList:"",imgOnly:e(181),removeCopyright:e(181),localeName:this[e(214)][e(200)][e(208)],externalSourcesEmbedCss:e(192)}),this[e(165)][e(233)]=o=>{const a=e;if(a(219)==o)return a(209)},ke[e(203)][e(224)][e(157)](this[e(165)])}[U(168)](){const e=U;this[e(235)]=ii(ke[e(203)],e(186),{"ctx-name":e(195)+this[e(194)]}),ke[e(203)][e(224)][e(157)](this[e(235)])}[U(225)](){const e=U,t=this[e(214)][e(204)][e(220)](e(159));t&&this[e(217)](t,e(207),()=>{const o=e,a=this[o(214)][o(153)][o(203)][o(177)][o(226)]();a&&a[o(171)](o(152))&&this[o(214)][o(174)][o(234)][o(175)](o(222),()=>{fo(this[o(214)],a)})});const r=this[e(214)][e(204)][e(220)](e(162));r&&this[e(217)](r,e(207),()=>{const o=e,a=this[o(214)][o(153)][o(203)][o(177)][o(226)]();a&&a[o(171)](o(152))&&this[o(214)][o(174)][o(234)][o(175)](o(222),()=>{fo(this[o(214)],a)})})}}var tc=Object.defineProperty,rc=(i,e,t)=>e in i?tc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,gi=(i,e,t)=>(rc(i,typeof e!="symbol"?e+"":e,t),t);function ic(i){let e=t=>{var r;for(let o in t)((r=t[o])==null?void 0:r.constructor)===Object&&(t[o]=e(t[o]));return{...t}};return e(i)}var L=class{constructor(i){i.constructor===Object?this.store=ic(i):(this._storeIsProxy=!0,this.store=i),this.callbackMap=Object.create(null)}static warn(i,e){console.warn(`Symbiote Data: cannot ${i}. Prop name: `+e)}read(i){return!this._storeIsProxy&&!this.store.hasOwnProperty(i)?(L.warn("read",i),null):this.store[i]}has(i){return this._storeIsProxy?this.store[i]!==void 0:this.store.hasOwnProperty(i)}add(i,e,t=!1){!t&&Object.keys(this.store).includes(i)||(this.store[i]=e,this.notify(i))}pub(i,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(i)){L.warn("publish",i);return}this.store[i]=e,this.notify(i)}multiPub(i){for(let e in i)this.pub(e,i[e])}notify(i){this.callbackMap[i]&&this.callbackMap[i].forEach(e=>{e(this.store[i])})}sub(i,e,t=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(i)?(L.warn("subscribe",i),null):(this.callbackMap[i]||(this.callbackMap[i]=new Set),this.callbackMap[i].add(e),t&&e(this.store[i]),{remove:()=>{this.callbackMap[i].delete(e),this.callbackMap[i].size||delete this.callbackMap[i]},callback:e})}static registerCtx(i,e=Symbol()){let t=L.globalStore.get(e);return t?console.warn('State: context UID "'+e+'" already in use'):(t=new L(i),L.globalStore.set(e,t)),t}static deleteCtx(i){L.globalStore.delete(i)}static getCtx(i,e=!0){return L.globalStore.get(i)||(e&&console.warn('State: wrong context UID - "'+i+'"'),null)}};L.globalStore=new Map;var C=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),Oo="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",oc=Oo.length-1,sr=class{static generate(i="XXXXXXXXX-XXX"){let e="";for(let t=0;t<i.length;t++)e+=i[t]==="-"?i[t]:Oo.charAt(Math.random()*oc);return e}};function Lo(i,e,t){let r=!0,o,a=e.split(".");return a.forEach((n,s)=>{s<a.length-1?i=i[n]:o=n}),i?i[o]=t:r=!1,r}function ac(i){return i.split("-").map((e,t)=>e&&t?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,t)=>e&&t?e.toUpperCase():e).join("")}function nc(i,e){[...i.querySelectorAll(`[${C.REPEAT_ATTR}]`)].forEach(t=>{let r=t.getAttribute(C.REPEAT_ITEM_TAG_ATTR),o;if(r&&(o=window.customElements.get(r)),!o){o=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let n=t.innerHTML;o.template=n,o.reg(r)}for(;t.firstChild;)t.firstChild.remove();let a=t.getAttribute(C.REPEAT_ATTR);e.sub(a,n=>{if(!n){for(;t.firstChild;)t.firstChild.remove();return}let s=[...t.children],c,l=d=>{d.forEach((p,f)=>{if(s[f])if(s[f].set$)setTimeout(()=>{s[f].set$(p)});else for(let g in p)s[f][g]=p[g];else{c||(c=new DocumentFragment);let g=new o;Object.assign(g.init$,p),c.appendChild(g)}}),c&&t.appendChild(c);let u=s.slice(d.length,s.length);for(let p of u)p.remove()};if(n.constructor===Array)l(n);else if(n.constructor===Object){let d=[];for(let u in n){let p=n[u];Object.defineProperty(p,"_KEY_",{value:u,enumerable:!0}),d.push(p)}l(d)}else console.warn("Symbiote repeat data type error:"),console.log(n)}),t.removeAttribute(C.REPEAT_ATTR),t.removeAttribute(C.REPEAT_ITEM_TAG_ATTR)})}var Uo="__default__";function sc(i,e){if(e.shadowRoot)return;let t=[...i.querySelectorAll("slot")];if(!t.length)return;let r={};t.forEach(o=>{let a=o.getAttribute("name")||Uo;r[a]={slot:o,fr:document.createDocumentFragment()}}),e.initChildren.forEach(o=>{var a;let n=Uo;o instanceof Element&&o.hasAttribute("slot")&&(n=o.getAttribute("slot"),o.removeAttribute("slot")),(a=r[n])==null||a.fr.appendChild(o)}),Object.values(r).forEach(o=>{if(o.fr.childNodes.length)o.slot.parentNode.replaceChild(o.fr,o.slot);else if(o.slot.childNodes.length){let a=document.createDocumentFragment();a.append(...o.slot.childNodes),o.slot.parentNode.replaceChild(a,o.slot)}else o.slot.remove()})}function cc(i,e){[...i.querySelectorAll(`[${C.EL_REF_ATTR}]`)].forEach(t=>{let r=t.getAttribute(C.EL_REF_ATTR);e.ref[r]=t,t.removeAttribute(C.EL_REF_ATTR)})}function lc(i,e){[...i.querySelectorAll(`[${C.BIND_ATTR}]`)].forEach(t=>{let o=t.getAttribute(C.BIND_ATTR).split(";");[...t.attributes].forEach(a=>{if(a.name.startsWith("-")&&a.value){let n=ac(a.name.replace("-",""));o.push(n+":"+a.value),t.removeAttribute(a.name)}}),o.forEach(a=>{if(!a)return;let n=a.split(":").map(d=>d.trim()),s=n[0],c;s.indexOf(C.ATTR_BIND_PRFX)===0&&(c=!0,s=s.replace(C.ATTR_BIND_PRFX,""));let l=n[1].split(",").map(d=>d.trim());for(let d of l){let u;d.startsWith("!!")?(u="double",d=d.replace("!!","")):d.startsWith("!")&&(u="single",d=d.replace("!","")),e.sub(d,p=>{u==="double"?p=!!p:u==="single"&&(p=!p),c?p?.constructor===Boolean?p?t.setAttribute(s,""):t.removeAttribute(s):t.setAttribute(s,p):Lo(t,s,p)||(t[C.SET_LATER_KEY]||(t[C.SET_LATER_KEY]=Object.create(null)),t[C.SET_LATER_KEY][s]=p)})}}),t.removeAttribute(C.BIND_ATTR)})}var cr="{{",bt="}}",uc="skip-text";function dc(i){let e,t=[],r=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,{acceptNode:o=>{var a;return!((a=o.parentElement)!=null&&a.hasAttribute(uc))&&o.textContent.includes(cr)&&o.textContent.includes(bt)&&1}});for(;e=r.nextNode();)t.push(e);return t}var hc=function(i,e){dc(i).forEach(r=>{let o=[],a;for(;r.textContent.includes(bt);)r.textContent.startsWith(cr)?(a=r.textContent.indexOf(bt)+bt.length,r.splitText(a),o.push(r)):(a=r.textContent.indexOf(cr),r.splitText(a)),r=r.nextSibling;o.forEach(n=>{let s=n.textContent.replace(cr,"").replace(bt,"");n.textContent="",e.sub(s,c=>{n.textContent=c})})})},pc=[nc,sc,cc,lc,hc],lr="'",it='"',fc=/\\([0-9a-fA-F]{1,6} ?)/g;function gc(i){return(i[0]===it||i[0]===lr)&&(i[i.length-1]===it||i[i.length-1]===lr)}function mc(i){return(i[0]===it||i[0]===lr)&&(i=i.slice(1)),(i[i.length-1]===it||i[i.length-1]===lr)&&(i=i.slice(0,-1)),i}function xc(i){let e="",t="";for(var r=0;r<i.length;r++){const o=i[r+1];i[r]==="\\"&&o==='"'?(e+='\\"',r++):i[r]==='"'&&t!=="\\"?e+='\\"':e+=i[r],t=i[r]}return e}function bc(i){let e=i;gc(i)&&(e=mc(e),e=e.replace(fc,(t,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=xc(e),e=it+e+it);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${i}`)}}var Mo=0,ot=null,Ce=null,Ue=class extends HTMLElement{constructor(){super(),gi(this,"updateCssData",()=>{var i;this.dropCssDataCache(),(i=this.__boundCssProps)==null||i.forEach(e=>{let t=this.getCssData(this.__extractCssName(e),!0);t!==null&&this.$[e]!==t&&(this.$[e]=t)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return Ue}initCallback(){}__initCallback(){var i;this.__initialized||(this.__initialized=!0,(i=this.initCallback)==null||i.call(this))}render(i,e=this.renderShadow){let t;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let o=this.getAttribute(C.USE_TPL);if(o){let a=this.getRootNode(),n=a?.querySelector(o)||document.querySelector(o);n?i=n.content.cloneNode(!0):console.warn(`Symbiote template "${o}" is not found...`)}}if(this.processInnerHtml)for(let o of this.tplProcessors)o(this,this);if(i||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),i?.constructor===DocumentFragment)t=i;else if(i?.constructor===String){let o=document.createElement("template");o.innerHTML=i,t=o.content.cloneNode(!0)}else this.constructor.__tpl&&(t=this.constructor.__tpl.content.cloneNode(!0));for(let o of this.tplProcessors)o(t,this)}let r=()=>{t&&(e&&this.shadowRoot.appendChild(t)||this.appendChild(t)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let o=document.createElement("link");o.rel="stylesheet",o.href=this.constructor.__shadowStylesUrl,o.onload=r,this.shadowRoot.prepend(o)}else r()}addTemplateProcessor(i){this.tplProcessors.add(i)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=sr.generate(),this.style.setProperty(C.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(C.CSS_CTX_PROP,!0)}get ctxName(){var i;let e=((i=this.getAttribute(C.CTX_NAME_ATTR))==null?void 0:i.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=L.registerCtx({},this)),this.__localCtx}get nodeCtx(){return L.getCtx(this.ctxName,!1)||L.registerCtx({},this.ctxName)}static __parseProp(i,e){let t,r;if(i.startsWith(C.EXT_DATA_CTX_PRFX))t=e.nodeCtx,r=i.replace(C.EXT_DATA_CTX_PRFX,"");else if(i.includes(C.NAMED_DATA_CTX_SPLTR)){let o=i.split(C.NAMED_DATA_CTX_SPLTR);t=L.getCtx(o[0]),r=o[1]}else t=e.localCtx,r=i;return{ctx:t,name:r}}sub(i,e,t=!0){let r=a=>{this.isConnected&&e(a)},o=Ue.__parseProp(i,this);o.ctx.has(o.name)?this.allSubs.add(o.ctx.sub(o.name,r,t)):window.setTimeout(()=>{this.allSubs.add(o.ctx.sub(o.name,r,t))})}notify(i){let e=Ue.__parseProp(i,this);e.ctx.notify(e.name)}has(i){let e=Ue.__parseProp(i,this);return e.ctx.has(e.name)}add(i,e,t=!1){let r=Ue.__parseProp(i,this);r.ctx.add(r.name,e,t)}add$(i,e=!1){for(let t in i)this.add(t,i[t],e)}get $(){if(!this.__stateProxy){let i=Object.create(null);this.__stateProxy=new Proxy(i,{set:(e,t,r)=>{let o=Ue.__parseProp(t,this);return o.ctx.pub(o.name,r),!0},get:(e,t)=>{let r=Ue.__parseProp(t,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(i,e=!1){for(let t in i){let r=i[t];e||![String,Number,Boolean].includes(r?.constructor)?this.$[t]=r:this.$[t]!==r&&(this.$[t]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(C.CTX_OWNER_ATTR)&&this.getAttribute(C.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let i=this.constructor.__attrDesc;if(i)for(let e of Object.values(i))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(C.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(C.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(C.NAMED_DATA_CTX_SPLTR)){let t=e.split(C.NAMED_DATA_CTX_SPLTR),r=t[0].trim(),o=t[1].trim();if(r&&o){let a=L.getCtx(r,!1);a||(a=L.registerCtx({},r)),a.add(o,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var i;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(i=this.getAttribute(C.CTX_NAME_ATTR))==null?void 0:i.trim();if(e&&this.style.setProperty(C.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[C.SET_LATER_KEY]){for(let t in this[C.SET_LATER_KEY])Lo(this,t,this[C.SET_LATER_KEY][t]);delete this[C.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let t of pc)this.addTemplateProcessor(t);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let t=this.getRootNode();if(!t)return;if(t?.querySelector(`link[${C.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let o=this.constructor.__rootStylesLink.cloneNode(!0);o.setAttribute(C.ROOT_STYLE_ATTR_NAME,this.constructor.is),o.onload=()=>{this.render()},t.nodeType===Node.DOCUMENT_NODE?t.head.appendChild(o):t.prepend(o)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let i of this.allSubs)i.remove(),this.allSubs.delete(i);for(let i of this.tplProcessors)this.tplProcessors.delete(i);Ce?.delete(this.updateCssData),Ce?.size||(ot?.disconnect(),ot=null,Ce=null)},100)))}static reg(i,e=!1){i||(Mo++,i=`${C.AUTO_TAG_PRFX}-${Mo}`),this.__tag=i;let t=window.customElements.get(i);if(t){!e&&t!==this&&console.warn([`Element with tag name "${i}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(i,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(i){this.observedAttributes=Object.keys(i),this.__attrDesc=i}attributeChangedCallback(i,e,t){var r;if(e===t)return;let o=(r=this.constructor.__attrDesc)==null?void 0:r[i];o?this.__dataCtxInitialized?this.$[o]=t:this.init$[o]=t:this[i]=t}getCssData(i,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(i)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let t=this.__computedStyle.getPropertyValue(i).trim();try{this.__cssDataCache[i]=bc(t)}catch{!e&&console.warn(`CSS Data error: ${i}`),this.__cssDataCache[i]=null}}return this.__cssDataCache[i]}__extractCssName(i){return i.split("--").map((e,t)=>t===0?"":e).join("--")}__initStyleAttrObserver(){Ce||(Ce=new Set),Ce.add(this.updateCssData),ot||(ot=new MutationObserver(i=>{i[0].type==="attributes"&&Ce.forEach(e=>{e()})}),ot.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(i,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(i);let t=this.getCssData(this.__extractCssName(i),!0);t===null&&(t=e),this.add(i,t),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(i,e,t){let r="__"+i;this[r]=this[i],Object.defineProperty(this,i,{set:o=>{this[r]=o,t?window.setTimeout(()=>{e?.(o)}):e?.(o)},get:()=>this[r]}),this[i]=this[r]}static set shadowStyles(i){let e=new Blob([i],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(i){if(!this.__rootStylesLink){let e=new Blob([i],{type:"text/css"}),t=URL.createObjectURL(e),r=document.createElement("link");r.href=t,r.rel="stylesheet",this.__rootStylesLink=r}}},vt=Ue;gi(vt,"template");function mi(i,e){for(let t in e)t.includes("-")?i.style.setProperty(t,e[t]):i.style[t]=e[t]}function vc(i,e){for(let t in e)e[t].constructor===Boolean?e[t]?i.setAttribute(t,""):i.removeAttribute(t):i.setAttribute(t,e[t])}function Po(i={tag:"div"}){let e=document.createElement(i.tag);if(i.attributes&&vc(e,i.attributes),i.styles&&mi(e,i.styles),i.properties)for(let t in i.properties)e[t]=i.properties[t];return i.processors&&i.processors.forEach(t=>{t(e)}),i.children&&i.children.forEach(t=>{let r=Po(t);e.appendChild(r)}),e}var Ro="idb-store-ready",yc="symbiote-db",_c="symbiote-idb-update_",wc=class{_notifyWhenReady(i=null){window.dispatchEvent(new CustomEvent(Ro,{detail:{dbName:this.name,storeName:this.storeName,event:i}}))}get _updEventName(){return _c+this.name}_getUpdateEvent(i){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:i}})}_notifySubscribers(i){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,i),window.dispatchEvent(this._getUpdateEvent(i))}constructor(i,e){this.name=i,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=t=>{this.db=t.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=t=>{this.db=t.target.result,this._notifyWhenReady(t)},this.request.onerror=t=>{console.error(t)},this._subscriptionsMap={},this._updateHandler=t=>{t.key===this.name&&this._subscriptionsMap[t.newValue]&&this._subscriptionsMap[t.newValue].forEach(async o=>{o(await this.read(t.newValue))})},this._localUpdateHandler=t=>{this._updateHandler(t.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(i){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(i);return new Promise((r,o)=>{t.onsuccess=a=>{var n;(n=a.target.result)!=null&&n._value?r(a.target.result._value):(r(null),console.warn(`IDB: cannot read "${i}"`))},t.onerror=a=>{o(a)}})}write(i,e,t=!1){let r={_key:i,_value:e},a=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((n,s)=>{a.onsuccess=c=>{t||this._notifySubscribers(i),n(c.target.result)},a.onerror=c=>{s(c)}})}delete(i,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(i);return new Promise((o,a)=>{r.onsuccess=n=>{e||this._notifySubscribers(i),o(n)},r.onerror=n=>{a(n)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((t,r)=>{e.onsuccess=o=>{let a=o.target.result;t(a.map(n=>n._value))},e.onerror=o=>{r(o)}})}subscribe(i,e){this._subscriptionsMap[i]||(this._subscriptionsMap[i]=new Set);let t=this._subscriptionsMap[i];return t.add(e),{remove:()=>{t.delete(e),t.size||delete this._subscriptionsMap[i]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,Do.clear(this.name)}},Do=class{static get readyEventName(){return Ro}static open(i=yc,e="store"){let t=i+"/"+e;return this._reg[t]||(this._reg[t]=new wc(i,e)),this._reg[t]}static clear(i){window.indexedDB.deleteDatabase(i);for(let e in this._reg)e.split("/")[0]===i&&delete this._reg[e]}};gi(Do,"_reg",Object.create(null));const zo=i=>{if(typeof i!="string"||!i)return"";let e=i.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},xi=(...i)=>i.filter(e=>typeof e=="string"&&e).map(e=>zo(e)).join("/-/"),Me=(...i)=>{let e=xi(...i);return e?`-/${e}/`:""};function bi(i){let e=new URL(i),t=e.pathname+e.search+e.hash,r=t.lastIndexOf("http"),o=t.lastIndexOf("/"),a="";return r>=0?a=t.slice(r):o>=0&&(a=t.slice(o+1)),a}function Fo(i){let e=new URL(i),{pathname:t}=e;const r=t.indexOf("/"),o=t.indexOf("/",r+1);return t.substring(r+1,o)}function Vo(i){let e=No(i),t=new URL(e),r=t.pathname.indexOf("/-/");return r===-1?"":t.pathname.substring(r).slice(1)}function kc(i){return Vo(i).split("/-/").filter(Boolean).map(t=>zo(t))}function No(i){let e=new URL(i),t=bi(i),r=Bo(t)?jo(t).pathname:t;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function Bo(i){return i.startsWith("http")}function jo(i){let e=new URL(i);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const pe=(i,e,t)=>{let r=new URL(No(i));if(t=t||bi(i),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),Bo(t)){let o=jo(t);r.pathname=r.pathname+(e||"")+(o.pathname||""),r.search=o.search,r.hash=o.hash}else r.pathname=r.pathname+(e||"")+(t||"");return r.toString()},yt=(i,e)=>{let t=new URL(i);return t.pathname=e+"/",t.toString()},Ee=(i,e=",")=>i.trim().split(e).map(t=>t.trim()).filter(t=>t.length>0),fe=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),Ho=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Cc(i,e){if(typeof e=="number"){const t=e;return fe[i]!==t?`${i}/${t}`:""}if(typeof e=="boolean"){const t=e;return fe[i]!==t?`${i}`:""}if(i==="filter"&&e){const{name:t,amount:r}=e;return fe.filter===r?"":`${i}/${t}/${r}`}if(i==="crop"&&e){let{dimensions:t,coords:r}=e;return`${i}/${t.join("x")}/${r.join(",")}`}return""}function ur(i){return xi(...Ho.filter(e=>typeof i[e]<"u"&&i[e]!==null).map(e=>{let t=i[e];return Cc(e,t)}).filter(e=>!!e))}const Go=xi("format/auto","progressive/yes"),Ae=([i])=>typeof i<"u"?Number(i):void 0,Wo=()=>!0,Ec=([i,e])=>({name:i,amount:typeof e<"u"?Number(e):100}),Ac=([i,e])=>{if(!/\d+x\d+/.test(i)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Ee(i,"x").map(Number),coords:Ee(e).map(Number)}},Ic=Object.freeze({enhance:Ae,brightness:Ae,exposure:Ae,gamma:Ae,contrast:Ae,saturation:Ae,vibrance:Ae,warmth:Ae,filter:Ec,mirror:Wo,flip:Wo,rotate:Ae,crop:Ac});function Tc(i){const e={};for(const t of i){const[r,...o]=t.split("/");if(!Ho.includes(r))continue;const a=r,n=Ic[a];try{const s=n(o);e[a]=s}catch(s){console.warn([`Failed to parse URL operation "${t}". It will be ignored.`,s instanceof Error?`Error message: "${s.message}"`:s,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const G=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),ye=[G.CROP,G.TUNING,G.FILTERS],Sc=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],$c=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],Oc=["rotate","mirror","flip"],at=Object.freeze({brightness:{zero:fe.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:fe.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:fe.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:fe.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:fe.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:fe.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:fe.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:fe.enhance,range:[0,100],keypointsNumber:1},filter:{zero:fe.filter,range:[0,100],keypointsNumber:1}}),Pe=i=>i?i.split(",").map(e=>e.trim()).filter(Boolean):[],_t=i=>i?i.join(","):"",qo="https://ucarecdn.com",Lc="https://upload.uploadcare.com",Uc="https://social.uploadcare.com",Mc="https://ucarecd.net",Re={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",externalSourcesEmbedCss:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",topLevelOrigin:"",cloudImageEditorTabs:_t(ye),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:qo,cdnCnamePrefixed:Mc,baseUrl:Lc,socialBaseUrl:Uc,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:10,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null,secureUploadsExpireThreshold:600*1e3,secureUploadsSignatureResolver:null,secureDeliveryProxyUrlResolver:null,iconHrefResolver:null,fileValidators:[],collectionValidators:[],cameraModes:"photo, video",defaultCameraMode:null,enableAudioRecording:!0,enableVideoRecording:null,maxVideoRecordingDuration:null,mediaRecorderOptions:null,filesViewMode:"list",gridShowFileNames:!1,cloudImageEditorAutoOpen:!1,cloudImageEditorMaskHref:null,testMode:!1},Pc=20,N=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class Rc{_timeoutStore=new Map;_targets=new Set;_debugPrint=null;constructor(e){this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,t){for(const r of this._targets)r.dispatchEvent(new CustomEvent(e,{detail:t}));this._debugPrint?.(()=>{const r=t&&typeof t=="object"?{...t}:t;return[`event "${e}"`,r]})}emit(e,t,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof t=="function"?t():t);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const o=typeof r=="number"?r:Pc,a=window.setTimeout(()=>{this._dispatch(e,typeof t=="function"?t():t),this._timeoutStore.delete(e)},o);this._timeoutStore.set(e,a)}}function ce(i,e){let t;const r=(...o)=>{clearTimeout(t),t=setTimeout(()=>i(...o),e)};return r.cancel=()=>{clearTimeout(t)},r}const Xo="--uploadcare-blocks-window-height";class Zo{static clientsRegistry=new Set;static flush=ce(()=>{document.documentElement.style.setProperty(Xo,`${window.innerHeight}px`)},100);static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(Xo)}}const Dc=i=>{const e=new Intl.Locale(i);let t="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?t=e.getTextInfo().direction:"textInfo"in e&&e.textInfo?.direction&&(t=e.textInfo.direction),t},Yo=(i,e)=>new Intl.PluralRules(i).select(e),zc=i=>i,vi="{{",Ko="}}",Jo="plural:";function yi(i,e,t={}){let{openToken:r=vi,closeToken:o=Ko,transform:a=zc}=t;for(let n in e){let s=e[n]?.toString();i=i.replaceAll(r+n+o,typeof s=="string"?a(s):s)}return i}function Fc(i){const e=[];let t=i.indexOf(vi);for(;t!==-1;){const r=i.indexOf(Ko,t),o=i.substring(t+2,r);if(o.startsWith(Jo)){const a=i.substring(t+2,r).replace(Jo,""),n=a.substring(0,a.indexOf("(")),s=a.substring(a.indexOf("(")+1,a.indexOf(")"));e.push({variable:o,pluralKey:n,countVariable:s})}t=i.indexOf(vi,r)}return e}const Vc=({element:i,attribute:e,onSuccess:t,onTimeout:r,timeout:o=300})=>{const a=i.getAttribute(e);if(a!==null){t(a);return}const n=new MutationObserver(l=>{const d=l[l.length-1];c(d)});n.observe(i,{attributes:!0,attributeFilter:[e]});const s=setTimeout(()=>{n.disconnect(),r()},o),c=l=>{const d=i.getAttribute(e);l.type==="attributes"&&l.attributeName===e&&d!==null&&(clearTimeout(s),n.disconnect(),t(d))}};function Qo(i){return Object.prototype.toString.call(i)==="[object Object]"}const Nc=/\W|_/g;function Bc(i){return i.split(Nc).map((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function ea(i,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(i)?i.map(t=>Ie(t,{ignoreKeys:e})):i}function Ie(i,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(i))return ea(i,{ignoreKeys:e});if(!Qo(i))return i;const t={};for(const r of Object.keys(i)){let o=i[r];if(e.includes(r)){t[r]=o;continue}Qo(o)?o=Ie(o,{ignoreKeys:e}):Array.isArray(o)&&(o=ea(o,{ignoreKeys:e})),t[Bc(r)]=o}return t}const jc=i=>new Promise(e=>setTimeout(e,i));function ta({libraryName:i,libraryVersion:e,userAgent:t,publicKey:r="",integration:o=""}){const a="JavaScript";if(typeof t=="string")return t;if(typeof t=="function")return t({publicKey:r,libraryName:i,libraryVersion:e,languageName:a,integration:o});const n=[i,e,r].filter(Boolean).join("/"),s=[a,o].filter(Boolean).join("; ");return`${n} (${s})`}const Hc={factor:2,time:100};function Gc(i,e=Hc){let t=0;function r(o){const a=Math.round(e.time*e.factor**t);return o({attempt:t,retry:s=>jc(s??a).then(()=>(t+=1,r(o)))})}return r(i)}class dr extends Error{}class Lt extends dr{originalProgressEvent;constructor(e){super(),this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,Lt.prototype),this.originalProgressEvent=e}}const hr=(i,e)=>{i&&(i.aborted?Promise.resolve().then(e):i.addEventListener("abort",()=>e(),{once:!0}))};class Ke extends dr{isCancel=!0;constructor(e="Request canceled"){super(e),this.name="CancelError",Object.setPrototypeOf(this,Ke.prototype)}}const Wc=500,ra=({check:i,interval:e=Wc,timeout:t,signal:r})=>new Promise((o,a)=>{let n,s;hr(r,()=>{n&&clearTimeout(n),a(new Ke("Poll cancelled"))}),t&&(s=setTimeout(()=>{n&&clearTimeout(n),a(new Ke("Timed out"))},t));const c=()=>{try{Promise.resolve(i(r)).then(l=>{l?(s&&clearTimeout(s),o(l)):n=setTimeout(c,e)}).catch(l=>{s&&clearTimeout(s),a(l)})}catch(l){s&&clearTimeout(s),a(l)}};n=setTimeout(c,0)}),I={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,maxConcurrentRequests:4,pusherKey:"79ae88bd931ea68464d9"},pr="application/octet-stream",ia="original",De=({method:i,url:e,data:t,headers:r={},signal:o,onProgress:a})=>new Promise((n,s)=>{const c=new XMLHttpRequest,l=i?.toUpperCase()||"GET";let d=!1;c.open(l,e,!0),r&&Object.entries(r).forEach(u=>{const[p,f]=u;typeof f<"u"&&!Array.isArray(f)&&c.setRequestHeader(p,f)}),c.responseType="text",hr(o,()=>{d=!0,c.abort(),s(new Ke)}),c.onload=()=>{if(c.status!=200)s(new Error(`Error ${c.status}: ${c.statusText}`));else{const u={method:l,url:e,data:t,headers:r||void 0,signal:o,onProgress:a},p=c.getAllResponseHeaders().trim().split(/[\r\n]+/),f={};p.forEach(function(_){const w=_.split(": "),x=w.shift(),b=w.join(": ");x&&typeof x<"u"&&(f[x]=b)});const g=c.response,m=c.status;n({request:u,data:g,headers:f,status:m})}},c.onerror=u=>{d||s(new Lt(u))},a&&typeof a=="function"&&(c.upload.onprogress=u=>{u.lengthComputable?a({isComputable:!0,value:u.loaded/u.total}):a({isComputable:!1})}),t?c.send(t):c.send()});function qc(i,...e){return i}const Xc=({name:i})=>i?[i]:[],Zc=qc;var Yc=()=>new FormData;const oa=i=>!1,fr=i=>typeof Blob<"u"&&i instanceof Blob,gr=i=>typeof File<"u"&&i instanceof File,mr=i=>!!i&&typeof i=="object"&&!Array.isArray(i)&&"uri"in i&&typeof i.uri=="string",nt=i=>fr(i)||gr(i)||oa()||mr(i),Kc=i=>typeof i=="string"||typeof i=="number"||typeof i>"u",Jc=i=>!!i&&typeof i=="object"&&!Array.isArray(i),Qc=i=>!!i&&typeof i=="object"&&"data"in i&&nt(i.data);function aa(i,e,t){if(Array.isArray(t))for(const r of t)aa(i,`${e}[]`,r);else if(Qc(t)){const{name:r,contentType:o}=t,a=Zc(t.data,r,o??pr),n=Xc({name:r});i.push([e,a,...n])}else if(Jc(t))for(const[r,o]of Object.entries(t))typeof o<"u"&&i.push([`${e}[${r}]`,String(o)]);else Kc(t)&&t&&i.push([e,t.toString()])}function el(i){const e=[];for(const[t,r]of Object.entries(i))aa(e,t,r);return e}function xr(i){const e=Yc(),t=el(i);for(const r of t){const[o,a,...n]=r;e.append(o,a,...n)}return e}class ne extends dr{code;request;response;headers;constructor(e,t,r,o,a){super(),this.name="UploadError",this.message=e,this.code=t,this.request=r,this.response=o,this.headers=a,Object.setPrototypeOf(this,ne.prototype)}}const tl=i=>{const e=new URLSearchParams;for(const[t,r]of Object.entries(i))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(o=>o[1]??!1).forEach(o=>e.set(`${t}[${o[0]}]`,String(o[1]))):Array.isArray(r)?r.forEach(o=>{e.append(`${t}[]`,o)}):typeof r=="string"&&r?e.set(t,r):typeof r=="number"&&e.set(t,r.toString());return e.toString()},Te=(i,e,t)=>{const r=new URL(i);return r.pathname=(r.pathname+e).replace("//","/"),t&&(r.search=tl(t)),r.toString()};var rl="6.18.0";const il="UploadcareUploadClient",ol=rl;function qe(i){return ta({libraryName:il,libraryVersion:ol,...i})}const al="RequestThrottledError",na=15e3,nl=1e3;function sl(i){const{headers:e}=i||{};if(!e||typeof e["retry-after"]!="string")return na;const t=parseInt(e["retry-after"],10);return Number.isFinite(t)?t*1e3:na}function ze(i,e){const{retryThrottledRequestMaxTimes:t,retryNetworkErrorMaxTimes:r}=e;return Gc(({attempt:o,retry:a})=>i().catch(n=>{if("response"in n&&n?.code===al&&o<t)return a(sl(n));if(n instanceof Lt&&o<r)return a((o+1)*nl);throw n}))}const sa=i=>{let e="";return(fr(i)||gr(i)||mr(i))&&(e=i.type),e||pr},ca=i=>{let e="";return gr(i)&&i.name?e=i.name:fr(i)||oa()?e="":mr(i)&&i.name&&(e=i.name),e||ia};function _i(i){return typeof i>"u"||i==="auto"?"auto":i?"1":"0"}function cl(i,{publicKey:e,fileName:t,contentType:r,baseURL:o=I.baseURL,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:d="local",integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=I.retryNetworkErrorMaxTimes,metadata:m}){return ze(()=>De({method:"POST",url:Te(o,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qe({publicKey:e,integration:u,userAgent:p})},data:xr({file:{data:i,name:t||ca(i),contentType:r||sa(i)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:_i(s),signature:a,expire:n,source:d,metadata:m}),signal:c,onProgress:l}).then(({data:_,headers:w,request:x})=>{const b=Ie(JSON.parse(_));if("error"in b)throw new ne(b.error.content,b.error.errorCode,x,b,w);return b}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:f})}var wi;(function(i){i.Token="token",i.FileInfo="file_info"})(wi||(wi={}));function ll(i,{publicKey:e,baseURL:t=I.baseURL,store:r,fileName:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,source:l="url",signal:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=I.retryNetworkErrorMaxTimes,metadata:m}){return ze(()=>De({method:"POST",headers:{"X-UC-User-Agent":qe({publicKey:e,integration:u,userAgent:p})},url:Te(t,"/from_url/",{jsonerrors:1,pub_key:e,source_url:i,store:_i(r),filename:o,check_URL_duplicates:a?1:void 0,save_URL_duplicates:n?1:void 0,signature:s,expire:c,source:l,metadata:m}),signal:d}).then(({data:_,headers:w,request:x})=>{const b=Ie(JSON.parse(_));if("error"in b)throw new ne(b.error.content,b.error.errorCode,x,b,w);return b}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:f})}var oe;(function(i){i.Unknown="unknown",i.Waiting="waiting",i.Progress="progress",i.Error="error",i.Success="success"})(oe||(oe={}));const ul=i=>"status"in i&&i.status===oe.Error;function dl(i,{publicKey:e,baseURL:t=I.baseURL,signal:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s=I.retryNetworkErrorMaxTimes}={}){return ze(()=>De({method:"GET",headers:e?{"X-UC-User-Agent":qe({publicKey:e,integration:o,userAgent:a})}:void 0,url:Te(t,"/from_url/status/",{jsonerrors:1,token:i}),signal:r}).then(({data:c,headers:l,request:d})=>{const u=Ie(JSON.parse(c));if("error"in u&&!ul(u))throw new ne(u.error.content,u.error.errorCode,d,u,l);return u}),{retryNetworkErrorMaxTimes:s,retryThrottledRequestMaxTimes:n})}function hl(i,{publicKey:e,baseURL:t=I.baseURL,jsonpCallback:r,secureSignature:o,secureExpire:a,signal:n,source:s,integration:c,userAgent:l,retryThrottledRequestMaxTimes:d=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:u=I.retryNetworkErrorMaxTimes}){return ze(()=>De({method:"POST",headers:{"X-UC-User-Agent":qe({publicKey:e,integration:c,userAgent:l})},url:Te(t,"/group/",{jsonerrors:1}),data:xr({files:i,callback:r,pub_key:e,signature:o,expire:a,source:s}),signal:n}).then(({data:p,headers:f,request:g})=>{const m=Ie(JSON.parse(p));if("error"in m)throw new ne(m.error.content,m.error.errorCode,g,m,f);return m}),{retryNetworkErrorMaxTimes:u,retryThrottledRequestMaxTimes:d})}function la(i,{publicKey:e,baseURL:t=I.baseURL,signal:r,source:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=I.retryNetworkErrorMaxTimes}){return ze(()=>De({method:"GET",headers:{"X-UC-User-Agent":qe({publicKey:e,integration:a,userAgent:n})},url:Te(t,"/info/",{jsonerrors:1,pub_key:e,file_id:i,source:o}),signal:r}).then(({data:l,headers:d,request:u})=>{const p=Ie(JSON.parse(l));if("error"in p)throw new ne(p.error.content,p.error.errorCode,u,p,d);return p}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function pl(i,{publicKey:e,contentType:t,fileName:r,multipartChunkSize:o=I.multipartChunkSize,baseURL:a="",secureSignature:n,secureExpire:s,store:c,signal:l,source:d="local",integration:u,userAgent:p,retryThrottledRequestMaxTimes:f=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=I.retryNetworkErrorMaxTimes,metadata:m}){return ze(()=>De({method:"POST",url:Te(a,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qe({publicKey:e,integration:u,userAgent:p})},data:xr({filename:r||ia,size:i,content_type:t||pr,part_size:o,UPLOADCARE_STORE:_i(c),UPLOADCARE_PUB_KEY:e,signature:n,expire:s,source:d,metadata:m}),signal:l}).then(({data:_,headers:w,request:x})=>{const b=Ie(JSON.parse(_));if("error"in b)throw new ne(b.error.content,b.error.errorCode,x,b,w);return b.parts=Object.keys(b.parts).map(D=>b.parts[Number(D)]),b}),{retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})}function fl(i,e,{contentType:t,signal:r,onProgress:o,retryThrottledRequestMaxTimes:a=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:n=I.retryNetworkErrorMaxTimes}){return ze(()=>De({method:"PUT",url:e,data:i,onProgress:o,signal:r,headers:{"Content-Type":t||pr}}).then(s=>(o&&o({isComputable:!0,value:1}),s)).then(({status:s})=>({code:s})),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n})}function gl(i,{publicKey:e,baseURL:t=I.baseURL,source:r="local",signal:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=I.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=I.retryNetworkErrorMaxTimes}){return ze(()=>De({method:"POST",url:Te(t,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qe({publicKey:e,integration:a,userAgent:n})},data:xr({uuid:i,UPLOADCARE_PUB_KEY:e,source:r}),signal:o}).then(({data:l,headers:d,request:u})=>{const p=Ie(JSON.parse(l));if("error"in p)throw new ne(p.error.content,p.error.errorCode,u,p,d);return p}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function ki(i,{publicKey:e,baseURL:t,source:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s,signal:c,onProgress:l}){return ra({check:d=>la(i,{publicKey:e,baseURL:t,signal:d,source:r,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s}).then(u=>u.isReady?u:(l&&l({isComputable:!0,value:1}),!1)),signal:c})}function ml(i){return"defaultEffects"in i}class st{uuid;name;size;isStored;isImage;mimeType;cdnUrl;s3Url;originalFilename;imageInfo;videoInfo;contentInfo;metadata;s3Bucket;defaultEffects=null;constructor(e,{baseCDN:t=I.baseCDN,fileName:r}={}){const{uuid:o,s3Bucket:a}=e,n=Te(t,`${o}/`),s=a?Te(`https://${a}.s3.amazonaws.com/`,`${o}/${e.filename}`):null;this.uuid=o,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=n,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=a||null,this.s3Url=s,ml(e)&&(this.defaultEffects=e.defaultEffects)}}const xl=(i,{publicKey:e,fileName:t,baseURL:r,secureSignature:o,secureExpire:a,store:n,contentType:s,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,baseCDN:m,metadata:_})=>cl(i,{publicKey:e,fileName:t,contentType:s,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,metadata:_}).then(({file:w})=>ki(w,{publicKey:e,baseURL:r,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(w=>new st(w,{baseCDN:m})),bl=(i,{publicKey:e,fileName:t,baseURL:r,signal:o,onProgress:a,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:d,baseCDN:u})=>la(i,{publicKey:e,baseURL:r,signal:o,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:d}).then(p=>new st(p,{baseCDN:u,fileName:t})).then(p=>(a&&a({isComputable:!0,value:1}),p)),vl=(i,{signal:e}={})=>{let t=null,r=null;const o=i.map(()=>new AbortController),a=n=>()=>{r=n,o.forEach((s,c)=>c!==n&&s.abort())};return hr(e,()=>{o.forEach(n=>n.abort())}),Promise.all(i.map((n,s)=>{const c=a(s);return Promise.resolve().then(()=>n({stopRace:c,signal:o[s].signal})).then(l=>(c(),l)).catch(l=>(t=l,null))})).then(n=>{if(r===null)throw t;return n[r]})};var yl=window.WebSocket;class _l{events=Object.create({});emit(e,t){this.events[e]?.forEach(r=>r(t))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){t?this.events[e]=this.events[e].filter(r=>r!==t):this.events[e]=[]}}const wl=(i,e)=>i==="success"?{status:oe.Success,...e}:i==="progress"?{status:oe.Progress,...e}:{status:oe.Error,...e};class kl{key;disconnectTime;ws=void 0;queue=[];isConnected=!1;subscribers=0;emmitter=new _l;disconnectTimeoutId=null;constructor(e,t=3e4){this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new yl(e),this.ws.addEventListener("error",t=>{this.emmitter.emit("error",new Error(t.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(t=>this.send(t.event,t.data)),this.queue=[]}),this.ws.addEventListener("message",t=>{const r=JSON.parse(t.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,wl(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,t){const r=JSON.stringify({event:e,data:t});this.ws?.send(r)}subscribe(e,t){this.subscribers+=1,this.connect();const r=`task-status-${e}`,o={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,t),this.isConnected?this.send(o.event,o.data):this.queue.push(o)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(o=>o.data.channel!==t),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Ci=null;const Ei=i=>{if(!Ci){const e=typeof window>"u"?0:3e4;Ci=new kl(i,e)}return Ci},Cl=i=>{Ei(i).connect()};function El({token:i,publicKey:e,baseURL:t,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,onProgress:s,signal:c}){return ra({check:l=>dl(i,{publicKey:e,baseURL:t,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,signal:l}).then(d=>{switch(d.status){case oe.Error:return new ne(d.error,d.errorCode);case oe.Waiting:return!1;case oe.Unknown:return new ne(`Token "${i}" was not found.`);case oe.Progress:return s&&(d.total==="unknown"?s({isComputable:!1}):s({isComputable:!0,value:d.done/d.total})),!1;case oe.Success:return s&&s({isComputable:!0,value:d.done/d.total}),d;default:throw new Error("Unknown status")}}),signal:c})}const Al=({token:i,pusherKey:e,signal:t,onProgress:r})=>new Promise((o,a)=>{const n=Ei(e),s=n.onError(a),c=()=>{s(),n.unsubscribe(i)};hr(t,()=>{c(),a(new Ke("pusher cancelled"))}),n.subscribe(i,l=>{switch(l.status){case oe.Progress:{r&&(l.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:l.done/l.total}));break}case oe.Success:{c(),r&&r({isComputable:!0,value:l.done/l.total}),o(l);break}case oe.Error:c(),a(new ne(l.msg,l.error_code))}})}),Il=(i,{publicKey:e,fileName:t,baseURL:r,baseCDN:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:d,onProgress:u,source:p,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,pusherKey:_=I.pusherKey,metadata:w})=>Promise.resolve(Cl(_)).then(()=>ll(i,{publicKey:e,fileName:t,baseURL:r,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:d,source:p,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,metadata:w})).catch(x=>(Ei(_)?.disconnect(),Promise.reject(x))).then(x=>x.type===wi.FileInfo?x:vl([({signal:b})=>El({token:x.token,publicKey:e,baseURL:r,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:u,signal:b}),({signal:b})=>Al({token:x.token,pusherKey:_,signal:b,onProgress:u})],{signal:d})).then(x=>{if(x instanceof ne)throw x;return x}).then(x=>ki(x.uuid,{publicKey:e,baseURL:r,integration:f,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:u,signal:d})).then(x=>new st(x,{baseCDN:o})),Ai=new WeakMap,Tl=async i=>{if(Ai.has(i))return Ai.get(i);const e=await fetch(i.uri).then(t=>t.blob());return Ai.set(i,e),e},ua=async i=>{if(gr(i)||fr(i))return i.size;if(mr(i))return(await Tl(i)).size;throw new Error("Unknown file type. Cannot determine file size.")},Sl=(i,e=I.multipartMinFileSize)=>i>=e,da=i=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",t=new RegExp(e);return!nt(i)&&t.test(i)},Ii=i=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",t=new RegExp(e);return!nt(i)&&t.test(i)},$l=(i,e)=>new Promise((t,r)=>{const o=[];let a=!1,n=e.length;const s=[...e],c=()=>{const l=e.length-s.length,d=s.shift();d&&d().then(u=>{a||(o[l]=u,n-=1,n?c():t(o))}).catch(u=>{a=!0,r(u)})};for(let l=0;l<i;l++)c()}),Ol=(i,e,t,r)=>{const o=r*e,a=Math.min(o+r,t);return i.slice(o,a)},Ll=async(i,e,t)=>r=>Ol(i,r,e,t),Ul=(i,e,{publicKey:t,contentType:r,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})=>fl(i,e,{contentType:r,onProgress:o,signal:a,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c}),Ml=async(i,{publicKey:e,fileName:t,fileSize:r,baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,contentType:m,multipartChunkSize:_=I.multipartChunkSize,maxConcurrentRequests:w=I.maxConcurrentRequests,baseCDN:x,metadata:b})=>{const D=r??await ua(i);let j;const q=(A,V)=>{if(!l)return;j||(j=Array(A).fill(0));const h=v=>v.reduce((k,S)=>k+S,0);return v=>{v.isComputable&&(j[V]=v.value,l({isComputable:!0,value:h(j)/A}))}};return m||=sa(i),pl(D,{publicKey:e,contentType:m,fileName:t||ca(i),baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,metadata:b,multipartChunkSize:_}).then(async({uuid:A,parts:V})=>{const h=await Ll(i,D,_);return Promise.all([A,$l(w,V.map((v,k)=>()=>Ul(h(k),v,{publicKey:e,contentType:m,onProgress:q(V.length,k),signal:c,integration:u,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})))])}).then(([A])=>gl(A,{publicKey:e,baseURL:o,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g})).then(A=>A.isReady?A:ki(A.uuid,{publicKey:e,baseURL:o,source:d,integration:u,userAgent:p,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(A=>new st(A,{baseCDN:x}))};async function ha(i,{publicKey:e,fileName:t,baseURL:r=I.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,contentType:g,multipartMinFileSize:m,multipartChunkSize:_,maxConcurrentRequests:w,baseCDN:x=I.baseCDN,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,pusherKey:j,metadata:q}){if(nt(i)){const A=await ua(i);return Sl(A,m)?Ml(i,{publicKey:e,contentType:g,multipartChunkSize:_,fileSize:A,fileName:t,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,maxConcurrentRequests:w,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x,metadata:q}):xl(i,{publicKey:e,fileName:t,contentType:g,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x,metadata:q})}if(Ii(i))return Il(i,{publicKey:e,fileName:t,baseURL:r,baseCDN:x,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,pusherKey:j,metadata:q});if(da(i))return bl(i,{publicKey:e,fileName:t,baseURL:r,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:x});throw new TypeError(`File uploading from "${i}" is not supported`)}class Pl{uuid;filesCount;totalSize;isStored;isImage;cdnUrl;files;createdAt;storedAt=null;constructor(e,{baseCDN:t=I.baseCDN}={}){this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((o,a)=>o+a.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(o=>o.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(o=>new st(o,{baseCDN:t})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const Rl=i=>{for(const e of i)if(!nt(e))return!1;return!0},Dl=i=>{for(const e of i)if(!da(e))return!1;return!0},zl=i=>{for(const e of i)if(!Ii(e))return!1;return!0};function Fl(i,{publicKey:e,fileName:t,baseURL:r=I.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,contentType:g,multipartChunkSize:m=I.multipartChunkSize,baseCDN:_=I.baseCDN,checkForUrlDuplicates:w,saveUrlForRecurrentUploads:x,jsonpCallback:b}){if(!Rl(i)&&!zl(i)&&!Dl(i))throw new TypeError(`Group uploading from "${i}" is not supported`);let D,j=!0;const q=i.length,A=(V,h)=>{if(!c)return;D||(D=Array(V).fill(0));const v=k=>k.reduce((S,P)=>S+P)/V;return k=>{if(!k.isComputable||!j){j=!1,c({isComputable:!1});return}D[h]=k.value,c({isComputable:!0,value:v(D)})}};return Promise.all(i.map((V,h)=>nt(V)||Ii(V)?ha(V,{publicKey:e,fileName:t,baseURL:r,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:A(q,h),source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,contentType:g,multipartChunkSize:m,baseCDN:_,checkForUrlDuplicates:w,saveUrlForRecurrentUploads:x}).then(v=>v.uuid):V)).then(V=>hl(V,{publicKey:e,baseURL:r,jsonpCallback:b,secureSignature:o,secureExpire:a,signal:s,source:l,integration:d,userAgent:u,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f}).then(h=>new Pl(h,{baseCDN:_})).then(h=>(c&&c({isComputable:!0,value:1}),h)))}class Vl{_concurrency=1;_pending=[];_running=0;_resolvers=new Map;_rejectors=new Map;constructor(e){this._concurrency=e}run(){const e=this._concurrency-this._running;for(let t=0;t<e;t++){const r=this._pending.shift();if(!r)return;const o=this._resolvers.get(r),a=this._rejectors.get(r);if(!o||!a)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this.run()}).then(n=>o(n)).catch(n=>a(n))}}add(e,{autoRun:t}={autoRun:!0}){return new Promise((r,o)=>{this._resolvers.set(e,r),this._rejectors.set(e,o),this._pending.push(e),t&&this.run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this.run()}get concurrency(){return this._concurrency}}const pa=()=>({}),fa=i=>({...pa(),"*currentActivity":null,"*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{i.modalManager.close(i.$["*currentActivity"]),i.set$({"*currentActivity":null})}}),ga=i=>({...fa(i),"*commonProgress":0,"*uploadList":[],"*uploadQueue":new Vl(1),"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set,"*secureUploadsManager":null});var Ti={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"{{count}} of {{total}} selected","select-all":"Select all","deselect-all":"Deselect all","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-mobile-video-camera":"Video","src-type-mobile-photo-camera":"Photo","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-ngdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"You\u2019ve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"You\u2019ve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error occurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded.","file-item-edit-button":"Edit","file-item-remove-button":"Remove","a11y-editor-tab-filters":"Filters","a11y-editor-tab-tuning":"Tuning","a11y-editor-tab-crop":"Crop","a11y-activity-header-button-close":"Close",flip:"Flip",mirror:"Mirror","a11y-cloud-editor-apply-filter":"Apply {{name}} filter","a11y-cloud-editor-apply-crop":"Apply {{name}} operation","a11y-cloud-editor-apply-tuning":"Apply {{name}} tuning",finished:"Finished",failed:"Failed",uploading:"Uploading",idle:"Idle","a11y-file-item-status":"File {{fileName}} in status {{status}}","waiting-for":"Waiting for {{source}}",queued:"Queued"};const br=new Map,Si=new Map,ma=(i,e)=>{br.has(i)&&console.log(`Locale ${i} is already defined. Overwriting...`),br.set(i,{...Ti,...e})},Nl=(i,e)=>{Si.set(i,e)},xa=(i,e)=>{typeof e=="function"?Nl(i,e):ma(i,e)},Bl=async i=>{if(!br.has(i)){if(!Si.has(i))throw new Error(`Locale ${i} is not defined`);const t=await Si.get(i)();ma(i,t)}return br.get(i)};xa("en",Ti);const Se=i=>`*l10n/${i}`,jl="en";class Hl{_blockInstance=null;_localeName="";_callbacks=new Set;_boundBlocks=new Map;constructor(e){this._blockInstance=e;for(let[t,r]of Object.entries(Ti)){const o=this._blockInstance.has(Se(t))?!this._blockInstance.$[Se(t)]:!0;this._blockInstance.add(Se(t),r,o)}setTimeout(()=>{e.subConfigValue("localeName",async t=>{if(!this._blockInstance||!t)return;this._localeName=t;const r=await Bl(t);if(t!==jl&&this._localeName!==t)return;const o=this._blockInstance.cfg.localeDefinitionOverride?.[t];for(const[a,n]of Object.entries(r)){const s=o?.[a];this._blockInstance.add(Se(a),s??n,!0);for(const c of this._callbacks)c()}}),e.subConfigValue("localeDefinitionOverride",t=>{if(!t)return;const r=t[this._localeName];if(r)for(const[o,a]of Object.entries(r)){this._blockInstance?.add(Se(o),a,!0);for(const n of this._callbacks)n()}})})}onLocaleChange(e){const t=ce(e,0);return this._callbacks.add(t),()=>{this._callbacks.delete(t)}}bindL10n(e,t,r){e.$[t]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),this._boundBlocks.get(e)?.get(t)?.();const o=this.onLocaleChange(()=>{e.$[t]=r()});this._boundBlocks.get(e)?.set(t,o)}destroyL10nBindings(e){const t=this._boundBlocks.get(e);if(t){for(const r of t.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function Gl(i,e){[...i.querySelectorAll("[l10n]")].forEach(t=>{let r=t.getAttribute("l10n");if(!r)return;const o=r.split(";");for(const a of o)a&&Wl(t,a,e)})}const Wl=(i,e,t)=>{let r="textContent",o=!1;if(e.includes(":")){const s=e.split(":");r=s[0],e=s[1],r.startsWith("@")&&(r=r.slice(1),o=!0)}const a=e;t.has(a)&&t.sub(a,s=>{if(!s)return;t.l10nProcessorSubs.has(a)||t.l10nProcessorSubs.set(a,new Set);const c=t.l10nProcessorSubs.get(a);c?.forEach(u=>{u.remove(),c.delete(u),t.allSubs.delete(u)});const l=Se(s).replace("*","");t.nodeCtx.has(l)||t.nodeCtx.add(l,s);const d=t.nodeCtx.sub(l,()=>{i[r]=t.l10n(s)});c?.add(d),t.allSubs.add(d),i.removeAttribute("l10n")});const n=Se(e);t.has(n)||t.add(n,""),t.sub(n,()=>{e=e,o?i.setAttribute(r,t.l10n(e)):i[r]=t.l10n(e)}),i.removeAttribute("l10n")},le=i=>`*cfg/${i}`,ql={button:["toolbar"],checkbox:["toolbar"],menuitem:["menu","menubar"],option:["listbox"],tab:["tablist"]};function wt(i,e){e.tabIndex=0,e.focus(),i.tabIndex=-1}function $i(i){let e=i.role||i.type||i.tagName;if(!e)return null;let t=ql[e.toLowerCase()];if(!t)return null;for(let r of t){let o=i.closest(`[role=${r}]`);if(o)return o}}function Oi(i,e){return e.role==="toolbar"?Xl(e):e.querySelectorAll(`[role=${i.role}]`)}function Xl(i){return[...i.querySelectorAll("*")].filter(t=>t.role==="button"||t.type==="button"||t.role==="checkbox"||t.type==="checkbox")}function Zl(i){let e=i.getAttribute("aria-orientation");if(e==="vertical")return!1;if(e==="horizontal")return!0;let t=i.role;return t==="menubar"||t==="tablist"||t==="toolbar"}function Yl(i){return e=>{let t=!1,r=300,o=0,a="";function n(u){let p=$i(u.target);if(!p){s();return}let f=Oi(u.target,p),g=Array.from(f).indexOf(u.target),m="ArrowDown",_="ArrowUp";if(Zl(p)&&(e.document.dir==="rtl"?(m="ArrowLeft",_="ArrowRight"):(m="ArrowRight",_="ArrowLeft")),u.key===m)u.preventDefault(),wt(u.target,f[g+1]||f[0]);else if(u.key===_)u.preventDefault(),wt(u.target,f[g-1]||f[f.length-1]);else if(u.key==="Home")u.preventDefault(),wt(u.target,f[0]);else if(u.key==="End")u.preventDefault(),wt(u.target,f[f.length-1]);else if(u.key.length===1&&p.role!=="tablist"){let w=Date.now();w-o<=r?a+=u.key.toLowerCase():a=u.key.toLowerCase(),o=w;let x=Array.from(f).find(b=>b.textContent?.trim()?.toLowerCase()?.startsWith(a));x&&(u.preventDefault(),wt(u.target,x))}}function s(){t=!1,e.removeEventListener("keydown",n)}function c(u){let p=$i(u.target);if(p){t||(t=!0,e.addEventListener("keydown",n));let f=Oi(u.target,p);for(let g of f)g!==u.target&&g.setAttribute("tabindex",-1)}else t&&s()}function l(u){(!u.relatedTarget||u.relatedTarget===e.document)&&s()}function d(u){let p=$i(u.target);if(p){let f=Oi(u.target,p);for(let g of f)g!==u.target&&g.setAttribute("tabindex",-1);u.target.setAttribute("tabindex",0)}}return e.addEventListener("click",d),e.addEventListener("focusin",c),e.addEventListener("focusout",l),()=>{s(),e.removeEventListener("click",d),e.removeEventListener("focusin",c),e.removeEventListener("focusout",l)}}}function Kl(){return i=>{let e,t;function r(a){if(a.target.getAttribute("aria-hidden")==="true"){e=a.target,e.setAttribute("aria-hidden","false"),t=e.hidden,t&&(e.hidden=!1);let n=a.target.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');n&&(n.tabIndex=0)}}function o(a){e&&e.contains(a.target)&&(!a.relatedTarget||!e.contains(a.relatedTarget))&&(a.target.tabIndex=-1,e.setAttribute("aria-hidden","true"),t&&(e.hidden=!0),e=null)}return i.addEventListener("keyuxJump",r),i.addEventListener("focusout",o),()=>{i.removeEventListener("keyuxJump",r),i.removeEventListener("focusout",o)}}}function Jl(){return i=>{let e=[];function t(c){let l=i.document.activeElement;l&&l!==i.document.body&&e.push(new WeakRef(l)),c.focus({focusVisible:!0})}function r(){let c=e.pop();if(!c){i.document.activeElement.blur();return}let l=c.deref();l&&l.isConnected?l.focus():r()}let o=0,a;function n(c){clearInterval(a);let l=c.getAttribute("aria-controls");a=setInterval(()=>{if(o++>50){clearInterval(a);return}let d=i.document.getElementById(l);if(d){let u=d.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');u&&(clearInterval(a),d.dispatchEvent(new i.CustomEvent("keyuxJump",{bubbles:!0})),t(u))}},50)}function s(c){c.target.getAttribute("aria-controls")&&c.key==="Enter"&&n(c.target),c.key==="Escape"&&r()}return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}}}function Ql(i){let e,t=i.split(" "),r;function o(s){s.key==="Enter"&&(s.target.tagName==="BUTTON"||s.target.tagName==="A")&&(a(),s.target.classList.add(...t),e=s.target,r=s.target)}function a(){e&&e.classList.remove(...t),r=null}function n(s){s.clientX===0&&s.clientY===0&&r!==s.target&&(a(),s.target.classList.add(...t),e=s.target)}return s=>(s.addEventListener("click",n),s.addEventListener("keydown",o),s.addEventListener("keyup",a),()=>{s.removeEventListener("click",n),s.removeEventListener("keydown",o),s.removeEventListener("keyup",a)})}function eu(i,e){let t=e.map(r=>r(i));return()=>{t.forEach(r=>r())}}class tu{_listeners=new Map;_scope=[];addEventListener(e,t){const r=o=>{const a=o.target;a&&this._scope.some(n=>n===o.target||n.contains(a))&&t(o)};this._listeners.set(t,r),window.addEventListener(e,r)}removeEventListener(e,t){const r=this._listeners.get(t);r&&window.removeEventListener(e,r),this._listeners.delete(t)}get CustomEvent(){return window.CustomEvent}get document(){return window.document}get navigator(){return window.navigator}registerScope(e){this._scope.push(e)}destroy(){this._scope=[],this._listeners.forEach((e,t)=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),this._listeners.delete(t)})}}class ru{_destroyKeyUX;_scopedWindow;constructor(){this._scopedWindow=new tu,this._destroyKeyUX=eu(this._scopedWindow,[Yl(),Ql("is-pressed"),Jl(),Kl()])}registerBlock(e){this._scopedWindow.registerScope(e)}destroy(){this._destroyKeyUX?.(),this._scopedWindow.destroy()}}const Y=Object.freeze({ADD:"modal:add",DELETE:"modal:delete",OPEN:"modal:open",CLOSE:"modal:close",CLOSE_ALL:"modal:closeAll",DESTROY:"modal:destroy"});class iu{_modals=new Map;_activeModals=new Set;_subscribers=new Map;constructor(e){this._block=e}_debugPrint(...e){this._block.debugPrint("[modal-manager]",...e)}registerModal(e,t){this._modals.set(e,t),this._notify(Y.ADD,{id:e,modal:t})}deleteModal(e){if(!this._modals.has(e))return!1;const t=this._modals.get(e);return this._modals.delete(e),this._activeModals.delete(e),this._notify(Y.DELETE,{id:e,modal:t}),!0}open(e){if(!this._modals.has(e))return this._debugPrint(`Modal with ID "${e}" not found`),!1;const t=this._modals.get(e);return this._activeModals.add(e),this._notify(Y.OPEN,{modal:t,id:e}),!0}close(e){if(!this._modals.has(e)||!this._activeModals.has(e))return this._debugPrint(`Modal with ID "${e}" not found or not active`),!1;const t=this._modals.get(e);return this._activeModals.delete(e),this._notify(Y.CLOSE,{id:e,modal:t}),!0}toggle(e){return this._modals.has(e)?this._activeModals.has(e)?this.close(e):this.open(e):(this._debugPrint(`Modal with ID "${e}" not found`),!1)}get hasActiveModals(){return this._activeModals.size>0}back(){if(this._activeModals.size===0)return this._debugPrint("No active modals to go back from"),!1;const e=Array.from(this._activeModals).pop();return this.close(e)}closeAll(){const e=this._activeModals.size;return this._activeModals.clear(),this._notify(Y.CLOSE_ALL,{}),e}subscribe(e,t){return this._subscribers.has(e)||this._subscribers.set(e,new Set),this._subscribers.get(e)?.add(t),()=>this.unsubscribe(e,t)}unsubscribe(e,t){this._subscribers.has(e)&&this._subscribers.get(e)?.delete(t)}_notify(e,t){if(this._subscribers.has(e))for(const r of this._subscribers.get(e)??new Set)try{r(t)}catch(o){this._debugPrint("Error in modal subscriber:",o)}}destroy(){this.closeAll(),this._modals.clear(),this._subscribers.clear(),this._notify(Y.DESTROY,{})}}function ou(i,e){const t=i.querySelectorAll("[data-testid]");if(t.length===0)return;const r=new WeakMap;for(const o of t){const a=o.getAttribute("data-testid");a&&r.set(o,a)}e.subConfigValue("testMode",o=>{if(!o){for(const n of t)n.removeAttribute("data-testid");return}const a=e.testId;for(const n of t){const s=r.get(n);s&&n.setAttribute("data-testid",`${a}--${s}`)}})}const au="uc-";class B extends vt{static StateConsumerScope=null;static styleAttrs=[];requireCtxName=!1;activityType=null;init$=pa();l10n(e,t={}){if(!e)return"";let r=this.$[Se(e)]||e,o=Fc(r);for(let n of o)t[n.variable]=this.pluralize(n.pluralKey,Number(t[n.countVariable]));return yi(r,t)}pluralize(e,t){const r=this.l10n("locale-id")||"en",o=Yo(r,t);return this.l10n(`${e}__${o}`)}bindL10n(e,t){this.localeManager?.bindL10n(this,e,t)}constructor(){super(),this.l10nProcessorSubs=new Map,this.addTemplateProcessor(Gl),this.addTemplateProcessor(ou)}emit(e,t,r){const o=this.has("*eventEmitter")&&this.$["*eventEmitter"];o&&o.emit(e,t,r)}hasBlockInCtx(e){for(let t of this.blocksRegistry)if(e(t))return!0;return!1}setOrAddState(e,t){this.add$({[e]:t},!0)}connectedCallback(){this.constructor.styleAttrs.forEach(t=>{this.setAttribute(t,"")}),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?Vc({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),Zo.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),Zo.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new Rc(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new Hl(this)),this.has("*a11y")||this.add("*a11y",new ru),this.has("*modalManager")||this.add("*modalManager",new iu(this)),this.sub(Se("locale-id"),t=>{const r=Dc(t);this.style.direction=r==="ltr"?"":r}),this.subConfigValue("testMode",t=>{if(!t||!this.testId){this.removeAttribute("data-testid");return}this.setAttribute("data-testid",this.testId)})}get testId(){return window.customElements.getName(this.constructor)}get modalManager(){return this.has("*modalManager")&&this.$["*modalManager"]}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}get a11y(){return this.has("*a11y")?this.$["*a11y"]:null}get blocksRegistry(){return this.$["*blocksRegistry"]}destroyCallback(){super.destroyCallback();let e=this.blocksRegistry;e?.delete(this),this.localeManager?.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,L.deleteCtx(this),e?.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){L.deleteCtx(this.ctxName),this.localeManager?.destroy(),this.modalManager&&this.modalManager?.destroy()}async proxyUrl(e){if(this.cfg.secureDeliveryProxy&&this.cfg.secureDeliveryProxyUrlResolver&&console.warn("Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used."),this.cfg.secureDeliveryProxyUrlResolver)try{return await this.cfg.secureDeliveryProxyUrlResolver(e,{uuid:Fo(e),cdnUrlModifiers:Vo(e),fileName:bi(e)})}catch(t){return console.error("Failed to resolve secure delivery proxy URL. Falling back to the default URL.",t),e}return this.cfg.secureDeliveryProxy?yi(this.cfg.secureDeliveryProxy,{previewUrl:e},{transform:t=>window.encodeURIComponent(t)}):e}get cfg(){if(!this.__cfgProxy){let e=Object.create(null);this.__cfgProxy=new Proxy(e,{set:(t,r,o)=>{if(typeof r!="string")return!1;const a=le(r);return this.has(a)||this.add(a,Re[r]),this.$[a]=o,!0},get:(t,r)=>{const o=le(r);return this.has(o)||this.add(o,Re[r]),this.$[le(r)]}})}return this.__cfgProxy}subConfigValue(e,t){const r=le(e);this.has(r)||this.add(r,Re[e]),this.sub(r,t)}debugPrint(...e){if(!this.cfg.debug)return;let t=e;if(typeof e?.[0]=="function"){const r=e[0];t=r()}console.log(`[${this.ctxName}]`,...t)}static reg(e){if(!e){super.reg();return}e.startsWith(au)&&super.reg(e)}}var nu="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-camera-full' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M2 4.667a2 2 0 0 0-2 2V16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6.667a2 2 0 0 0-2-2h-2.667l-2-2.667H6.667l-2 2.667H2Zm8 10a3.667 3.667 0 1 0 0-7.334 3.667 3.667 0 0 0 0 7.334Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0v6.469a4.5 4.5 0 1 1-9 0V4.781Zm4.5-3a3 3 0 0 0-3 3v6.469a3 3 0 1 0 6 0V4.781a3 3 0 0 0-3-3Zm-8.156 8.11a.75.75 0 0 1 .75.75 7.406 7.406 0 1 0 14.812 0 .75.75 0 0 1 1.5 0 8.907 8.907 0 0 1-8.156 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.907 8.907 0 0 1-8.156-8.875.75.75 0 0 1 .75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone-mute' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0V6l3.524-3.524a.75.75 0 1 1 1.061 1.06L5.036 19.585a.75.75 0 0 1-1.06-1.06l1.656-1.657a8.88 8.88 0 0 1-2.538-6.227.75.75 0 0 1 1.5 0c0 2.009.8 3.83 2.1 5.166l1.771-1.772A4.483 4.483 0 0 1 7.5 11.25V4.781Zm2.037 8.182L15 7.5V4.781a3 3 0 1 0-6 0v6.469c0 .637.198 1.227.537 1.713Zm10.62-3.072a.75.75 0 0 1 .75.75 8.907 8.907 0 0 1-8.157 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.855 8.855 0 0 1-3.035-.811.75.75 0 1 1 .638-1.358 7.406 7.406 0 0 0 10.553-6.707.75.75 0 0 1 .75-.75ZM15 10.81a.75.75 0 0 1 1.5 0v.439a4.5 4.5 0 0 1-5 4.473.75.75 0 1 1 .166-1.491A3 3 0 0 0 15 11.25v-.44Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-mobile-photo-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-mobile-video-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M0 6.75a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v1.078L22.873 5A.75.75 0 0 1 24 5.648v12.704a.75.75 0 0 1-1.123.65L18 16.207v1.043a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V6.75Zm18 7.728 4.5 2.58V6.95L18 9.562v4.916ZM16.5 6.75a1.5 1.5 0 0 0-1.5-1.5H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5V6.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-ngdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-pause' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' d='M1 0h2.5v10H1zM6.5 0H9v10H6.5z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-play' xmlns='http://www.w3.org/2000/svg'><path d='m1 0 9 5-9 5V0Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol fill='none' viewBox='0 0 20 20' id='uc-icon-square' xmlns='http://www.w3.org/2000/svg'><rect width='20' height='20' rx='4' fill='#fff'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-video-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M0 6.75a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v1.078L22.873 5A.75.75 0 0 1 24 5.648v12.704a.75.75 0 0 1-1.123.65L18 16.207v1.043a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V6.75Zm18 7.728 4.5 2.58V6.95L18 9.562v4.916ZM16.5 6.75a1.5 1.5 0 0 0-1.5-1.5H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5V6.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-video-camera-full' xmlns='http://www.w3.org/2000/svg'><path d='M2 3.333a2 2 0 0 0-2 2v9.334a2 2 0 0 0 2 2h10.938a2 2 0 0 0 2-2v-2.013L20 15.646V4.354l-5.063 3.03v-2.05a2 2 0 0 0-2-2H2Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol></svg>";class vr extends B{static styleAttrs=["uc-wgt-common"];requireCtxName=!0;init$=ga(this);_template=null;initCallback(){super.initCallback(),this.a11y?.registerBlock(this)}static set template(e){this._template=nu+e+"<slot></slot>"}static get template(){return this._template}}const ba="active",kt="___ACTIVITY_IS_ACTIVE___";class y extends B{historyTracked=!1;init$=fa(this);_debouncedHistoryFlush=ce(this._historyFlush.bind(this),10);_deactivate(){let e=y._activityCallbacks.get(this);this[kt]=!1,this.removeAttribute(ba),e?.deactivateCallback?.()}_activate(){let e=y._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[kt]=!0,this.setAttribute(ba,""),e?.activateCallback?.(),this._debouncedHistoryFlush(),this.emit(N.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",e=>{try{this.activityType!==e&&this[kt]?this._deactivate():this.activityType===e&&!this[kt]&&this._activate()}catch(t){console.error(`Error in activity "${this.activityType}". `,t),this.$["*currentActivity"]=this.$["*history"][this.$["*history"].length-1]??null}e||(this.$["*history"]=[])}))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e[e.length-1]!==this.activityType&&e.push(this.activityType),this.$["*history"]=e)}_isActivityRegistered(){return this.activityType&&y._activityCallbacks.has(this)}static _activityCallbacks=new Map;get isActivityActive(){return this[kt]}get couldOpenActivity(){return!0}registerActivity(e,t={}){const{onActivate:r,onDeactivate:o}=t;y._activityCallbacks.set(this,{activateCallback:r,deactivateCallback:o})}unregisterActivity(){this.isActivityActive&&this._deactivate(),y._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const e=this.$["*currentActivity"];!![...this.blocksRegistry].find(r=>r instanceof y&&r.activityType===e)||(this.$["*currentActivity"]=null,this.modalManager.closeAll())}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let t=e.pop();for(;t===this.activityType;)t=e.pop();let r=!!t;t&&(r=[...this.blocksRegistry].find(a=>a.activityType===t)?.couldOpenActivity??!1),t=r?t:void 0,t&&this.modalManager.open(t),this.$["*currentActivity"]=t,this.$["*history"]=e,t||this.modalManager.closeAll()}}}y.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external"});const su=20,Li=24,Ct=34,va=3,_e=va/2,Xe=1,yr=100/3,E=1,ya=24,cu=6;function Ze(i,e){for(let t in e)i.setAttributeNS(null,t,e[t].toString())}function ge(i,e={}){let t=document.createElementNS("http://www.w3.org/2000/svg",i);return Ze(t,e),t}function lu(i,e,t){let{x:r,y:o,width:a,height:n}=i,s=e.includes("w")?0:1,c=e.includes("n")?0:1,l=[-1,1][s],d=[-1,1][c],u=[r+s*a+_e*l,o+c*n+_e*d-Li*t*d],p=[r+s*a+_e*l,o+c*n+_e*d],f=[r+s*a-Li*t*l+_e*l,o+c*n+_e*d];return{d:`M ${u[0]} ${u[1]} L ${p[0]} ${p[1]} L ${f[0]} ${f[1]}`,center:p}}function uu(i,e,t){let{x:r,y:o,width:a,height:n}=i,s=["n","s"].includes(e)?.5:{w:0,e:1}[e],c=["w","e"].includes(e)?.5:{n:0,s:1}[e],l=[-1,1][s],d=[-1,1][c],u,p;["n","s"].includes(e)?(u=[r+s*a-Ct*t/2,o+c*n+_e*d],p=[r+s*a+Ct*t/2,o+c*n+_e*d]):(u=[r+s*a+_e*l,o+c*n-Ct*t/2],p=[r+s*a+_e*l,o+c*n+Ct*t/2]);let f=`M ${u[0]} ${u[1]} L ${p[0]} ${p[1]}`,g=[p[0]-(p[0]-u[0])/2,p[1]-(p[1]-u[1])/2];return{d:f,center:g}}function du(i){return i===""?"move":["e","w"].includes(i)?"ew-resize":["n","s"].includes(i)?"ns-resize":["nw","se"].includes(i)?"nwse-resize":"nesw-resize"}function hu({rect:i,delta:[e,t],imageBox:r}){return _r({...i,x:i.x+e,y:i.y+t},r)}function _r(i,e){let{x:t}=i,{y:r}=i;return i.x<e.x?t=e.x:i.x+i.width>e.x+e.width&&(t=e.x+e.width-i.width),i.y<e.y?r=e.y:i.y+i.height>e.y+e.height&&(r=e.y+e.height-i.height),{...i,x:t,y:r}}function pu({rect:i,delta:e,aspectRatio:t,imageBox:r}){const[,o]=e;let{y:a,width:n,height:s}=i;a+=o,s-=o,t&&(n=s*t);let c=i.x+i.width/2-n/2;return a<=r.y&&(a=r.y,s=i.y+i.height-a,t&&(n=s*t,c=i.x+i.width/2-n/2)),c<=r.x&&(c=r.x,a=i.y+i.height-s),c+n>=r.x+r.width&&(c=Math.max(r.x,r.x+r.width-n),n=r.x+r.width-c,t&&(s=n/t),a=i.y+i.height-s),s<E&&(s=E,t&&(n=s*t,c=i.x+i.width/2-n/2),a=i.y+i.height-s),n<E&&(n=E,t&&(s=n/t,c=i.x+i.width/2-n/2),a=i.y+i.height-s),{x:c,y:a,width:n,height:s}}function fu({rect:i,delta:e,aspectRatio:t,imageBox:r}){const[o]=e;let{x:a,width:n,height:s}=i;a+=o,n-=o,t&&(s=n/t);let c=i.y+i.height/2-s/2;return a<=r.x&&(a=r.x,n=i.x+i.width-a,t&&(s=n/t,c=i.y+i.height/2-s/2)),c<=r.y&&(c=r.y,a=i.x+i.width-n),c+s>=r.y+r.height&&(c=Math.max(r.y,r.y+r.height-s),s=r.y+r.height-c,t&&(n=s*t),a=i.x+i.width-n),s<E&&(s=E,t&&(n=s*t),c=i.y+i.height/2-s/2,a=i.x+i.width-n),n<E&&(n=E,t&&(s=n/t),c=i.y+i.height/2-s/2,a=i.x+i.width-n),{x:a,y:c,width:n,height:s}}function gu({rect:i,delta:e,aspectRatio:t,imageBox:r}){const[,o]=e;let{y:a,width:n,height:s}=i;s+=o,t&&(n=s*t);let c=i.x+i.width/2-n/2;return a+s>=r.y+r.height&&(s=r.y+r.height-a,t&&(n=s*t),c=i.x+i.width/2-n/2),c<=r.x&&(c=r.x,a=i.y),c+n>=r.x+r.width&&(c=Math.max(r.x,r.x+r.width-n),n=r.x+r.width-c,t&&(s=n/t),a=i.y),s<E&&(s=E,t&&(n=s*t),c=i.x+i.width/2-n/2),n<E&&(n=E,t&&(s=n/t),c=i.x+i.width/2-n/2),{x:c,y:a,width:n,height:s}}function mu({rect:i,delta:e,aspectRatio:t,imageBox:r}){const[o]=e;let{x:a,width:n,height:s}=i;n+=o,t&&(s=n/t);let c=i.y+i.height/2-s/2;return a+n>=r.x+r.width&&(n=r.x+r.width-a,t&&(s=n/t),c=i.y+i.height/2-s/2),c<=r.y&&(c=r.y,a=i.x),c+s>=r.y+r.height&&(c=Math.max(r.y,r.y+r.height-s),s=r.y+r.height-c,t&&(n=s*t),a=i.x),s<E&&(s=E,t&&(n=s*t),c=i.y+i.height/2-s/2),n<E&&(n=E,t&&(s=n/t),c=i.y+i.height/2-s/2),{x:a,y:c,width:n,height:s}}function xu({rect:i,delta:e,aspectRatio:t,imageBox:r}){let[o,a]=e,{x:n,y:s,width:c,height:l}=i;return n+o<r.x&&(o=r.x-n),s+a<r.y&&(a=r.y-s),n+=o,c-=o,s+=a,l-=a,t&&Math.abs(c/l)>t?(a=c/t-l,l+=a,s-=a,s<=r.y&&(l=l-(r.y-s),c=l*t,n=i.x+i.width-c,s=r.y)):t&&(o=l*t-c,c=c+o,n-=o,n<=r.x&&(c=c-(r.x-n),l=c/t,n=r.x,s=i.y+i.height-l)),l<E&&(l=E,t&&(c=l*t),n=i.x+i.width-c,s=i.y+i.height-l),c<E&&(c=E,t&&(l=c/t),n=i.x+i.width-c,s=i.y+i.height-l),{x:n,y:s,width:c,height:l}}function bu({rect:i,delta:e,aspectRatio:t,imageBox:r}){let[o,a]=e,{x:n,y:s,width:c,height:l}=i;return n+c+o>r.x+r.width&&(o=r.x+r.width-n-c),s+a<r.y&&(a=r.y-s),c+=o,s+=a,l-=a,t&&Math.abs(c/l)>t?(a=c/t-l,l+=a,s-=a,s<=r.y&&(l=l-(r.y-s),c=l*t,n=i.x,s=r.y)):t&&(o=l*t-c,c+=o,n+c>=r.x+r.width&&(c=r.x+r.width-n,l=c/t,n=r.x+r.width-c,s=i.y+i.height-l)),l<E&&(l=E,t&&(c=l*t),s=i.y+i.height-l),c<E&&(c=E,t&&(l=c/t),s=i.y+i.height-l),{x:n,y:s,width:c,height:l}}function vu({rect:i,delta:e,aspectRatio:t,imageBox:r}){let[o,a]=e,{x:n,y:s,width:c,height:l}=i;return n+o<r.x&&(o=r.x-n),s+l+a>r.y+r.height&&(a=r.y+r.height-s-l),n+=o,c-=o,l+=a,t&&Math.abs(c/l)>t?(a=c/t-l,l+=a,s+l>=r.y+r.height&&(l=r.y+r.height-s,c=l*t,n=i.x+i.width-c,s=r.y+r.height-l)):t&&(o=l*t-c,c+=o,n-=o,n<=r.x&&(c=c-(r.x-n),l=c/t,n=r.x,s=i.y)),l<E&&(l=E,t&&(c=l*t),n=i.x+i.width-c),c<E&&(c=E,t&&(l=c/t),n=i.x+i.width-c),{x:n,y:s,width:c,height:l}}function yu({rect:i,delta:e,aspectRatio:t,imageBox:r}){let[o,a]=e,{x:n,y:s,width:c,height:l}=i;return n+c+o>r.x+r.width&&(o=r.x+r.width-n-c),s+l+a>r.y+r.height&&(a=r.y+r.height-s-l),c+=o,l+=a,t&&Math.abs(c/l)>t?(a=c/t-l,l+=a,s+l>=r.y+r.height&&(l=r.y+r.height-s,c=l*t,n=i.x,s=r.y+r.height-l)):t&&(o=l*t-c,c+=o,n+c>=r.x+r.width&&(c=r.x+r.width-n,l=c/t,n=r.x+r.width-c,s=i.y)),l<E&&(l=E,t&&(c=l*t)),c<E&&(c=E,t&&(l=c/t)),{x:n,y:s,width:c,height:l}}function _u({direction:i,...e}){switch(i){case"n":return pu(e);case"w":return fu(e);case"s":return gu(e);case"e":return mu(e);case"nw":return xu(e);case"ne":return bu(e);case"sw":return vu(e);case"se":return yu(e);default:return e.rect}}function wu(i,[e,t]){return i.x<=e&&e<=i.x+i.width&&i.y<=t&&t<=i.y+i.height}function ku(i,e){return i.x>=e.x&&i.y>=e.y&&i.x+i.width<=e.x+e.width&&i.y+i.height<=e.y+e.height}function Cu(i,e){return Math.abs(i.width/i.height-e)<.1}function Et({width:i,height:e},t){let r=t/90%2!==0;return{width:r?e:i,height:r?i:e}}function Eu(i,e,t){const r=i/e;let o,a;r>t?(o=Math.round(e*t),a=e):(o=i,a=Math.round(i/t));const n=Math.round((i-o)/2),s=Math.round((e-a)/2);return n+o>i&&(o=i-n),s+a>e&&(a=e-s),{x:n,y:s,width:o,height:a}}function wr(i){return{x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)}}function ct(i,e,t){return Math.min(Math.max(i,e),t)}const _a=i=>{if(!i)return[];const[e,t]=i.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(t)){console.error(`Invalid crop preset: ${i}`);return}return[{type:"aspect-ratio",width:e,height:t}]},kr="blocks",Cr="1.19.4";function Au(i){return ta({...i,libraryName:kr,libraryVersion:Cr})}const wa=i=>Math.floor(i/1e3),Iu=(i,{threshold:e})=>{const{secureExpire:t}=i,r=wa(Date.now()),o=Number(t),a=wa(e);return r+a>=o};class Tu{_block;_secureToken=null;constructor(e){this._block=e}_debugPrint(...e){this._block.debugPrint("[secure-uploads]",...e)}async getSecureToken(){const{secureSignature:e,secureExpire:t,secureUploadsSignatureResolver:r}=this._block.cfg;if((e||t)&&r&&console.warn("Both secureSignature/secureExpire and secureUploadsSignatureResolver are set. secureUploadsSignatureResolver will be used."),r){if(!this._secureToken||Iu(this._secureToken,{threshold:this._block.cfg.secureUploadsExpireThreshold})){this._secureToken?this._debugPrint("Secure signature is expired. Resolving a new one..."):this._debugPrint("Secure signature is not set yet.");try{const o=await r();o?!o.secureSignature||!o.secureExpire?console.error("Secure signature resolver returned an invalid result:",o):(this._debugPrint("Secure signature resolved:",o),this._debugPrint("Secure signature will expire in",new Date(Number(o.secureExpire)*1e3).toISOString()),this._secureToken=o):(this._debugPrint("Secure signature resolver returned nothing."),this._secureToken=null)}catch(o){console.error("Secure signature resolving failed. Falling back to the previous one.",o)}}return this._secureToken}return e&&t?(this._debugPrint("Secure signature and expire are set. Using them...",{secureSignature:e,secureExpire:t}),{secureSignature:e,secureExpire:t}):null}}const ka="[Typed State] Wrong property name: ",Su="[Typed State] Wrong property type: ";class $u{constructor(e,t){this.__typedSchema=e,this.__ctxId=t||sr.generate(),this.__schema=Object.keys(e).reduce((r,o)=>(r[o]=e[o].value,r),{}),this.__data=L.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,t){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(ka+e);return}let r=this.__typedSchema[e],o=t?.constructor===r.type,a=t instanceof r.type,n=r.nullable&&t===null;if(o||a||n){this.__data.pub(e,t);return}console.warn(Su+e)}setMultipleValues(e){for(let[t,r]of Object.entries(e))this.setValue(t,r)}getValue(e){return this.__typedSchema.hasOwnProperty(e)||console.warn(ka+e),this.__data.read(e)}subscribe(e,t){return this.__data.sub(e,t)}remove(){L.deleteCtx(this.__ctxId)}}class Ou{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||sr.generate(),this.__data=L.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let t=Object.create(null);this.__notifyObservers=(r,o)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),t[r]||(t[r]=new Set),t[r].add(o),this.__observeTimeout=window.setTimeout(()=>{Object.keys(t).length!==0&&(this.__propertyObservers.forEach(a=>{a({...t})}),t=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),t=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r?.([...this.__items],e,t)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){this.__collectionObservers?.delete(e)}add(e){let t=new $u(this.__typedSchema);for(let[r,o]of Object.entries(e))t.setValue(r,o);return this.__items.add(t.uid),this.notify(),this.__data.add(t.uid,t),this.__added.add(t),this.__watchList.forEach(r=>{this.__subsMap[t.uid]||(this.__subsMap[t.uid]=[]),this.__subsMap[t.uid].push(t.subscribe(r,()=>{this.__notifyObservers(r,t.uid)}))}),t.uid}read(e){return this.__data.read(e)}readProp(e,t){let r=this.read(e);return r?r.getValue(t):(console.warn(`Item with id ${e} not found`),null)}publishProp(e,t,r){let o=this.read(e);if(!o){console.warn(`Item with id ${e} not found`);return}o.setValue(t,r)}remove(e){let t=this.read(e);t&&this.__removed.add(t),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){this.__propertyObservers?.delete(e)}findItems(e){let t=[];return this.__items.forEach(r=>{let o=this.read(r);o&&e(o)&&t.push(r)}),t}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){L.deleteCtx(this.__ctxId),this.__propertyObservers=new Set,this.__collectionObservers=new Set;for(let e in this.__subsMap)this.__subsMap[e].forEach(t=>{t.remove()}),delete this.__subsMap[e]}}const T=Object.freeze({PHOTO:"photo",VIDEO:"video"}),me=Object.freeze({IDLE:"idle",SHOT:"shot",PLAY:"play",PAUSE:"pause",RESUME:"resume",STOP:"stop",RETAKE:"retake",ACCEPT:"accept"}),Ca=i=>({isVideoRecordingEnabled:Pe(i.cameraModes).includes(T.VIDEO),isPhotoEnabled:Pe(i.cameraModes).includes(T.PHOTO)}),lt=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),Ea=Object.freeze({MOBILE_VIDEO_CAMERA:"mobile-video-camera",MOBILE_PHOTO_CAMERA:"mobile-photo-camera"}),J=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",CAMERA:"camera",EXTERNAL:"external",API:"js-api",URL:"url",DRAW:"draw",...Ea,...lt}),Lu=()=>{const i=navigator.userAgent;return/Macintosh|Windows/.test(i)&&/Version\/[\d\.]+.*Safari/.test(i)&&!/Chrome|Chromium|Edg|OPR/.test(i)},Uu=()=>"capture"in document.createElement("input"),Mu=()=>({safariDesktop:Lu()}),Pu=()=>({htmlMediaCapture:Uu()}),Ru=Mu(),Er=Pu(),Ar="image/*",Aa="video/*",Du=["image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],zu=()=>Ru.safariDesktop?[Ar]:[Ar,...Du],Ui=zu(),Ia=i=>i?i.filter(e=>typeof e=="string").map(e=>Ee(e)).flat():[],Ta=(i,e)=>e.some(t=>t.endsWith("*")?(t=t.replace("*",""),i.startsWith(t)):i===t),Fu=(i,e)=>e.some(t=>t.startsWith(".")?i.toLowerCase().endsWith(t.toLowerCase()):!1),Vu=i=>{let e=i?.type;return e?Ta(e,Ui):!1},Nu=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,Bu=new RegExp(`^/?(${Nu.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),ju=({url:i,cdnBase:e})=>{const t=new URL(e),r=new URL(i);if(t.host!==r.host)return null;const[,o,a,n]=Bu.exec(r.pathname);return{uuid:o,cdnUrlModifiers:a||"",filename:n||null}},Hu=i=>{const e=new Map;return((...t)=>{const r=JSON.stringify(t);if(e.has(r))return e.get(r);const o=i(...t);return e.set(r,o),o})},Sa=new Set;function $a(i){Sa.has(i)||(Sa.add(i),console.warn(i))}function Gu(i){let e=!1;return setTimeout(()=>{e=!0},0),r=>((...o)=>(e&&$a(i),r(...o)))}function Wu(i){const e={progress:()=>i.$["*commonProgress"],errors:()=>i.$["*collectionErrors"],group:()=>i.$["*groupInfo"],totalCount:()=>i.uploadCollection.size,failedCount:()=>t.failedEntries.length,successCount:()=>t.successEntries.length,uploadingCount:()=>t.uploadingEntries.length,status:()=>t.isFailed?"failed":t.isUploading?"uploading":t.isSuccess?"success":"idle",isSuccess:()=>t.allEntries.length>0&&t.errors.length===0&&t.successEntries.length===t.allEntries.length,isUploading:()=>t.allEntries.some(o=>o.status==="uploading"),isFailed:()=>t.errors.length>0||t.failedEntries.length>0,allEntries:()=>i.getOutputData(),successEntries:()=>t.allEntries.filter(o=>o.status==="success"),failedEntries:()=>t.allEntries.filter(o=>o.status==="failed"),uploadingEntries:()=>t.allEntries.filter(o=>o.status==="uploading"),idleEntries:()=>t.allEntries.filter(o=>o.status==="idle")},t={},r=Gu("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[o,a]of Object.entries(e)){const n=o,c=Hu(r(a));Object.defineProperty(t,n,{get:c,enumerable:!0})}return t}class qu{_ctx;constructor(e){this._ctx=e}get _uploadCollection(){return this._ctx.uploadCollection}get cfg(){return this._ctx.cfg}get l10n(){return this._ctx.l10n.bind(this._ctx)}addFileFromUrl=(e,{silent:t,fileName:r,source:o}={})=>{const a=this._uploadCollection.add({externalUrl:e,fileName:r??null,silent:t??!1,source:o??J.API});return this.getOutputItem(a)};addFileFromUuid=(e,{silent:t,fileName:r,source:o}={})=>{const a=this._uploadCollection.add({uuid:e,fileName:r??null,silent:t??!1,source:o??J.API});return this.getOutputItem(a)};addFileFromCdnUrl=(e,{silent:t,fileName:r,source:o}={})=>{const a=ju({url:e,cdnBase:this.cfg.cdnCname});if(!a)throw new Error("Invalid CDN URL");const n=this._uploadCollection.add({uuid:a.uuid,cdnUrl:e,cdnUrlModifiers:a.cdnUrlModifiers,fileName:r??a.filename??null,silent:t??!1,source:o??J.API});return this.getOutputItem(n)};addFileFromObject=(e,{silent:t,fileName:r,source:o,fullPath:a}={})=>{const n=this._uploadCollection.add({file:e,isImage:Vu(e),mimeType:e.type,fileName:r??e.name,fileSize:e.size,silent:t??!1,source:o??J.API,fullPath:a??null});return this.getOutputItem(n)};removeFileByInternalId=e=>{if(!this._uploadCollection.read(e))throw new Error(`File with internalId ${e} not found`);this._uploadCollection.remove(e)};removeAllFiles(){this._uploadCollection.clearAll()}uploadAll=()=>{const e=this._uploadCollection.items().filter(t=>{const r=this._uploadCollection.read(t);return r?!r.getValue("isRemoved")&&!r.getValue("isUploading")&&!r.getValue("fileInfo"):!1});e.length!==0&&(this._ctx.$["*uploadTrigger"]=new Set(e),this._ctx.emit(N.COMMON_UPLOAD_START,this.getOutputCollectionState()))};openSystemDialog=(e={})=>{const t=_t(Ia([this.cfg.accept??"",...this.cfg.imgOnly?Ui:[]])),r="uploadcare-file-input",o=document.createElement("input");if(o.setAttribute(r,""),mi(o,{opacity:0,height:0,width:0,visibility:"hidden",position:"absolute",top:0,left:0}),o.type="file",o.multiple=this.cfg.multiple,e.captureCamera){o.capture=this.cfg.cameraCapture;const{isPhotoEnabled:a,isVideoRecordingEnabled:n}=Ca(this.cfg);e.modeCamera===T.PHOTO&&a?o.accept=Ar:e.modeCamera===T.VIDEO&&n?o.accept=Aa:o.accept=[Ar,n&&Aa].filter(Boolean).join(",")}else o.accept=t;o.addEventListener("change",()=>{o.files&&([...o.files].forEach(a=>this.addFileFromObject(a,{source:e.captureCamera?J.CAMERA:J.LOCAL})),this._ctx.modalManager.open(y.activities.UPLOAD_LIST),this._ctx.$["*currentActivity"]=y.activities.UPLOAD_LIST,o.remove())},{once:!0}),document.querySelectorAll(`[${r}]`).forEach(a=>a.remove()),document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click"))};getOutputItem(e){const t=L.getCtx(e).store,r=t.fileInfo;let o=t.isRemoved?"removed":t.errors.length>0?"failed":t.fileInfo?"success":t.isUploading?"uploading":"idle";return{uuid:r?.uuid??t.uuid??null,internalId:e,name:r?.originalFilename??t.fileName,size:r?.size??t.fileSize,isImage:r?.isImage??t.isImage,mimeType:r?.mimeType??t.mimeType,file:t.file,externalUrl:t.externalUrl,cdnUrlModifiers:t.cdnUrlModifiers,cdnUrl:t.cdnUrl??r?.cdnUrl??null,fullPath:t.fullPath,uploadProgress:t.uploadProgress,fileInfo:r??null,metadata:t.metadata??r?.metadata??null,isSuccess:o==="success",isUploading:o==="uploading",isFailed:o==="failed",isRemoved:o==="removed",errors:t.errors,status:o,source:t?.source}}getOutputCollectionState(){return Wu(this._ctx)}initFlow=(e=!1)=>{if(this._uploadCollection.size>0&&!e)this._ctx.modalManager?.open(y.activities.UPLOAD_LIST),this._ctx.set$({"*currentActivity":y.activities.UPLOAD_LIST});else if(this._sourceList?.length===1){const t=this._sourceList[0];if(t==="local"){this._ctx.$["*currentActivity"]=y.activities.UPLOAD_LIST,this.openSystemDialog();return}if(t==="camera"&&Er.htmlMediaCapture){const{isPhotoEnabled:n,isVideoRecordingEnabled:s}=Ca(this.cfg);if(n&&s){this._ctx.set$({"*currentActivity":y.activities.START_FROM});return}else if(n||s){this.openSystemDialog({captureCamera:!0,modeCamera:n?T.PHOTO:T.VIDEO});return}else this.openSystemDialog({captureCamera:!0,modeCamera:T.PHOTO})}const r=this._ctx.$["*blocksRegistry"],o=n=>"type"in n&&n.type===t;[...r].find(o)?.activate(),this._ctx.$["*currentActivity"]&&this._ctx.modalManager?.open(this._ctx.$["*currentActivity"])}else this._ctx.modalManager?.open(y.activities.START_FROM),this._ctx.set$({"*currentActivity":y.activities.START_FROM})};doneFlow=()=>{this._ctx.set$({"*currentActivity":this._ctx.doneActivity,"*history":this._ctx.doneActivity?[this._ctx.doneActivity]:[]}),this._ctx.$["*currentActivity"]||this._ctx.modalManager.closeAll()};setCurrentActivity=(e,t=void 0)=>{if(this._ctx.hasBlockInCtx(r=>r.activityType===e)){this._ctx.set$({"*currentActivityParams":t??{},"*currentActivity":e});return}console.warn(`Activity type "${e}" not found in the context`)};getCurrentActivity=()=>this._ctx.$["*currentActivity"];setModalState=e=>{if(e&&!this._ctx.$["*currentActivity"]){console.warn(`Can't open modal without current activity. Please use "setCurrentActivity" method first.`);return}e?this._ctx.modalManager?.open(this._ctx.$["*currentActivity"]):(this._ctx.modalManager?.close(this._ctx.$["*currentActivity"]),this._ctx.$["*currentActivity"]=null)};get _sourceList(){let e=[];return this.cfg.sourceList&&(e=Ee(this.cfg.sourceList)),e}}const Xu=(i,e)=>{const t=e.cfg.imgOnly,r=i.isImage;if(!(!t||r)&&!(!i.fileInfo&&i.externalUrl)&&!(!i.fileInfo&&!i.mimeType))return{type:"NOT_AN_IMAGE",message:e.l10n("images-only-accepted"),payload:{entry:i}}},Zu=(i,e)=>{const t=e.cfg.imgOnly,r=e.cfg.accept,o=Ia([...t?Ui:[],r]);if(!o.length)return;const a=i.mimeType,n=i.name;if(!a||!n)return;const s=Ta(a,o),c=Fu(n,o);if(!s&&!c)return{type:"FORBIDDEN_FILE_TYPE",message:e.l10n("file-type-not-allowed"),payload:{entry:i}}},we=1e3,Ye=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),At=i=>Math.ceil(i*100)/100,Yu=(i,e=Ye.AUTO)=>{const t=e===Ye.AUTO;if(e===Ye.BYTE||t&&i<we**1){const r=Yo("en-US",i),o={one:"byte",other:"bytes"}[r];return`${i} ${o}`}return e===Ye.KB||t&&i<we**2?`${At(i/we**1)} KB`:e===Ye.MB||t&&i<we**3?`${At(i/we**2)} MB`:e===Ye.GB||t&&i<we**4?`${At(i/we**3)} GB`:e===Ye.TB||t&&i<we**5?`${At(i/we**4)} TB`:`${At(i/we**5)} PB`},Ku=(i,e)=>{const t=e.cfg.maxLocalFileSizeBytes,r=i.size;if(t&&r&&r>t)return{type:"FILE_SIZE_EXCEEDED",message:e.l10n("files-max-size-limit-error",{maxFileSize:Yu(t)}),payload:{entry:i}}},Ju=(i,e)=>{const{internalId:t}=i,o=e._uploadCollection.read(t)?.getValue("uploadError");if(!o)return;if(o instanceof ne)return{type:"UPLOAD_ERROR",message:o.message,payload:{entry:i,error:o}};if(o instanceof Lt)return{type:"NETWORK_ERROR",message:o.message,payload:{entry:i,error:o}};const a=o instanceof Error?o:new Error("Unknown error",{cause:o});return{type:"UNKNOWN_ERROR",message:a.message,payload:{entry:i,error:a}}},Qu=(i,e)=>{if(i.failedCount>0)return{type:"SOME_FILES_HAS_ERRORS",message:e.l10n("some-files-were-not-uploaded")}},ed=(i,e)=>{const t=i.totalCount,r=e.cfg.multiple?e.cfg.multipleMin:0,o=e.cfg.multiple?e.cfg.multipleMax:1;if(r&&t<r)return{type:"TOO_FEW_FILES",message:e.l10n("files-count-limit-error-too-few",{min:r,max:o,total:t}),payload:{total:t,min:r,max:o}};if(o&&t>o)return{type:"TOO_MANY_FILES",message:e.l10n("files-count-limit-error-too-many",{min:r,max:o,total:t}),payload:{total:t,min:r,max:o}}},Ir={file:"File validator execution has failed",collection:"Collection validator execution has failed",message:"Missing message. We recommend adding message: value."};class td{_blockInstance;_fileValidators=[Xu,Zu,Ku,Ju];_collectionValidators=[ed,Qu];constructor(e){this._blockInstance=e,this._uploadCollection=this._blockInstance.uploadCollection;const t=()=>{this.runFileValidators(),this.runCollectionValidators()};this._blockInstance.subConfigValue("maxLocalFileSizeBytes",t),this._blockInstance.subConfigValue("multipleMin",t),this._blockInstance.subConfigValue("multipleMax",t),this._blockInstance.subConfigValue("multiple",t),this._blockInstance.subConfigValue("imgOnly",t),this._blockInstance.subConfigValue("accept",t)}runFileValidators(e){const t=e??this._uploadCollection.items();for(const r of t){const o=this._uploadCollection.read(r);o&&this._runFileValidatorsForEntry(o)}}runCollectionValidators(){const e=this._blockInstance.api.getOutputCollectionState(),t=[];for(const r of[...this._collectionValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.collectionValidators)])try{const o=r(e,this._blockInstance.api);if(!o)continue;o&&(t.push(o),o.message||console.warn(Ir.message))}catch(o){console.warn(Ir.collection,o)}this._blockInstance.$["*collectionErrors"]=t,t.length>0&&this._blockInstance.emit(N.COMMON_UPLOAD_FAILED,()=>this._blockInstance.api.getOutputCollectionState(),{debounce:!0})}_runFileValidatorsForEntry(e){const t=this._blockInstance.api.getOutputItem(e.uid),r=[];for(const o of[...this._fileValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.fileValidators)])try{const a=o(t,this._blockInstance.api);if(!a)continue;a&&(r.push(a),a.message||console.warn(Ir.message))}catch(a){console.warn(Ir.file,a)}e.setValue("errors",r)}_addCustomTypeToValidators(e){return e.map(t=>(...r)=>{const o=t(...r);return o?{...o,type:"CUSTOM_ERROR"}:void 0})}}const rd=Object.freeze({file:Object.freeze({type:File,value:null,nullable:!0}),externalUrl:Object.freeze({type:String,value:null,nullable:!0}),fileName:Object.freeze({type:String,value:null,nullable:!0}),fileSize:Object.freeze({type:Number,value:null,nullable:!0}),lastModified:Object.freeze({type:Number,value:Date.now()}),uploadProgress:Object.freeze({type:Number,value:0}),uuid:Object.freeze({type:String,value:null,nullable:!0}),isImage:Object.freeze({type:Boolean,value:!1}),mimeType:Object.freeze({type:String,value:null,nullable:!0}),ctxName:Object.freeze({type:String,value:null,nullable:!0}),cdnUrl:Object.freeze({type:String,value:null,nullable:!0}),cdnUrlModifiers:Object.freeze({type:String,value:null,nullable:!0}),fileInfo:Object.freeze({type:st,value:null,nullable:!0}),isUploading:Object.freeze({type:Boolean,value:!1}),abortController:Object.freeze({type:AbortController,value:null,nullable:!0}),thumbUrl:Object.freeze({type:String,value:null,nullable:!0}),silent:Object.freeze({type:Boolean,value:!1}),source:Object.freeze({type:String,value:null,nullable:!0}),fullPath:Object.freeze({type:String,value:null,nullable:!0}),metadata:Object.freeze({type:Object,value:null,nullable:!0}),errors:Object.freeze({type:Array,value:[]}),uploadError:Object.freeze({type:Error,value:null,nullable:!0}),isRemoved:Object.freeze({type:Boolean,value:!1}),isQueued:Object.freeze({type:Boolean,value:!1})});class K extends y{couldBeCtxOwner=!1;isCtxOwner=!1;init$=ga(this);get hasCtxOwner(){return this.hasBlockInCtx(e=>e instanceof K?e.isCtxOwner&&e.isConnected&&e!==this:!1)}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let e=new Ou({typedSchema:rd,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.add("*uploadCollection",e)}this.has("*publicApi")||this.add("*publicApi",new qu(this)),this.has("*validationManager")||this.add("*validationManager",new td(this)),!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}get validationManager(){if(!this.has("*validationManager"))throw new Error("Unexpected error: ValidationManager is not initialized");return this.$["*validationManager"]}get api(){if(!this.has("*publicApi"))throw new Error("Unexpected error: UploaderPublicApi is not initialized");return this.$["*publicApi"]}getAPI(){return this.api}get uploadCollection(){if(!this.has("*uploadCollection"))throw new Error("Unexpected error: TypedCollection is not initialized");return this.$["*uploadCollection"]}destroyCtxCallback(){this._unobserveCollectionProperties?.(),this._unobserveCollection?.(),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}destroyCallback(){super.destroyCallback(),this._flushOutputItems.cancel()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxConcurrentRequests",e=>{this.$["*uploadQueue"].concurrency=Number(e)||1}),this.$["*secureUploadsManager"]||(this.$["*secureUploadsManager"]=new Tu(this))}async _createGroup(e){const t=await this.getUploadClientOptions(),r=e.allEntries.map(s=>s.uuid+(s.cdnUrlModifiers?`/${s.cdnUrlModifiers}`:"")),o=new AbortController,a=await Fl(r,{...t,signal:o.signal});if(this.$["*collectionState"]!==e){o.abort();return}this.$["*groupInfo"]=a;const n=this.api.getOutputCollectionState();this.emit(N.GROUP_CREATED,n),this.emit(N.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=n}_flushOutputItems=ce(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const t=this.api.getOutputCollectionState();this.$["*collectionState"]=t,this.emit(N.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&t.totalCount>0&&t.status==="success"&&this._createGroup(t)},300);_handleCollectionUpdate=(e,t,r)=>{(t.size||r.size)&&(this.$["*groupInfo"]=null),this.validationManager.runFileValidators(),this.validationManager.runCollectionValidators();for(const o of t)o.getValue("silent")||this.emit(N.FILE_ADDED,this.api.getOutputItem(o.uid));for(const o of r){this.$["*uploadTrigger"].delete(o.uid),o.getValue("abortController")?.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0});const a=o?.getValue("thumbUrl");a&&URL.revokeObjectURL(a),this.emit(N.FILE_REMOVED,this.api.getOutputItem(o.uid))}this.$["*uploadList"]=e.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()};_handleCollectionPropertiesUpdate=e=>{this._flushOutputItems();const t=this.uploadCollection,r=[...new Set(Object.entries(e).filter(([o])=>["uploadError","fileInfo"].includes(o)).map(([,o])=>[...o]).flat())];if(r.length>0&&setTimeout(()=>{this.validationManager.runFileValidators(r)}),e.uploadProgress){for(const o of e.uploadProgress){const{isUploading:a,silent:n}=L.getCtx(o).store;a&&!n&&this.emit(N.FILE_UPLOAD_PROGRESS,this.api.getOutputItem(o))}this._flushCommonUploadProgress()}if(e.isUploading)for(const o of e.isUploading){const{isUploading:a,silent:n}=L.getCtx(o).store;a&&!n&&this.emit(N.FILE_UPLOAD_START,this.api.getOutputItem(o))}if(e.fileInfo){for(const o of e.fileInfo){const{fileInfo:a,silent:n}=L.getCtx(o).store;a&&!n&&this.emit(N.FILE_UPLOAD_SUCCESS,this.api.getOutputItem(o))}this.cfg.cropPreset&&this.setInitialCrop(),this.cfg.cloudImageEditorAutoOpen&&this.openCloudImageEditor()}if(e.errors){for(const n of e.errors){const{errors:s}=L.getCtx(n).store;s.length>0&&(this.emit(N.FILE_UPLOAD_FAILED,this.api.getOutputItem(n)),this.emit(N.COMMON_UPLOAD_FAILED,()=>this.api.getOutputCollectionState(),{debounce:!0}))}const o=t.findItems(n=>!!n.getValue("fileInfo")),a=t.findItems(n=>n.getValue("errors").length>0);t.size>0&&a.length===0&&t.size===o.length&&this.$["*collectionErrors"].length===0&&this.emit(N.COMMON_UPLOAD_SUCCESS,this.api.getOutputCollectionState())}e.cdnUrl&&([...e.cdnUrl].filter(a=>!!this.uploadCollection.read(a)?.getValue("cdnUrl")).forEach(a=>{this.emit(N.FILE_URL_CHANGED,this.api.getOutputItem(a))}),this.$["*groupInfo"]=null)};_flushCommonUploadProgress=()=>{let e=0;const r=[...this.$["*uploadTrigger"]].filter(a=>!!this.uploadCollection.read(a));r.forEach(a=>{const n=this.uploadCollection.readProp(a,"uploadProgress");typeof n=="number"&&(e+=n)});const o=r.length?Math.round(e/r.length):0;this.$["*commonProgress"]!==o&&(this.$["*commonProgress"]=o,this.emit(N.COMMON_UPLOAD_PROGRESS,this.api.getOutputCollectionState()))};openCloudImageEditor(){const[e]=this.uploadCollection.findItems(t=>!!t.getValue("fileInfo")&&t.getValue("isImage")).map(t=>this.uploadCollection.read(t));e&&this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(t=>t.activityType===y.activities.CLOUD_IMG_EDIT)&&(this.$["*currentActivityParams"]={internalId:e.uid},this.$["*currentActivity"]=y.activities.CLOUD_IMG_EDIT,this.modalManager.open(y.activities.CLOUD_IMG_EDIT))}setInitialCrop(){const e=_a(this.cfg.cropPreset);if(e){const[t]=e,r=this.uploadCollection.findItems(o=>!!o.getValue("fileInfo")&&o.getValue("isImage")&&!o.getValue("cdnUrlModifiers")?.includes("/crop/")).map(o=>this.uploadCollection.read(o)).filter(Boolean);for(const o of r){const a=o.getValue("fileInfo");if(!a||!a.imageInfo){console.warn("Failed to get image info for entry",o.uid);continue}const{width:n,height:s}=a.imageInfo,c=t.width/t.height,l=Eu(n,s,c),d=Me(`crop/${l.width}x${l.height}/${l.x},${l.y}`,"preview"),u=o.getValue("cdnUrl");if(!u){console.warn("Failed to get cdnUrl for entry",o.uid);continue}o.setMultipleValues({cdnUrlModifiers:d,cdnUrl:pe(u,d)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===y.activities.CLOUD_IMG_EDIT)&&(this.$["*currentActivityParams"]={internalId:o.uid},this.$["*currentActivity"]=y.activities.CLOUD_IMG_EDIT,this.modalManager.open(y.activities.CLOUD_IMG_EDIT))}}}async getMetadataFor(e){const t=this.cfg.metadata||void 0;if(typeof t=="function"){const r=this.api.getOutputItem(e);return await t(r)}return t}async getUploadClientOptions(){const t=await this.$["*secureUploadsManager"].getSecureToken().catch(()=>null);return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:Au,integration:this.cfg.userAgentIntegration,secureSignature:t?.secureSignature,secureExpire:t?.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:this.cfg.retryNetworkErrorMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputData(){return this.uploadCollection.items().map(r=>this.api.getOutputItem(r))}}K.extSrcList=Object.freeze({...lt}),K.sourceTypes=Object.freeze({...J});const Tr=i=>i.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)?.map(e=>e.toLowerCase()).join("-"),F=i=>String(i),ue=i=>{const e=Number(i);if(Number.isNaN(e))throw new Error(`Invalid number: "${i}"`);return e},M=i=>{if(typeof i>"u"||i===null)return!1;if(typeof i=="boolean")return i;if(i==="true"||i==="")return!0;if(i==="false")return!1;throw new Error(`Invalid boolean: "${i}"`)},id=i=>i==="auto"?i:M(i),od=i=>{const e=F(i);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid value: "${e}"`);return e},ad=i=>{const e=F(i);if(!Object.values(T).includes(e))throw new Error(`Invalid value: "${e}"`);return e},nd=i=>{const e=F(i),t=Pe(e);if(t.some(r=>!Object.values(T).includes(r)))throw new Error(`Invalid value: "${JSON.stringify(t)}"`);return e},sd=i=>{if(typeof i=="object"&&!Array.isArray(i)||typeof i=="function")return i;throw new Error("Invalid metadata value. Must be an object or function.")},Oa=i=>{if(typeof i=="object")return i;throw new Error("Invalid value. Must be an object.")},Mi=i=>{if(typeof i=="function")return i;throw new Error("Invalid value. Must be a function.")},La=i=>{if(Array.isArray(i))return i;throw new Error("Must be an array.")},cd=i=>{const e=F(i);if(["grid","list"].includes(e))return e;throw new Error(`Invalid value: "${e}"`)},ld={pubkey:F,multiple:M,multipleMin:ue,multipleMax:ue,confirmUpload:M,imgOnly:M,accept:F,externalSourcesPreferredTypes:F,externalSourcesEmbedCss:F,store:id,cameraMirror:M,cameraCapture:od,sourceList:F,topLevelOrigin:F,maxLocalFileSizeBytes:ue,thumbSize:ue,showEmptyList:M,useLocalImageEditor:M,useCloudImageEditor:M,cloudImageEditorTabs:F,removeCopyright:M,cropPreset:F,imageShrink:F,modalScrollLock:M,modalBackdropStrokes:M,sourceListWrap:M,remoteTabSessionKey:F,cdnCname:F,cdnCnamePrefixed:F,baseUrl:F,socialBaseUrl:F,secureSignature:F,secureExpire:F,secureDeliveryProxy:F,retryThrottledRequestMaxTimes:ue,retryNetworkErrorMaxTimes:ue,multipartMinFileSize:ue,multipartChunkSize:ue,maxConcurrentRequests:ue,multipartMaxConcurrentRequests:ue,multipartMaxAttempts:ue,checkForUrlDuplicates:M,saveUrlForRecurrentUploads:M,groupOutput:M,userAgentIntegration:F,debug:M,localeName:F,metadata:sd,secureUploadsExpireThreshold:ue,localeDefinitionOverride:Oa,secureUploadsSignatureResolver:Mi,secureDeliveryProxyUrlResolver:Mi,iconHrefResolver:Mi,fileValidators:La,collectionValidators:La,cameraModes:nd,defaultCameraMode:ad,enableAudioRecording:M,enableVideoRecording:M,mediaRecorderOptions:Oa,maxVideoRecordingDuration:ue,filesViewMode:cd,gridShowFileNames:M,cloudImageEditorAutoOpen:M,cloudImageEditorMaskHref:F,testMode:M},ud=(i,e)=>{if(!(typeof e>"u"||e===null))try{return ld[i](e)}catch(t){return console.error(`Invalid value for config key "${i}".`,t),Re[i]}},dd=[{test:i=>i.accept&&!!i.imgOnly,message:"There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."},{test:i=>i.enableVideoRecording!==null,message:"The `enableVideoRecording` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."},{test:i=>i.defaultCameraMode!==null,message:"The `defaultCameraMode` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."}],hd=ce(i=>{for(const{test:e,message:t}of dd)e(i)&&$a(t)},0),pd=(i,e)=>{const t=new URL(e);return t.hostname=`${i}.${t.hostname}`,t.toString().replace(/\/$/,"")},fd="0123456789abcdefghijklmnopqrstuvwxyz",gd=i=>{if(i<=0n)return"0";let e="";for(;i>0n;){const t=i%36n;e=fd[Number(t)]+e,i=i/36n}return e},md=(i,e)=>{try{const t=new URL(i),r=new URL(e);return t.hostname.endsWith(r.hostname)}catch{return!1}},xd=async i=>{const e=new TextEncoder().encode(i),t=await window.crypto.subtle.digest("SHA-256",e),r=Array.from(new Uint8Array(t)).map(o=>o.toString(16).padStart(2,"0")).join("");return BigInt(`0x${r}`)},bd=10,vd=async i=>{const e=await xd(i);return gd(e).slice(0,bd)},yd=async(i,e)=>{const t=await vd(i);return pd(t,e)},_d=i=>i instanceof Promise||!!(i&&typeof i=="object"&&"then"in i&&typeof i.then=="function");function m0(i){return i}const wd=[{key:"cameraModes",deps:["enableVideoRecording"],fn:({cameraModes:i,enableVideoRecording:e})=>{if(e===null)return i;let t=Pe(i);return e&&!t.includes("video")?t=t.concat("video"):e||(t=t.filter(r=>r!=="video")),_t(t)}},{key:"cameraModes",deps:["defaultCameraMode"],fn:({cameraModes:i,defaultCameraMode:e})=>{if(e===null)return i;let t=Pe(i);return t=t.sort((r,o)=>r===e?-1:o===e?1:0),_t(t)}},{key:"cdnCname",deps:["pubkey","cdnCnamePrefixed"],fn:({pubkey:i,cdnCname:e,cdnCnamePrefixed:t})=>i&&(e===qo||md(e,t))?yd(i,t):e}],Ua=({key:i,setValue:e,getValue:t})=>{for(const r of wd)if(r.deps.includes(i)){const o={[r.key]:t(r.key),...r.deps.reduce((n,s)=>({...n,[s]:t(s)}),{})},a=r.fn(o);if(_d(a)){const n=t(r.key);a.then(s=>{t(r.key)===n&&e(r.key,s)}).catch(s=>{console.error(`Failed to compute value for "${r.key}"`,s)})}else e(r.key,a)}},Pi=[...new Set(["debug",...Object.keys(Re)])],kd=["metadata","localeDefinitionOverride","secureUploadsSignatureResolver","secureDeliveryProxyUrlResolver","iconHrefResolver","fileValidators","collectionValidators","mediaRecorderOptions"],Cd=i=>kd.includes(i),ut=Pi.filter(i=>!Cd(i)),Ed={...Object.fromEntries(ut.map(i=>[Tr(i),i])),...Object.fromEntries(ut.map(i=>[i.toLowerCase(),i]))},Ad={...Object.fromEntries(ut.map(i=>[Tr(i),le(i)])),...Object.fromEntries(ut.map(i=>[i.toLowerCase(),le(i)]))},Ma=i=>"__"+i;class Ri extends B{requireCtxName=!0;constructor(){super(),this.init$={...this.init$,...Object.fromEntries(Object.entries(Re).map(([e,t])=>[le(e),t]))}}_flushValueToAttribute(e,t){if(ut.includes(e)){const r=[...new Set([Tr(e),e.toLowerCase()])];for(const o of r)typeof t>"u"||t===null?this.removeAttribute(o):this.getAttribute(o)!==t.toString()&&this.setAttribute(o,t.toString())}}_flushValueToState(e,t){this.$[le(e)]!==t&&(typeof t>"u"||t===null?this.$[le(e)]=Re[e]:this.$[le(e)]=t)}_setValue(e,t){const r=this,o=ud(e,t),a=Ma(e);r[a]!==o&&(this._assertSameValueDifferentReference(e,r[a],o),r[a]=o,this._flushValueToAttribute(e,o),this._flushValueToState(e,o),this.debugPrint(`[uc-config] "${e}"`,o),hd(this.cfg),Ua({key:e,setValue:this._setValue.bind(this),getValue:this._getValue.bind(this)}))}_getValue(e){const t=this,r=Ma(e);return t[r]??this.$[le(e)]}_assertSameValueDifferentReference(e,t,r){this.cfg.debug&&r!==t&&typeof r=="object"&&typeof t=="object"&&JSON.stringify(r)===JSON.stringify(t)&&(console.warn(`[uc-config] Option "${e}" value is the same as the previous one but the reference is different`),console.warn("[uc-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[uc-config] "${e}" previous value:`,t),console.warn(`[uc-config] "${e}" new value:`,r))}initCallback(){super.initCallback();const e=this;for(const t of ut)this.sub(le(t),r=>{this._setValue(t,r)},!1);for(const t of Pi){const r=e[t]??this.$[le(t)];r!==Re[t]&&this._setValue(t,r),Object.defineProperty(this,t,{set:o=>{this._setValue(t,o)},get:()=>this._getValue(t)}),Ua({key:t,setValue:this._setValue.bind(this),getValue:this._getValue.bind(this)})}}attributeChangedCallback(e,t,r){if(t===r)return;const o=this,a=Ed[e];o[a]=r}}Ri.bindAttributes(Ad);for(const i of Pi)Ri.prototype[i]=void 0;const Id=Ri;class Di extends B{constructor(){super(),this.init$={...this.init$,name:"",href:""}}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let t=`#uc-icon-${e}`;this.subConfigValue("iconHrefResolver",r=>{r&&(t=r(e)??t),this.$.href=t})}),this.setAttribute("aria-hidden","true")}}Di.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg">
    <use set="@href: href;"></use>
  </svg>
`,Di.bindAttributes({name:"name"});const Td=i=>[...new Set(i)],Sd=i=>Object.entries(i).filter(([e,t])=>t!==void 0&&t!=="").map(([e,t])=>e==="cdn-operations"||e==="analytics"?t:`${e}/${t}`),$d="https://ucarecdn.com",Sr=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:$d},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),It="--uc-img-",Pa="unresolved",$r=2,Or=3,Ra=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Da=3e3,za=5e3,Fa=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),Va=Object.create(null);for(let i in Sr)Va[It+i]=Sr[i]?.default||"";class Od extends vt{cssInit$=Va;$$(e){return this.$[It+e]}set$$(e){for(let t in e)this.$[It+t]=e[t]}sub$$(e,t){this.sub(It+e,r=>{r===null||r===""||t(r)})}analyticsParams(){return`-/@clib/${kr}/${Cr}/uc-img/`}initAttributes(e){[...this.attributes].forEach(t=>{Sr[t.name]||e.setAttribute(t.name,t.value)})}initIntersection(e,t){let r={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&(t(),this._isnObserver.unobserve(e))})},r),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(e=>{this._isnObserver.unobserve(e)}),this._isnObserver=null),L.deleteCtx(this)}static get observedAttributes(){return Object.keys(Sr)}attributeChangedCallback(e,t,r){window.setTimeout(()=>{this.$[It+e]=r})}}class Ld extends Od{_img=new Image;_imgPreview=new Image;_fmtAbs(e){return!e.includes("//")&&!Ra&&(e=new URL(e,document.baseURI).href),e}_validateSize(e){if(e?.trim()!==""){let t=e.match(/\d+/)[0],r=e.match(/[a-zA-Z]+/)[0];const o=parseInt(t,10);if(Number(o)>za&&this.hasFormatJPG)return za+r;if(Number(o)>Da&&!this.hasFormatJPG)return Da+r}return e}_getCdnModifiers(e,t){const r={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(e),blur:t,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Me(...Sd(r))}_getUrlBase(e="",t=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Ra&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let r=this._getCdnModifiers(e,t);if(this.$$("src").startsWith(this.$$("cdn-cname")))return pe(this.$$("src"),r);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(pe(yt(this.$$("cdn-cname"),this.$$("uuid")),r));if(this.$$("uuid"))return this._proxyUrl(pe(yt(this.$$("cdn-cname"),this.$$("uuid")),r));if(this.$$("proxy-cname"))return this._proxyUrl(pe(this.$$("proxy-cname"),r,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(pe(`https://${this.$$("pubkey")}.ucr.io/`,r,this._fmtAbs(this.$$("src"))))}_proxyUrl(e){return this.$$("secure-delivery-proxy")?yi(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:r=>window.encodeURIComponent(r)}):e}_getElSize(e,t=1,r=!0){let o=e.getBoundingClientRect(),a=t*Math.round(o.width),n=r?"":t*Math.round(o.height);return a||n?`${a||""}x${n||""}`:null}_setupEventProxy(e){let t=o=>{o.stopPropagation();let a=new Event(o.type,o);this.dispatchEvent(a)},r=["load","error"];for(let o of r)e.addEventListener(o,t)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:Fa.PREVIEW,img:this._imgPreview}:{type:Fa.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const e=Ee(this.$$("breakpoints"));return Td(e.map(t=>parseInt(t,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(e){let t=new Set;t.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,$r))}") ${$r}x`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,Or))}") ${Or}x`);let r=`image-set(${[...t].join(", ")})`;e.style.setProperty("background-image",r),e.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach(t=>{e.add(this._getUrlBase(t+"x")+` ${this._validateSize(t+"w")}`),this.$$("hi-res-support")&&e.add(this._getUrlBase(t*$r+"x")+` ${this._validateSize(t*$r+"w")}`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(t*Or+"x")+` ${this._validateSize(t*Or+"w")}`)}):(e.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(e=>{this.$$("intersection")?this.initIntersection(e,()=>{this.renderBg(e)}):this.renderBg(e)})}_appendURL({elNode:e,src:t,srcset:r}){t&&(e.src=t),r&&(e.srcset=r)}_setupConfigForImage({elNode:e}){this._setupEventProxy(e),this.initAttributes(e)}loaderImage({src:e,srcset:t,elNode:r}){return new Promise((o,a)=>{this._setupConfigForImage({elNode:r}),r.setAttribute(Pa,""),r.addEventListener("load",()=>{r.removeAttribute(Pa),o(r)}),r.addEventListener("error",()=>{a(!1)}),this._appendURL({elNode:r,src:e,srcset:t})})}async renderImage(){if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await this._imgPreview?.remove(),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview?.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await this._imgPreview?.remove(),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class Ud extends Ld{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}class zi extends K{static styleAttrs=[...super.styleAttrs,"uc-simple-btn"];couldBeCtxOwner=!0;constructor(){super(),this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.api.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",e=>{typeof e>"u"||(this.$.withDropZone=M(e))}),this.subConfigValue("multiple",e=>{this.$["button-text"]=e?"upload-files":"upload-file"})}}zi.template=`
  <uc-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <uc-icon name="upload"></uc-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="uc-visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </uc-drop-area>
`,zi.bindAttributes({dropzone:null});class Na extends y{historyTracked=!0;activityType=y.activities.START_FROM;initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}Na.template=' <div class="uc-content"><slot></slot></div> ';function Md(i){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let t=new FileReader;t.onerror=()=>{e(!0)};let r=o=>{o.type!=="loadend"&&t.abort(),e(!1)};t.onloadend=r,t.onprogress=r,t.readAsDataURL(i)}catch{e(!1)}})}function Pd(i,e){return new Promise(t=>{let r=0;const o=[],a=s=>{s||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),t(null)),s.isFile?(r++,s.file(c=>{r--;const l=new File([c],c.name,{type:c.type||e});o.push({type:"file",file:l,fullPath:s.fullPath}),r===0&&t(o)})):s.isDirectory&&n(s.createReader())};let n=s=>{r++,s.readEntries(c=>{r--;for(let l of c)a(l);r===0&&t(o)})};a(i)})}function Rd(i){const e=[],t=[];for(let r=0;r<i.items.length;r++){let o=i.items[r];if(o)if(o.kind==="file"){const a=o.type;if(typeof o.webkitGetAsEntry=="function"||typeof o.getAsEntry=="function"){let s=typeof o.webkitGetAsEntry=="function"?o.webkitGetAsEntry():o.getAsEntry();t.push(Pd(s,a).then(c=>{c&&e.push(...c)}));continue}const n=o.getAsFile();n&&t.push(Md(n).then(s=>{s||e.push({type:"file",file:n})}))}else o.kind==="string"&&o.type.match("^text/uri-list")&&t.push(new Promise(a=>{o.getAsString(n=>{e.push({type:"url",url:n}),a(void 0)})}))}return Promise.all(t).then(()=>e)}const ae={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Ba=["focus"],Dd=100,Fi=new Map;function zd(i,e){let t=Math.max(Math.min(i[0],e.x+e.width),e.x),r=Math.max(Math.min(i[1],e.y+e.height),e.y);return Math.sqrt((i[0]-t)*(i[0]-t)+(i[1]-r)*(i[1]-r))}function ja(i){let e=0,t=document.body,r=new Set,o=g=>r.add(g),a=ae.INACTIVE,n=g=>{i.shouldIgnore()&&g!==ae.INACTIVE||(a!==g&&r.forEach(m=>m(g)),a=g)},s=()=>e>0;o(g=>i.onChange(g));let c=()=>{e=0,n(ae.INACTIVE)},l=()=>{e+=1,a===ae.INACTIVE&&n(ae.ACTIVE)},d=()=>{e-=1,s()||n(ae.INACTIVE)},u=g=>{g.preventDefault(),e=0,n(ae.INACTIVE)},p=g=>{if(i.shouldIgnore())return;s()||(e+=1);let m=[g.x,g.y],_=i.element.getBoundingClientRect(),w=Math.floor(zd(m,_)),x=w<Dd,b=g.composedPath().includes(i.element);Fi.set(i.element,w);let D=Math.min(...Fi.values())===w;b&&D?(g.preventDefault(),n(ae.OVER)):n(x&&D?ae.NEAR:ae.ACTIVE)},f=async g=>{if(i.shouldIgnore())return;g.preventDefault();let m=await Rd(g.dataTransfer);i.onItems(m),n(ae.INACTIVE)};return t.addEventListener("drop",u),t.addEventListener("dragleave",d),t.addEventListener("dragenter",l),t.addEventListener("dragover",p),i.element.addEventListener("drop",f),Ba.forEach(g=>{window.addEventListener(g,c)}),()=>{Fi.delete(i.element),t.removeEventListener("drop",u),t.removeEventListener("dragleave",d),t.removeEventListener("dragenter",l),t.removeEventListener("dragover",p),i.element.removeEventListener("drop",f),Ba.forEach(g=>{window.removeEventListener(g,c)})}}const Ha="uc-drop-area",dt=`${Ha}/registry`;class Vi extends K{static styleAttrs=[...super.styleAttrs,"uc-drop-area"];constructor(){super(),this.init$={...this.init$,state:ae.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,isInitFlow:!1,text:"",[dt]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),o=window.getComputedStyle(this),a=o.visibility!=="hidden"&&o.display!=="none";return t&&a&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[dt]||(this.$[dt]=new Set),this.$[dt].add(this),this.defineAccessor("disabled",t=>{this.set$({isEnabled:!M(t)})}),this.defineAccessor("clickable",t=>{this.set$({isClickable:M(t)})}),this.defineAccessor("initflow",t=>{this.set$({isInitFlow:M(t)})}),this.defineAccessor("with-icon",t=>{this.set$({withIcon:M(t)})}),this.defineAccessor("fullscreen",t=>{this.set$({isFullscreen:M(t)})}),this.defineAccessor("text",t=>{typeof t=="string"?this.bindL10n("text",()=>this.l10n(t)||t):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=ja({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:t=>{this.$.state=t},onItems:t=>{t.length&&(t.forEach(r=>{r.type==="url"?this.api.addFileFromUrl(r.url,{source:J.DROP_AREA}):r.type==="file"&&this.api.addFileFromObject(r.file,{source:J.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.modalManager.open(y.activities.UPLOAD_LIST),this.set$({"*currentActivity":y.activities.UPLOAD_LIST})))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=ja({element:e,onChange:t=>{const r=Object.entries(ae).find(([,o])=>o===t)?.[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",t=>{const r=Object.entries(ae).find(([,o])=>o===t)?.[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",t=>{const r=Ee(t);this.$.isEnabled=r.includes(J.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",t=>{this.toggleAttribute("hidden",!t)}),this.sub("isClickable",t=>{this.toggleAttribute("clickable",t)}),this.$.isClickable&&(this._onAreaClicked=t=>{if(t.type==="keydown"){if(t.code==="Space"||t.code==="Enter"){if(this.$.isInitFlow){this.api.initFlow();return}this.api.openSystemDialog()}}else if(t.type==="click"){if(this.$.isInitFlow){this.api.initFlow();return}this.api.openSystemDialog()}},this.addEventListener("keydown",this._onAreaClicked),this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[dt]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,t=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&t&&r>=t||!e&&r>0)}destroyCallback(){super.destroyCallback();const e=this.$[dt];e&&(e.delete(this),e.size===0&&L.deleteCtx(Ha)),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&(this.removeEventListener("keydown",this._onAreaClicked),this.removeEventListener("click",this._onAreaClicked))}}Vi.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="uc-content-wrapper" set="@hidden: !isVisible">
      <div class="uc-icon-container" set="@hidden: !withIcon">
        <uc-icon name="default"></uc-icon>
        <uc-icon name="arrow-down"></uc-icon>
      </div>
      <span class="uc-text">{{text}}</span>
    </div>
  </slot>
`,Vi.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null,initflow:null});const Fd="src-type-";class Ni extends K{couldBeCtxOwner=!0;type=void 0;_registeredTypes={};constructor(){super(),this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:J.LOCAL,activate:()=>(this.api.openSystemDialog(),!1)}),this.registerType({type:J.URL,activity:y.activities.URL,textKey:"from-url"}),this.registerType({type:J.CAMERA,activity:y.activities.CAMERA,activate:()=>{const e=Er.htmlMediaCapture;return e&&this.api.openSystemDialog({captureCamera:!0}),!e}}),this.registerType({type:"draw",activity:y.activities.DRAW,icon:"edit-draw"});for(let e of Object.values(Ea))this.registerType({type:e,activity:y.activities.CAMERA,activate:()=>{const t=Er.htmlMediaCapture;return t&&this.api.openSystemDialog({captureCamera:!0,modeCamera:e==="mobile-photo-camera"?T.PHOTO:T.VIDEO}),!t}});for(let e of Object.values(lt))this.registerType({type:e,activity:y.activities.EXTERNAL,activityParams:{externalSourceType:e}})}initCallback(){super.initCallback(),this.initTypes(),this.defineAccessor("type",e=>{e&&this.applyType(e)})}registerType(e){this._registeredTypes[e.type]=e}getType(e){return this._registeredTypes[e]}activate(){if(!this.type)return;const e=this._registeredTypes[this.type],{activity:t,activate:r,activityParams:o={}}=e;(r?r():!!t)&&(this.modalManager.open(t),this.set$({"*currentActivityParams":o,"*currentActivity":t}))}applyType(e){const t=this._registeredTypes[e];if(!t){console.warn("Unsupported source type: "+e);return}const{textKey:r=e,icon:o=e}=t;this.$["src-type"]=`${Fd}${r}`,this.$.iconName=o,this.onclick=()=>{this.activate()}}}Ni.template=`
  <button type="button">
    <uc-icon set="@name: iconName"></uc-icon>
    <div class="uc-txt" l10n="src-type"></div>
  </button>
`,Ni.bindAttributes({type:null});class Vd extends B{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let t=Ee(e),r="";t.forEach(o=>{if(o==="instagram"){console.error("Instagram source was removed because the Instagram Basic Display API hasn't been available since December 4, 2024. Official statement, see here:https://developers.facebook.com/blog/post/2024/09/04/update-on-instagram-basic-display-api/?locale=en_US");return}if(o==="camera"&&Er.htmlMediaCapture){this.subConfigValue("cameraModes",a=>{const n=Pe(a);n.forEach(s=>{r+=`<uc-source-btn role="listitem" type="mobile-${s}-camera"></uc-source-btn>`}),n.length===0&&(r+='<uc-source-btn role="listitem" type="mobile-photo-camera"></uc-source-btn>')});return}r+=`<uc-source-btn role="listitem" type="${o}"></uc-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Lr=()=>{const i=[];return{stack:i,promiseReadJpegChunks:t=>new Promise((r,o)=>{let a=2;const n=(l,d)=>{const u=new FileReader;u.addEventListener("load",()=>{d(new DataView(u.result))}),u.addEventListener("error",p=>{o(`Reader error: ${p}`)}),u.readAsArrayBuffer(l)},s=()=>n(t.slice(a,a+128),l=>{let d,u,p;for(d=u=0,p=l.byteLength;p>=0?u<p:u>p;d=p>=0?++u:--u)if(l.getUint8(d)===255){a+=d;break}c()}),c=()=>{const l=a;return n(t.slice(a,a+=4),d=>{if(d.byteLength!==4||d.getUint8(0)!==255){o("Corrupted");return}const u=d.getUint8(1);if(u===218){r(!0);return}const p=d.getUint16(2)-2;return n(t.slice(a,a+=p),f=>{if(f.byteLength!==p){o("Corrupted");return}i.push({startPos:l,length:p,marker:u,view:f}),s()})})};FileReader&&DataView||o("Not Support"),n(t.slice(0,2),l=>{l.getUint16(0)!==65496&&o("Not jpeg"),s()})})}},Nd=async i=>{const e=[],{promiseReadJpegChunks:t,stack:r}=Lr();return await t(i),r.forEach(({marker:o,view:a})=>{o===226&&a.getUint32(0)===1229144927&&a.getUint32(4)===1347571526&&a.getUint32(8)===1229735168&&e.push(a)}),e},Ga=async(i,e,t)=>{{const r=[],o=[],{promiseReadJpegChunks:a,stack:n}=Lr();await a(i),n.forEach(l=>{if(l.marker===e)return r.push(l.startPos),o.push(l.length)});const s=[i.slice(0,2)];for(const l of t){const d=new DataView(new ArrayBuffer(4));d.setUint16(0,65280+e),d.setUint16(2,l.byteLength+2),s.push(d.buffer),s.push(l)}let c=2;for(let l=0;l<r.length;l++)r[l]>c&&s.push(i.slice(c,r[l])),c=r[l]+o[l]+4;return s.push(i.slice(c,i.size)),new Blob(s,{type:i.type})}},Bd=226,Wa=(i,e)=>Ga(i,Bd,e.map(t=>t.buffer)),jd=async i=>{try{return await Wa(i,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},Hd=(i,e,t)=>new Promise((r,o)=>{const a=n=>{if(!n){o("Failed to convert canvas to blob");return}r(n)};i.toBlob(a,e,t),i.width=i.height=1}),Tt=()=>{const i=document.createElement("canvas"),e=i.getContext("2d");return{canvas:i,ctx:e}},Gd=i=>{const{ctx:t,canvas:r}=Tt();r.width=r.height=50,t.drawImage(i,0,0,50,50);const o=t.getImageData(0,0,50,50).data;r.width=r.height=1;for(let a=3;a<o.length;a+=4)if(o[a]<254)return!0;return!1},Wd=async i=>{let e=null;const{promiseReadJpegChunks:t,stack:r}=Lr();return await t(i),r.forEach(({marker:o,view:a})=>{if(!e&&o===225&&a.byteLength>=14&&a.getUint32(0)===1165519206&&a.getUint16(4)===0){e=a;return}}),e},qd="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Ur;const Xd=()=>new Promise(i=>{if(Ur!==void 0)i(Ur);else{const e=new Image;e.addEventListener("load",()=>{Ur=e.naturalWidth<e.naturalHeight,e.src="//:0",i(Ur)}),e.src=qd}}),Zd=(i,e)=>{let t,r,o,a;if(!i||i.byteLength<14||i.getUint32(0)!==1165519206||i.getUint16(4)!==0)return;if(i.getUint16(6)===18761)r=!0;else if(i.getUint16(6)===19789)r=!1;else return;if(i.getUint16(8,r)!==42)return;o=8+i.getUint32(10,r);const n=i.getUint16(o-2,r);for(t=0,a=n;a>=0?t<a:t>a;a>=0?++t:--t){if(i.byteLength<o+10)return;i.getUint16(o,r)===274&&e(o+8,r),o+=12}},Yd=(i,e)=>{Zd(i,(t,r)=>i.setUint16(t,e,r))},Kd=async(i,e,t)=>(t&&Yd(e,1),Ga(i,225,[e.buffer])),Jd=(i,e)=>new Promise((t,r)=>{e&&(i.src=e),i.complete?t(i):(i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),Qd=i=>Jd(new Image,i),eh=[1,3],th=[192,193,194,195,197,198,199,201,202,203,205,206,207],qa={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},rh=async i=>{let e=!1;const{promiseReadJpegChunks:t,stack:r}=Lr();return await t(i).then(()=>(r.forEach(({marker:o,view:a})=>{if(!e&&th.indexOf(o)>=0){const n=a.getUint8(5);eh.indexOf(n)<0&&(e=!0)}}),e)).catch(()=>e)},Xa=(i,e)=>{const t={};return(...r)=>{const o=e(r,t);return o in t?t[o]:t[o]=i(...r)}},Za=(i,e)=>{const[t]=i,r=Object.keys(e).map(o=>parseInt(o,10)).sort((o,a)=>o-a);for(let o=0;o<r.length;o++){const a=r[o],n=!!e[a];if(a>t&&n||a<t&&!n)return a}return t},Fe={R:55,G:110,B:165,A:255},ih=`rgba(${Fe.R}, ${Fe.G}, ${Fe.B}, ${Fe.A/255})`,Ya=(i,e)=>{try{const t=[i-1,e-1,1,1],{canvas:r,ctx:o}=Tt();r.width=1,r.height=1;const{canvas:a,ctx:n}=Tt();a.width=i,a.height=e,n&&(n.fillStyle=ih,n.fillRect(...t),o.drawImage(a,i-1,e-1,1,1,0,0,1,1));const s=o&&o.getImageData(0,0,1,1).data;let c=!1;return s&&(c=s[0]===Fe.R&&s[1]===Fe.G&&s[2]===Fe.B&&s[3]===Fe.A),a.width=a.height=1,c}catch{return console.error(`Failed to test for max canvas size of ${i}x${e}.`),!1}};function Ka(i){return(...e)=>new Promise(t=>{setTimeout(()=>{const r=i(...e);t(r)},0)})}const oh=Ka(Xa(Ya,Za)),ah=Ka(Xa(Ya,Za)),Ja=async(i,e)=>{const t=qa.squareSide.find(n=>n*n>=i*e),r=qa.dimension.find(n=>n>=i&&n>=e);if(!t||!r)throw new Error("Not supported");const[o,a]=await Promise.all([oh(t,t),ah(r,1)]);if(o&&a)return!0;throw new Error("Not supported")},Qa=async(i,e,t)=>{try{const{ctx:r,canvas:o}=Tt();return o.width=e,o.height=t,r.imageSmoothingQuality="high",r.drawImage(i,0,0,e,t),i instanceof HTMLImageElement&&(i.src="//:0"),i instanceof HTMLCanvasElement&&(i.width=i.height=1),o}catch(r){throw new Error("Canvas resize error",{cause:r})}},nh=({img:i,targetW:e,targetH:t})=>Qa(i,e,t),sh=function({sourceW:i,targetW:e,targetH:t,step:r}){const o=[];let a=e,n=t;do o.push([a,n]),a=Math.round(a/r),n=Math.round(n/r);while(a<i*r);return o.reverse()},ch=({img:i,sourceW:e,targetW:t,targetH:r,step:o})=>{const a=sh({sourceW:e,targetW:t,targetH:r,step:o});return a.reduce((n,[s,c],l)=>n.then(d=>Ja(s,c).then(()=>Qa(d,s,c)).catch(()=>{if(l===a.length-1)throw new Error("Not supported");return d})),Promise.resolve(i))},lh=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),uh=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),Bi=.71,dh=(i,e)=>{if(i.width*Bi*i.height*Bi<e.size)throw new Error("Not required");const t=i.width,r=i.height,o=t/r,a=Math.floor(Math.sqrt(e.size*o)),n=Math.floor(e.size/Math.sqrt(e.size*o));return Ja(a,n).then(()=>{const{ctx:s}=Tt();return"imageSmoothingQuality"in s&&!lh()&&!uh?nh({img:i,targetW:a,targetH:n}):ch({img:i,sourceW:t,targetW:a,targetH:n,step:Bi})}).catch(()=>Promise.reject("Not supported"))},hh=async(i,e)=>{try{if(await rh(i))throw new Error("Should skipped");const r=await Promise.allSettled([Wd(i),Xd(),Nd(i)]),a=!r.some(m=>m.status==="rejected"),[n,s,c]=r,l=await jd(i).catch(()=>i),d=await Qd(URL.createObjectURL(l));URL.revokeObjectURL(d.src);const u=await dh(d,e);let p="image/jpeg",f=e?.quality||.8;!a&&Gd(u)&&(p="image/png",f=void 0);let g=await Hd(u,p,f);if(a&&n.status==="fulfilled"&&n.value){const m=n.value,_=s.status==="fulfilled"?s.value:!1;g=await Kd(g,m,_)}return a&&c.status==="fulfilled"&&c.value.length>0&&(g=await Wa(g,c.value)),g}catch(t){let r;throw t instanceof Error&&(r=t.message),typeof t=="string"&&(r=t),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:t})}},en=16384,ph=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,fh=i=>{const e=ph.exec(i?.toLocaleLowerCase())||[];if(!e.length)return!1;const t=e[1]*e[2],r=en*en;return t>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(t/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:t}},ji=(i,e)=>{let t,r,o;const a=(...n)=>{t?(clearTimeout(r),r=setTimeout(()=>{Date.now()-o>=e&&(i(...n),o=Date.now())},Math.max(e-(Date.now()-o),0))):(i(...n),o=Date.now(),t=!0)};return Object.defineProperty(a,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),a};class tn extends K{_entrySubs=new Set;_entry=null;_withEntry(e){return((...r)=>{const o=this._entry;if(!o){console.warn("No entry found");return}return e(o,...r)})}_subEntry(e,t){return this._withEntry((r,o,a)=>{let n=r.subscribe(o,s=>{this.isConnected&&a(s)});this._entrySubs.add(n)})(e,t)}_reset(){for(let e of this._entrySubs)e.remove();this._entrySubs=new Set,this._entry=null}disconnectedCallback(){super.disconnectedCallback(),this._entrySubs=new Set}}const de=Object.freeze({FINISHED:Symbol("FINISHED"),FAILED:Symbol("FAILED"),UPLOADING:Symbol("UPLOADING"),IDLE:Symbol("IDLE")});class Je extends tn{couldBeCtxOwner=!0;pauseRender=!0;_renderedOnce=!1;constructor(){super(),this.init$={...this.init$,uid:"",itemName:"",errorText:"",hint:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,showFileNames:!1,state:de.IDLE,ariaLabelStatusFile:"",onEdit:this._withEntry(e=>{this.$["*currentActivityParams"]={internalId:e.uid},this.modalManager.open(y.activities.CLOUD_IMG_EDIT),this.$["*currentActivity"]=y.activities.CLOUD_IMG_EDIT}),onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){super._reset(),this._debouncedCalculateState.cancel()}_observerCallback(e){let[t]=e;this._isIntersecting=t.isIntersecting,this._thumbRect=t.boundingClientRect,t.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0)}_calculateState=this._withEntry(e=>{let t=de.IDLE;e.getValue("errors").length>0?t=de.FAILED:e.getValue("isUploading")?t=de.UPLOADING:e.getValue("fileInfo")&&(t=de.FINISHED),this.$.state=t});_debouncedCalculateState=ce(this._calculateState.bind(this),100);_updateHint=this._withEntry(ji(e=>{const t=e.getValue("source"),r=e.getValue("externalUrl"),o=e.getValue("errors").length===0,a=this.$.progressValue===0,n=this.$.state===de.UPLOADING,s=e.getValue("isQueued");if(!o||!n||!a){this.$.hint="";return}if(s){const c=this.l10n("queued");this.$.hint=c;return}if(r&&t&&Object.values(lt).includes(t)){const c=this.l10n("waiting-for",{source:this.l10n(`src-type-${t}`)});this.$.hint=c;return}this.$.hint=""},100));_handleEntryId(e){this._reset();let t=this.uploadCollection?.read(e);this._entry=t,t&&(this._subEntry("uploadProgress",r=>{this.$.progressValue=r,this._updateHint()}),this._subEntry("isQueued",()=>{this._updateHint()}),this._subEntry("fileName",r=>{this.$.itemName=r||t.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",r=>{this.$.itemName=t.getValue("fileName")||r||this.l10n("file-no-name")}),this._subEntry("fileInfo",()=>{this._debouncedCalculateState()}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()))}_updateShowFileNames(e){if(this.cfg.filesViewMode==="list"){this.$.showFileNames=!0;return}this.$.showFileNames=e}initCallback(){super.initCallback(),this.sub("uid",e=>{this._handleEntryId(e)}),this.sub("state",e=>{this._handleState(e)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.subConfigValue("filesViewMode",e=>{this._updateShowFileNames(this.cfg.gridShowFileNames),this.setAttribute("mode",e)}),this.subConfigValue("gridShowFileNames",e=>{this._updateShowFileNames(e)}),this.onclick=()=>{Je.activeInstances.forEach(e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")})},this.sub("*uploadTrigger",e=>{this._entry&&!e.has(this._entry.uid)||setTimeout(()=>this.isConnected&&this.upload())}),Je.activeInstances.add(this)}_handleState=this._withEntry((e,t)=>{t===de.FAILED?this.$.badgeIcon="badge-error":t===de.FINISHED&&(this.$.badgeIcon="badge-success"),t===de.UPLOADING&&(this.$.isFocused=!1);const r=e.getValue("fileName");this.set$({isFailed:t===de.FAILED,isUploading:t===de.UPLOADING,isFinished:t===de.FINISHED,progressVisible:t===de.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&this._entry?.getValue("isImage")&&this._entry?.getValue("cdnUrl"),errorText:e.getValue("errors")?.[0]?.message,ariaLabelStatusFile:r&&this.l10n("a11y-file-item-status",{fileName:r,status:this.l10n(t?.description?.toLocaleLowerCase()??"").toLocaleLowerCase()})}),this._updateHint()});destroyCallback(){super.destroyCallback(),Je.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._observer?.disconnect()}_settingsOfShrink(){return fh(this.cfg.imageShrink)}_processShrink(e){return hh(e,this._settingsOfShrink())}upload=this._withEntry(async e=>{if(!this.uploadCollection.read(e.uid)||e.getValue("fileInfo")||e.getValue("isUploading")||e.getValue("errors").length>0)return;const t=this.cfg.multiple?this.cfg.multipleMax:1;if(!(t&&this.uploadCollection.size>t)){this._debouncedCalculateState(),e.setMultipleValues({isUploading:!0,errors:[],isQueued:!0});try{let r=new AbortController;e.setValue("abortController",r);const o=async()=>{e.setValue("isQueued",!1);let n=e.getValue("file");n&&this.cfg.imageShrink&&(n=await this._processShrink(n).catch(()=>n));const s=n||e.getValue("externalUrl")||e.getValue("uuid");if(!s)throw new Error("No file input");const l={...await this.getUploadClientOptions(),fileName:e.getValue("fileName")??void 0,source:e.getValue("source")??void 0,onProgress:d=>{if(d.isComputable){let u=d.value*100;e.setValue("uploadProgress",u)}},signal:r.signal,metadata:await this.getMetadataFor(e.uid)};return this.debugPrint("upload options",s,l),ha(s,l)};let a=await this.$["*uploadQueue"].add(o);e.setMultipleValues({fileInfo:a,isQueued:!1,isUploading:!1,fileName:a.originalFilename,fileSize:a.size,isImage:a.isImage??!1,mimeType:a.contentInfo?.mime?.mime??a.mimeType,uuid:a.uuid,cdnUrl:e.getValue("cdnUrl")??a.cdnUrl,cdnUrlModifiers:e.getValue("cdnUrlModifiers")??"",uploadProgress:100,source:e.getValue("source")??null}),e===this._entry&&this._debouncedCalculateState()}catch(r){r instanceof Ke&&r.isCancel?e.setMultipleValues({isUploading:!1,uploadProgress:0}):r instanceof dr?e.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:r}):(console.error("Unknown upload error",r),e.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:new Error("Something went wrong",{cause:r})})),e===this._entry&&this._debouncedCalculateState()}}})}Je.template=`
  <div class="uc-inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <uc-thumb set="uid:uid;badgeIcon:badgeIcon"></uc-thumb>

    <div aria-atomic="true" aria-live="polite" class="uc-file-name-wrapper" set="@aria-label:ariaLabelStatusFile;">
      <span class="uc-file-name" set="@hidden: !showFileNames">{{itemName}}</span>
      <span class="uc-file-error" set="@hidden: !errorText;">{{errorText}}</span>
      <span class="uc-file-hint" set="@hidden: !hint">{{hint}}</span>
    </div>
    <div class="uc-file-actions">
      <button
        type="button"
        l10n="@title:file-item-edit-button;@aria-label:file-item-edit-button"
        class="uc-edit-btn uc-mini-btn"
        set="onclick: onEdit; @hidden: !isEditable"
      >
        <uc-icon name="edit-file"></uc-icon>
      </button>
      <button
        type="button"
        l10n="@title:file-item-remove-button;@aria-label:file-item-remove-button"
        class="uc-remove-btn uc-mini-btn"
        set="onclick: onRemove;"
      >
        <uc-icon name="remove-file"></uc-icon>
      </button>
      <button type="button" class="uc-upload-btn uc-mini-btn" set="onclick: onUpload;">
        <uc-icon name="upload"></uc-icon>
      </button>
    </div>
    <uc-progress-bar
      class="uc-progress-bar"
      set="value: progressValue; visible: progressVisible; @hasFileName: showFileNames;"
    >
    </uc-progress-bar>
  </div>
`,Je.activeInstances=new Set;let Hi=null;class rn extends B{static styleAttrs=[...super.styleAttrs,"uc-modal"];static StateConsumerScope="modal";constructor(){super(),this.init$={...this.init$,closeClicked:this._handleDialogClose}}_handleBackdropClick=()=>{this._closeDialog()};_closeDialog=()=>{this.modalManager?.close(this.id),this.modalManager.hasActiveModals||(document.body.style.overflow="")};_handleDialogClose=()=>{this._closeDialog()};_handleDialogMouseDown=e=>{this._mouseDownTarget=e.target};_handleDialogMouseUp=e=>{e.target===this.ref.dialog&&e.target===this._mouseDownTarget&&this._closeDialog()};show(){this.ref.dialog.showModal?(this.setAttribute("aria-modal","true"),this.ref.dialog.showModal()):this.ref.dialog.setAttribute("open",""),this.cfg.modalScrollLock&&(document.body.style.overflow="hidden")}hide(){this.ref.dialog.close?(this.setAttribute("aria-modal","false"),this.ref.dialog.close()):this.ref.dialog.removeAttribute("open")}_handleModalOpen({id:e}){e===this.id?(Hi=e,this.show()):this.hide(),this.emit(N.MODAL_OPEN,{modalId:e},{debounce:!0})}_handleModalClose({id:e}){e===this.id&&this.hide(),this.emit(N.MODAL_CLOSE,{modalId:e,hasActiveModals:this.modalManager.hasActiveModals},{debounce:!0})}_handleModalCloseAll(){this.hide(),Hi===this.id&&this.emit(N.MODAL_CLOSE,{modalId:Hi,hasActiveModals:this.modalManager.hasActiveModals},{debounce:!0})}initCallback(){super.initCallback(),this.modalManager?.registerModal(this.id,this),this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp),this.subConfigValue("modalBackdropStrokes",e=>{e?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.handleModalOpen=this._handleModalOpen.bind(this),this.handleModalClose=this._handleModalClose.bind(this),this.handleModalCloseAll=this._handleModalCloseAll.bind(this),this.modalManager.subscribe(Y.OPEN,this.handleModalOpen),this.modalManager.subscribe(Y.CLOSE,this.handleModalClose),this.modalManager.subscribe(Y.CLOSE_ALL,this.handleModalCloseAll)}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp),this.modalManager.unsubscribe(Y.OPEN,this.handleModalOpen),this.modalManager.unsubscribe(Y.CLOSE,this.handleModalClose),this.modalManager.unsubscribe(Y.CLOSE_ALL,this.handleModalCloseAll)}}rn.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;class on extends K{couldBeCtxOwner=!0;historyTracked=!0;activityType=y.activities.UPLOAD_LIST;constructor(){super(),this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.api.initFlow(!0)},onUpload:()=>{this.emit(N.UPLOAD_CLICK),this.api.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(N.DONE_CLICK,this.api.getOutputCollectionState()),this.api.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_throttledHandleCollectionUpdate=ji(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300);_updateUploadsState(){const e=this.api.getOutputCollectionState(),t={total:e.totalCount,succeed:e.successCount,uploading:e.uploadingCount,failed:e.failedCount},r=!e.errors.some(u=>u.type==="TOO_MANY_FILES"||u.type==="TOO_FEW_FILES"),o=e.errors.some(u=>u.type==="TOO_MANY_FILES"),a=e.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),n=t.failed===0&&e.errors.length===0;let s=!1,c=!1,l=!1;if(t.total-t.succeed-t.uploading-t.failed>0&&r)s=!0;else{c=!0;const u=this.cfg.groupOutput?!!e.group:!0;l=t.total===t.succeed&&r&&n&&u}this.set$({doneBtnVisible:c,doneBtnEnabled:l,uploadBtnVisible:s,addMoreBtnEnabled:t.total===0||!o&&!a,addMoreBtnVisible:!a||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(t))}_getHeaderText(e){const t=r=>{const o=e[r];return this.l10n(`header-${r}`,{count:o})};return e.uploading>0?t("uploading"):e.failed>0?t("failed"):e.succeed>0?t("succeed"):t("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*groupInfo",e=>{e&&this._throttledHandleCollectionUpdate()}),this.subConfigValue("filesViewMode",e=>{this.setAttribute("mode",e)}),this.sub("*currentActivity",e=>{!this.couldOpenActivity&&e===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",e=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:e.length>0}),this.cfg.confirmUpload||this.api.uploadAll()},!1),this.sub("*collectionErrors",e=>{const t=e.filter(r=>r.type!=="SOME_FILES_HAS_ERRORS")[0];if(!t){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:t.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}on.template=`
  <uc-activity-header>
    <span aria-live="polite" class="uc-header-text">{{headerText}}</span>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>

  <div class="uc-no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="uc-files">
    <div class="uc-files-wrapper" repeat="*uploadList" repeat-item-tag="uc-file-item"></div>
    <button
      type="button"
      class="uc-add-more-btn uc-secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <uc-icon name="add"></uc-icon><span l10n="add-more"></span>
    </button>
  </div>

  <div class="uc-common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="uc-toolbar">
    <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="uc-toolbar-spacer"></div>
    <button
      type="button"
      class="uc-add-more-btn uc-secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <uc-icon name="add"></uc-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="uc-upload-btn uc-primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="uc-done-btn uc-primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <uc-drop-area ghost></uc-drop-area>
`;class an extends K{couldBeCtxOwner=!0;activityType=y.activities.URL;init$={...this.init$,importDisabled:!0,onUpload:e=>{e.preventDefault();let t=this.ref.input.value;this.api.addFileFromUrl(t,{source:J.URL}),this.modalManager.open(y.activities.UPLOAD_LIST),this.$["*currentActivity"]=y.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:e=>{let t=e.target.value;this.set$({importDisabled:!t})}};initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}an.template=`
  <uc-activity-header>
    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back;@aria-label:back">
      <uc-icon name="back"></uc-icon>
    </button>
    <div>
      <uc-icon name="url"></uc-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <form class="uc-content">
    <label>
      <input placeholder="https://" class="uc-url-input" type="text" ref="input" set="oninput: onInput" />
    </label>
    <button
      type="submit"
      class="uc-url-upload-btn uc-primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const gh=()=>typeof navigator.permissions<"u",mh={width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},nn=["camera","microphone"];function Mr(i){const e=Math.floor(i/60).toString().padStart(2,"0"),t=Math.floor(i%60).toString().padStart(2,"0");return`${e}:${t}`}const sn="image/jpeg",cn="video/webm";class ln extends K{couldBeCtxOwner=!0;activityType=y.activities.CAMERA;_unsubPermissions=null;_chunks=[];_mediaRecorder=null;_stream=null;_selectedAudioId=null;_selectedCameraId=null;constructor(){super(),this.init$={...this.init$,video:null,videoTransformCss:null,videoHidden:!0,messageHidden:!0,requestBtnHidden:gh(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",switcher:null,panels:null,timer:null,timerHidden:!0,cameraHidden:!0,cameraActionsHidden:!0,audioSelectOptions:null,audioSelectHidden:!0,audioSelectDisabled:!0,audioToggleMicrophoneHidden:!0,tabCameraHidden:!0,tabVideoHidden:!0,currentIcon:"camera-full",currentTimelineIcon:"play",toggleMicrophoneIcon:"microphone",_startTime:0,_elapsedTime:0,_animationFrameId:null,mutableClassButton:"uc-shot-btn uc-camera-action",onCameraSelectChange:e=>{this._selectedCameraId=e.target.value,this._capture()},onAudioSelectChange:e=>{this._selectedAudioId=e.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>this._shot(),onRequestPermissions:()=>this._capture(),onStartCamera:()=>this._chooseActionWithCamera(),onStartRecording:()=>this._startRecording(),onStopRecording:()=>this._stopRecording(),onToggleRecording:()=>this._toggleRecording(),onToggleAudio:()=>this._toggleEnableAudio(),onRetake:()=>this._retake(),onAccept:()=>this._accept(),onClickTab:e=>{const t=e.currentTarget.getAttribute("data-id");t&&this._handleActiveTab(t)}}}_chooseActionWithCamera=()=>{if(this._activeTab===T.PHOTO&&this._shot(),this._activeTab===T.VIDEO){if(this._mediaRecorder?.state==="recording"){this._stopRecording();return}this._startRecording()}};_updateTimer=()=>{const e=Math.floor((performance.now()-this.$._startTime+this.$._elapsedTime)/1e3);if(typeof this.cfg.maxVideoRecordingDuration=="number"&&this.cfg.maxVideoRecordingDuration>0){const t=this.cfg.maxVideoRecordingDuration-e;if(t<=0){this.ref.timer.textContent=Mr(t),this._stopRecording();return}this.ref.timer.textContent=Mr(t)}else this.ref.timer.textContent=Mr(e);this._animationFrameId=requestAnimationFrame(this._updateTimer)};_startTimer=()=>{this.$._startTime=performance.now(),this.$._elapsedTime=0,this._updateTimer()};_stopTimer=()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)};_startTimeline=()=>{const e=this.ref.video.currentTime,t=this.ref.video.duration;this.ref.line.style.transform=`scaleX(${e/t})`,this.ref.timer.textContent=Mr(e),this._animationFrameId=requestAnimationFrame(this._startTimeline)};_stopTimeline=()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)};_startRecording=()=>{try{this._chunks=[],this._options={...this.cfg.mediaRecorderOptions};const{mimeType:e}=this.cfg.mediaRecorderOptions||{};e&&MediaRecorder.isTypeSupported(e)?this._options.mimeType=e:MediaRecorder.isTypeSupported(cn)?this._options.mimeType=cn:this._options.mimeType="video/mp4",this._stream&&(this._mediaRecorder=new MediaRecorder(this._stream,this._options),this._mediaRecorder.start(),this._mediaRecorder.addEventListener("dataavailable",t=>{this._chunks.push(t.data)}),this._startTimer(),this.classList.add("uc-recording"),this._setCameraState(me.PLAY))}catch(e){console.error("Failed to start recording",e)}};_stopRecording=()=>{this._mediaRecorder?.addEventListener("stop",()=>{this._previewVideo(),this._stopTimer(),this._setCameraState(me.STOP)}),this._mediaRecorder?.stop(),this.classList.remove("uc-recording")};_toggleRecording=()=>{this._mediaRecorder?.state!=="recording"&&(!this.ref.video.paused&&!this.ref.video.ended&&this.ref.video.readyState>2?this.ref.video.pause():this.ref.video.paused&&this.ref.video.play())};_toggleEnableAudio=()=>{this._stream?.getAudioTracks().forEach(e=>{e.enabled=!e.enabled,this.$.toggleMicrophoneIcon=e.enabled?"microphone":"microphone-mute",this.$.audioSelectDisabled=!e.enabled})};_previewVideo=()=>{try{const e=new Blob(this._chunks,{type:this._mediaRecorder?.mimeType}),t=URL.createObjectURL(e);this.ref.video.muted=!1,this.ref.video.volume=1,this.$.video=null,this.ref.video.src=t,this.ref.video.addEventListener("play",()=>{this._startTimeline(),this.set$({currentTimelineIcon:"pause"})}),this.ref.video.addEventListener("pause",()=>{this.set$({currentTimelineIcon:"play"}),this._stopTimeline()})}catch(e){console.error("Failed to preview video",e)}};_retake=()=>{this._setCameraState(me.RETAKE),this._activeTab===T.VIDEO&&(this.$.video=this._stream,this.ref.video.muted=!0),this.ref.video.play()};_accept=()=>{if(this._setCameraState(me.ACCEPT),this._activeTab===T.PHOTO){this._canvas?.toBlob(o=>{const a=this._createFile("camera","jpeg",sn,o);this._toSend(a)},sn);return}const e=new Blob(this._chunks,{type:this._mediaRecorder?.mimeType}),t=this._guessExtensionByMime(this._mediaRecorder?.mimeType),r=this._createFile("video",t,`video/${t}`,e);this._toSend(r),this._chunks=[]};_handlePhoto=e=>{e===me.SHOT&&this.set$({tabVideoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,cameraActionsHidden:!1,cameraSelectHidden:!0}),(e===me.RETAKE||e===me.ACCEPT)&&this.set$({tabVideoHidden:!this._cameraModes.includes(T.VIDEO),tabCameraHidden:!this._cameraModes.includes(T.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,cameraSelectHidden:this._cameraDevices.length<=1})};_handleVideo=e=>{e===me.PLAY&&this.set$({timerHidden:!1,tabCameraHidden:!0,cameraSelectHidden:!0,audioSelectHidden:!0,currentTimelineIcon:"pause",currentIcon:"square",mutableClassButton:"uc-shot-btn uc-camera-action uc-stop-record"}),e===me.STOP&&this.set$({timerHidden:!1,cameraHidden:!0,audioToggleMicrophoneHidden:!0,cameraActionsHidden:!1}),(e===me.RETAKE||e===me.ACCEPT)&&this.set$({timerHidden:!0,tabVideoHidden:!this._cameraModes.includes(T.VIDEO),tabCameraHidden:!this._cameraModes.includes(T.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording,currentIcon:"video-camera-full",mutableClassButton:"uc-shot-btn uc-camera-action",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,cameraSelectHidden:this._cameraDevices.length<=1})};_setCameraState=e=>{this._activeTab===T.PHOTO&&(e==="shot"||e==="retake"||e==="accept")&&this._handlePhoto(e),this._activeTab===T.VIDEO&&(e==="play"||e==="stop"||e==="retake"||e==="accept"||e==="pause"||e==="resume")&&this._handleVideo(e)};_shot(){if(this._setCameraState("shot"),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),!this._ctx)throw new Error("Failed to get canvas context");this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this.cfg.cameraMirror&&(this._ctx.translate(this._canvas.width,0),this._ctx.scale(-1,1)),this._ctx.drawImage(this.ref.video,0,0),this.ref.video.pause()}_handleActiveTab=e=>{this.ref.switcher.querySelectorAll("button").forEach(t=>{t.classList.toggle("uc-active",t.getAttribute("data-id")===e)}),e===T.PHOTO&&this.set$({currentIcon:"camera-full",audioSelectHidden:!0,audioToggleMicrophoneHidden:!0}),e===T.VIDEO&&this.set$({currentTimelineIcon:"play",currentIcon:"video-camera-full",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording}),this._activeTab=e};_createFile=(e,t,r,o)=>{const a=Date.now(),n=`${e}-${a}.${t}`;return new File([o],n,{lastModified:a,type:r})};_guessExtensionByMime(e){const t={mp4:"mp4",ogg:"ogg",webm:"webm",quicktime:"mov","x-matroska":"mkv"};if(e==="")return"webm";if(e&&(e=e.split("/"),e?.[0]==="video")){e=e.slice(1).join("/");const r=e?.split(";")[0];if(t[r])return t[r]}return"avi"}_toSend=e=>{this.api.addFileFromObject(e,{source:J.CAMERA}),this.set$({"*currentActivity":y.activities.UPLOAD_LIST}),this.modalManager.open(y.activities.UPLOAD_LIST)};get _cameraModes(){return Ee(this.cfg.cameraModes)}_setPermissionsState=ce(e=>{this.classList.toggle("uc-initialized",e==="granted");const t=this._activeTab===T.VIDEO&&this.cfg.enableAudioRecording,r=this._activeTab===T.PHOTO?"camera-full":"video-camera-full";e==="granted"?this.set$({videoHidden:!1,cameraHidden:!1,tabCameraHidden:!this._cameraModes.includes(T.PHOTO),tabVideoHidden:!this._cameraModes.includes(T.VIDEO),messageHidden:!0,timerHidden:!0,currentIcon:r,audioToggleMicrophoneHidden:!t,audioSelectHidden:!t}):e==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,messageHidden:!1,tabCameraHidden:!this._cameraModes.includes(T.PHOTO),tabVideoHidden:!this._cameraModes.includes(T.VIDEO),cameraActionsHidden:!0,mutableClassButton:"uc-shot-btn uc-camera-action"}),this._stopCapture())},300);_makeStreamInactive=()=>{if(!this._stream)return!1;const e=this._stream?.getAudioTracks(),t=this._stream?.getVideoTracks();e.forEach(r=>r.stop()),t.forEach(r=>r.stop())};_stopCapture=()=>{this._capturing&&(this.ref.video.volume=0,this.$.video?.getTracks()[0].stop(),this.$.video=null,this._makeStreamInactive(),this._stopTimer(),this._capturing=!1)};_capture=async()=>{const e={video:mh,audio:this.cfg.enableAudioRecording?{}:!1};this._selectedCameraId&&(e.video={deviceId:{exact:this._selectedCameraId}}),this._selectedAudioId&&this.cfg.enableAudioRecording&&(e.audio={deviceId:{exact:this._selectedAudioId}}),this.ref.video.volume=0;try{this._setPermissionsState("prompt"),this._stream=await navigator.mediaDevices.getUserMedia(e),this._stream.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=this._stream,this._capturing=!0,this._setPermissionsState("granted")}catch(t){this._setPermissionsState("denied"),console.log("Failed to capture camera",t)}};_handlePermissionsChange=()=>{this._capture()};_permissionAccess=async()=>{try{for(const e of nn)this[`${e}Response`]=await navigator.permissions.query({name:e}),this[`${e}Response`].addEventListener("change",this._handlePermissionsChange)}catch(e){console.log("Failed to use permissions API. Fallback to manual request mode.",e),this._capture()}};_getPermission=()=>{};_requestDeviceAccess=async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:this.cfg.enableAudioRecording}),await this._getDevices(),navigator.mediaDevices.addEventListener("devicechange",this._getDevices)}catch(e){console.log("Failed to get user media",e)}};_getDevices=async()=>{try{const e=await navigator.mediaDevices.enumerateDevices();this._cameraDevices=e.filter(t=>t.kind==="videoinput").map((t,r)=>({text:t.label.trim()||`${this.l10n("caption-camera")} ${r+1}`,value:t.deviceId})),this._audioDevices=this.cfg.enableAudioRecording&&e.filter(t=>t.kind==="audioinput").map(t=>({text:t.label.trim(),value:t.deviceId})),this._cameraDevices.length>1&&this.set$({cameraSelectOptions:this._cameraDevices,cameraSelectHidden:!1}),this._selectedCameraId=this._cameraDevices[0]?.value,this._audioDevices.length>1&&this.set$({audioSelectOptions:this._audioDevices,audioSelectHidden:!1}),this._selectedAudioId=this._audioDevices[0]?.value}catch(e){console.log("Failed to get devices",e)}};_onActivate=async()=>{await this._permissionAccess(),await this._requestDeviceAccess(),await this._capture(),this._handleCameraModes(this._cameraModes)};_onDeactivate=async()=>{this._unsubPermissions&&this._unsubPermissions(),!!window.chrome||this._setPermissionsState("denied"),this._stopCapture()};_handleCameraModes=e=>{this.$.tabVideoHidden=!e.includes(T.VIDEO),this.$.tabCameraHidden=!e.includes(T.PHOTO);const t=e[0];(!this._activeTab||!e.includes(this._activeTab))&&this._handleActiveTab(t)};initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",e=>{this.$.videoTransformCss=e?"scaleX(-1)":null}),this.subConfigValue("enableAudioRecording",e=>{this.$.audioToggleMicrophoneHidden=!e,this.$.audioSelectDisabled=!e}),this.subConfigValue("cameraModes",e=>{if(!this.isActivityActive)return;const t=Pe(e);this._handleCameraModes(t)})}_destroy(){for(const e of nn)this[`${e}Response`]?.removeEventListener("change",this._handlePermissionsChange);navigator.mediaDevices?.removeEventListener("devicechange",this._getDevices)}async destroyCallback(){super.destroyCallback(),this._destroy()}}ln.template=`
  <uc-activity-header>
    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back">
      <uc-icon name="back"></uc-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <uc-icon name="camera"></uc-icon>
      <span l10n="caption-camera"></span>
    </div>
    <uc-select
      class="uc-camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </uc-select>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <div class="uc-content">
    <video
      muted
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="uc-message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
  </div>

  <div class="uc-controls">
    <div ref="switcher" class="uc-switcher" set="@hidden:!timerHidden">
      <button
        data-id="photo"
        type="button"
        class="uc-switch uc-mini-btn"
        set="onclick: onClickTab;  @hidden: tabCameraHidden"
      >
        <uc-icon name="camera"></uc-icon>
      </button>
      <button
        data-id="video"
        type="button"
        class="uc-switch uc-mini-btn"
        set="onclick: onClickTab; @hidden: tabVideoHidden"
      >
        <uc-icon name="video-camera"></uc-icon>
      </button>
    </div>

    <button class="uc-secondary-btn uc-recording-timer" set="@hidden:timerHidden; onclick: onToggleRecording">
      <uc-icon set="@name: currentTimelineIcon"></uc-icon>
      <span ref="timer"> 00:00 </span>
      <span ref="line" class="uc-line"></span>
    </button>

    <div class="uc-camera-actions uc-camera-action" set="@hidden: cameraActionsHidden">
      <button type="button" class="uc-secondary-btn" set="onclick: onRetake">Retake</button>
      <button type="button" class="uc-primary-btn" set="onclick: onAccept" data-testid="accept">Accept</button>
    </div>

    <button
      type="button"
      class="uc-shot-btn uc-camera-action"
      data-testid="shot"
      set="onclick: onStartCamera; @class: mutableClassButton; @hidden: cameraHidden;"
    >
      <uc-icon set="@name: currentIcon"></uc-icon>
    </button>

    <div class="uc-select">
      <button class="uc-mini-btn uc-btn-microphone" set="onclick: onToggleAudio; @hidden: audioToggleMicrophoneHidden;">
        <uc-icon set="@name:toggleMicrophoneIcon"></uc-icon>
      </button>

      <uc-select
        class="uc-audio-select"
        set="$.options: audioSelectOptions; onchange: onAudioSelectChange; @hidden: audioSelectHidden; @disabled: audioSelectDisabled"
      >
      </uc-select>
    </div>
  </div>
`;class un extends K{static styleAttrs=["uc-wgt-common"];requireCtxName=!0;initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}un.EventType=N;const xh=un;class dn extends K{init$={...this.init$,visible:!1,value:0,"*commonProgress":0};initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let e=this.uploadCollection.items().some(t=>this.uploadCollection.read(t).getValue("isUploading"));this.$.visible=e}),this.sub("visible",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",e=>{this.$.value=e})}destroyCallback(){super.destroyCallback(),this._unobserveCollection?.()}}dn.template=' <uc-progress-bar set="visible: visible; value: value"></uc-progress-bar> ';class hn extends B{_value=0;_prevValue=0;_visible=!0;constructor(){super(),this.init$={...this.init$,width:0,opacity:0}}initCallback(){super.initCallback();const e=()=>{const t=this.ref.fakeProgressLine;if(!this._visible){t.classList.add("uc-fake-progress--hidden");return}this._value>0&&t.classList.add("uc-fake-progress--hidden")};this.ref.fakeProgressLine.addEventListener("animationiteration",e),this.defineAccessor("value",t=>{t!=null&&(this._prevValue=this._value,this._value=t,this._visible&&this.style.setProperty("--l-progress-value",this._value.toString()))}),this.defineAccessor("visible",t=>{this._visible=t,this.classList.toggle("uc-progress-bar--hidden",!t)})}}hn.template=`
  <div ref="fakeProgressLine" class="uc-fake-progress"></div>
  <div ref="realProgressLine" class="uc-progress"></div>
`;const ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function pn(...i){return i.reduce((e,t)=>{if(typeof t=="string")return e[t]=!0,e;for(let r of Object.keys(t))e[r]=t[r];return e},{})}function xe(...i){let e=pn(...i);return Object.keys(e).reduce((t,r)=>(e[r]&&t.push(r),t),[]).join(" ")}function bh(i,...e){let t=pn(...e);for(let r of Object.keys(t))i.classList.toggle(r,t[r])}const vh=i=>{if(!i)return ye;const e=Pe(i).filter(t=>ye.includes(t));return e.length===0?ye:e};function yh(i){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":ye,"*tabId":G.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:ht,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:_t(ye),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=i.querySelectorAll("img");for(let t of e){let r=t.src;t.src=ht,t.src=r}i.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let t=i.$["*originalUrl"],r=Me(ur(e),"preview"),o=pe(t,r),a={originalUrl:t,cdnUrlModifiers:r,cdnUrl:o,transformations:e};i.dispatchEvent(new CustomEvent("apply",{detail:a,bubbles:!0,composed:!0})),i.remove()},"*on.cancel":()=>{i.remove(),i.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}var _h="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M8.232 10 3.585 5.353l1.768-1.768L10 8.232l4.648-4.647 1.767 1.768L11.768 10l4.647 4.648-1.767 1.767L10 11.768l-4.647 4.647-1.768-1.767L8.232 10Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='m18.057 6.333-9.365 9.125a1.25 1.25 0 0 1-1.768-.023L1.92 10.296l1.791-1.744 4.132 4.243 8.47-8.253 1.744 1.79Z' clip-rule='evenodd'/></symbol><symbol fill='currentColor' viewBox='0 0 25 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.5' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='puc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#puc-icon-id__a)'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#suc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#suc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#suc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#suc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#suc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#suc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#suc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#suc-icon-id__h)'/><defs><linearGradient id='suc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>";const wh=`
  ${_h}
  <div class="uc-wrapper uc-wrapper_desktop">
    <uc-presence-toggle class="uc-network_problems_splash" set="visible: presence.networkProblems;">
      <div class="uc-network_problems_content">
        <div class="uc-network_problems_icon">
          <uc-icon name="sad"></uc-icon>
        </div>
        <div class="uc-network_problems_text">Network error</div>
      </div>
      <div class="uc-network_problems_footer">
        <uc-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></uc-btn-ui>
      </div>
    </uc-presence-toggle>
    <div class="uc-viewport">
      <div class="uc-file_type_outer">
        <div class="uc-file_type">{{fileType}}</div>
      </div>
      <div class="uc-image_container" ref="img-container-el">
        <img src="${ht}" class="uc-image uc-image_visible_from_editor" ref="img-el" />
        <uc-editor-image-cropper ref="cropper-el"></uc-editor-image-cropper>
        <uc-editor-image-fader ref="fader-el"></uc-editor-image-fader>
      </div>
      <div class="uc-info_pan">{{msg}}</div>
    </div>
    <div class="uc-toolbar">
      <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>
      <div class="uc-toolbar_content uc-toolbar_content__editor">
        <uc-editor-toolbar></uc-editor-toolbar>
      </div>
    </div>
  </div>
`;class St extends B{ctxOwner=!0;static styleAttrs=["uc-cloud-image-editor"];constructor(){super(),this.init$={...this.init$,...yh(this)}}_debouncedShowLoader=ce(this._showLoader.bind(this),300);_showLoader(e){this.$.showLoader=e}_waitForSize(){return new Promise((t,r)=>{const o=setTimeout(()=>{r(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),a=new ResizeObserver(([n])=>{n.contentRect.width>0&&n.contentRect.height>0&&(t(),clearTimeout(o),a.disconnect())});a.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const e=Fo(this.$.cdnUrl),t=yt(this.$.cdnUrl,e);if(t===this.$["*originalUrl"])return;this.$["*originalUrl"]=t;const r=kc(this.$.cdnUrl),o=Tc(r);this.$["*editorTransformations"]=o}else if(this.$.uuid){const e=yt(this.cfg.cdnCname,this.$.uuid);if(e===this.$["*originalUrl"])return;this.$["*originalUrl"]=e,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===G.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const e=await this.proxyUrl(pe(this.$["*originalUrl"],Me("json"))),t=await fetch(e).then(a=>a.json()),{width:r,height:o}=t;this.$["*imageSize"]={width:r,height:o},this.$["*tabId"]===G.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(e){e&&console.error("Failed to load image info",e)}}}async initEditor(){try{await this._waitForSize()}catch(e){this.isConnected&&console.error(e.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==ht&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",e=>{let t=this.ref["img-el"];t.src!==e&&(this._imgLoading=!0,t.src=e||ht)}),this.sub("cropPreset",e=>{this.$["*cropPresetList"]=_a(e)}),this.sub("tabs",e=>{this.$["*tabList"]=vh(e)}),this.sub("*tabId",e=>{this.ref["img-el"].className=xe("uc-image",{"uc-image_hidden_to_cropper":e===G.CROP,"uc-image_hidden_effects":e!==G.CROP})}),this.classList.add("uc-editor_ON"),this.sub("*networkProblems",e=>{this.$["presence.networkProblems"]=e,this.$["presence.modalCaption"]=!e}),this.sub("*editorTransformations",e=>{if(Object.keys(e).length===0)return;let t=this.$["*originalUrl"],r=Me(ur(e),"preview"),o=pe(t,r),a={originalUrl:t,cdnUrlModifiers:r,cdnUrl:o,transformations:e};this.dispatchEvent(new CustomEvent("change",{detail:a,bubbles:!0,composed:!0}))},!1),this.sub("uuid",e=>e&&this.updateImage()),this.sub("cdnUrl",e=>e&&this.updateImage())}}St.template=wh,St.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class fn extends B{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let t=this.$["*imageBox"];if(!t)return;if(e===""&&t.height<=E&&t.width<=E)return!0;let r=t.height<=E&&(e.includes("n")||e.includes("s")),o=t.width<=E&&(e.includes("e")||e.includes("w"));return r||o}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:r,width:o,height:a}=e,n=this.ref["svg-el"],s=ge("mask",{id:"backdrop-mask"}),c=ge("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),l=ge("rect",{x:t,y:r,width:o,height:a,fill:"black"});s.appendChild(c),s.appendChild(l);let d=ge("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});n.appendChild(d),n.appendChild(s),this._backdropMask=s,this._backdropMaskInner=l}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:r,width:o,height:a}=e;this._backdropMaskInner&&Ze(this._backdropMaskInner,{x:t,y:r,width:o,height:a})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let t of Object.values(this._frameThumbs)){let{direction:r,pathNode:o,interactionNode:a,groupNode:n}=t,s=r==="",c=r.length===2,{x:l,y:d,width:u,height:p}=e;if(s)Ze(a,{x:l,y:d,width:u,height:p});else{const g=ct(Math.min(u,p)/(Li*2+Ct)/2,0,1);let{d:m,center:_}=c?lu(e,r,g):uu(e,r,g);const w=Math.max(ya*ct(Math.min(u,p)/ya/3,0,1),cu);Ze(a,{x:_[0]-w,y:_[1]-w,width:w*2,height:w*2}),Ze(o,{d:m})}let f=this._shouldThumbBeDisabled(r);n.setAttribute("class",xe("uc-thumb",{"uc-thumb--hidden":f,"uc-thumb--visible":!f}))}Ze(this._frameGuides,{x:e.x-Xe*.5,y:e.y-Xe*.5,width:e.width+Xe,height:e.height+Xe})}}_createThumb(e,t){let r=ge("g");r.classList.add("uc-thumb"),r.setAttribute("with-effects","");let o=ge("rect",{fill:"transparent"}),a=ge("path",{stroke:"currentColor",fill:"none","stroke-width":va});r.appendChild(a),r.appendChild(o),e[t]={direction:t,pathNode:a,interactionNode:o,groupNode:r},t===""&&(r.style.cursor="move"),o.addEventListener("pointerdown",this._handlePointerDown.bind(this,t))}_createThumbs(){const e={};for(let t=0;t<3;t++)for(let r=0;r<3;r++){let o=`${["n","","s"][t]}${["w","","e"][r]}`;o!==""&&this._createThumb(e,o)}return this._createThumb(e,""),e}_createGuides(){let e=ge("svg"),t=ge("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"currentColor","stroke-width":Xe,"stroke-opacity":.5});e.appendChild(t);for(let r=1;r<=2;r++){let o=ge("line",{x1:`${yr*r}%`,y1:"0%",x2:`${yr*r}%`,y2:"100%",stroke:"currentColor","stroke-width":Xe,"stroke-opacity":.3});e.appendChild(o)}for(let r=1;r<=2;r++){let o=ge("line",{x1:"0%",y1:`${yr*r}%`,x2:"100%",y2:`${yr*r}%`,stroke:"currentColor","stroke-width":Xe,"stroke-opacity":.3});e.appendChild(o)}return e.classList.add("uc-guides","uc-guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],t=document.createDocumentFragment(),r=this._createGuides();t.appendChild(r);let o=this._createThumbs();for(let{groupNode:a}of Object.values(o))t.appendChild(a);e.appendChild(t),this._frameThumbs=o,this._frameGuides=r}_handlePointerDown(e,t){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let o=this.$["*cropBox"],{x:a,y:n}=this.ref["svg-el"].getBoundingClientRect(),s=t.x-a,c=t.y-n;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[s,c],this._dragStartCrop={...o}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let t=this.ref["svg-el"],{x:r,y:o}=t.getBoundingClientRect(),a=e.x-r,n=e.y-o,s=a-this._dragStartPoint[0],c=n-this._dragStartPoint[1],{direction:l}=this._draggingThumb;const d=this._calcCropBox(l,[s,c]);d&&(this.$["*cropBox"]=d)}_calcCropBox(e,t){const[r,o]=t;let a=this.$["*imageBox"],n=this._dragStartCrop??this.$["*cropBox"];const s=this.$["*cropPresetList"]?.[0],c=s?s.width/s.height:void 0;if(e===""?n=hu({rect:n,delta:[r,o],imageBox:a}):n=_u({rect:n,delta:[r,o],direction:e,aspectRatio:c,imageBox:a}),!Object.values(n).every(l=>Number.isFinite(l)&&l>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:n});return}return _r(wr(n),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let t=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let a=r.interactionNode.getBoundingClientRect(),n={x:a.x,y:a.y,width:a.width,height:a.height};return wu(n,[e.x,e.y])});this._hoverThumb=t,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?du(e.direction):"initial"}_createMask(e){if(this._frameImage){this._frameImage.setAttribute("href",e);return}let t=this.ref["svg-el"],r=document.createDocumentFragment(),o=ge("image",{href:e});o.setAttribute("class","uc-cloud-mask"),r.appendChild(o),t.appendChild(r),this._frameImage=o}_updateMask(){let e=this.$["*cropBox"];if(!e||!this._frameImage)return;let{x:t,y:r,width:o,height:a}=e;Ze(this._frameImage,{x:t,y:r,height:a,width:o})}_render(){this._updateBackdrop(),this._updateFrame(),this._updateMask()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:t})=>t).forEach(t=>{t.setAttribute("class",xe("uc-thumb",{"uc-thumb--hidden":!e,"uc-thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=E||e.width<=E,window.requestAnimationFrame(()=>{this._render()}))}),this.subConfigValue("cloudImageEditorMaskHref",e=>{e&&this._createMask(e)}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",xe({"uc-guides--hidden":this._guidesHidden,"uc-guides--visible":!this._guidesHidden&&e,"uc-guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}fn.template=' <svg class="uc-svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Pr extends B{init$={...this.init$,active:!1,title:"",icon:"","on.click":null,"title-prop":""};initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.sub("title",e=>{this._titleEl&&(this._titleEl.style.display=e?"block":"none")}),this.sub("active",e=>{this.className=xe({"uc-active":e,"uc-not_active":!e})}),this.sub("on.click",e=>{this.onclick=e})}}Pr.template=`
  <button role="option" type="button" set="@aria-label:title-prop;" l10n="@title:title-prop;">
    <uc-icon set="@name: icon;"></uc-icon>
    <div class="uc-title" ref="title-el">{{title}}</div>
  </button>
`;function kh(i){let e=i+90;return e=e>=360?0:e,e}function Ch(i,e){return i==="rotate"?kh(e):["mirror","flip"].includes(i)?!e:null}class gn extends Pr{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-crop",{name:this.l10n(e).toLowerCase()})))}),this.$["on.click"]=()=>{let e=this.$["*cropperEl"].getValue(this._operation),t=Ch(this._operation,e);this.$["*cropperEl"].setValue(this._operation,t)}}}const $t={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ve="original";class mn extends B{init$={...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":e=>{this.$["*faderEl"].set(e),this.$.value=e}};setOperation(e,t){this._controlType=e==="filter"?$t.FILTER:$t.COLOR_OPERATION,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=t,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ve?void 0:this.$.value,filter:this._filter===Ve?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:e,zero:t}=at[this._operation],[r,o]=e;this.$.min=r,this.$.max=o,this.$.zero=t;let a=this.$["*editorTransformations"][this._operation];if(this._controlType===$t.FILTER){let n=o;if(a){let{name:s,amount:c}=a;n=s===this._filter?c:o}this.$.value=n,this.$.defaultValue=n}if(this._controlType===$t.COLOR_OPERATION){let n=typeof a<"u"?a:t;this.$.value=n,this.$.defaultValue=n}}apply(){let e;this._controlType===$t.FILTER?this._filter===Ve?e=null:e={name:this._filter,amount:this.$.value}:e=this.$.value;let t={...this.$["*editorTransformations"],[this._operation]:e};this.$["*editorTransformations"]=t}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",e=>{this._originalUrl=e}),this.sub("value",e=>{let t=`${this._filter||this._operation} ${e}`;this.$["*operationTooltip"]=t})}}mn.template=`
  <uc-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></uc-slider-ui>
`;function Rr(i){let e=new Image;return{promise:new Promise((o,a)=>{e.src=i,e.onload=o,e.onerror=a}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=ht)}}}function Gi(i){let e=[];for(let a of i){let n=Rr(a);e.push(n)}let t=e.map(a=>a.image);return{promise:Promise.allSettled(e.map(a=>a.promise)),images:t,cancel:()=>{e.forEach(a=>{a.cancel()})}}}class Wi extends Pr{constructor(){super(),this.init$={...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null}}_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,r=Math.ceil(t*e),o=t>=2?"lightest":"normal",a=100,n={...this.$["*editorTransformations"]};return n[this._operation]=this._filter!==Ve?{name:this._filter,amount:a}:void 0,pe(this._originalUrl,Me(Go,ur(n),`quality/${o}`,`scale_crop/${r}x${r}/center`))}async _observerCallback(e,t){if(e[0].isIntersecting){let o=await this.proxyUrl(this._previewSrc()),a=this.ref["preview-el"],{promise:n,cancel:s}=Rr(o);this._cancelPreload=s,n.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{a.style.backgroundImage=`url(${o})`,a.setAttribute("loaded",""),t.unobserve(this)})}else this._cancelPreload?.()}initCallback(){super.initCallback(),this.$["on.click"]=()=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",t=>{this._operation="filter",this._filter=t,this.$.isOriginal=t===Ve,this.$.icon=this.$.isOriginal?"original":"slider",this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-filter",{name:t.toLowerCase()}))}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("uc-original-icon"):this._observer.observe(this),this.sub("*currentFilter",t=>{this.$.active=t&&t===this._filter}),this.sub("isOriginal",t=>{this.$.iconSize=t?40:20}),this.sub("active",t=>{if(this.$.isOriginal)return;let r=this.ref["icon-el"];r.style.opacity=t?"1":"0";let o=this.ref["preview-el"];t?o.style.opacity="0":o.style.backgroundImage&&(o.style.opacity="1")}),this.sub("*networkProblems",async t=>{if(!t){let r=await this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"];o.style.backgroundImage&&(o.style.backgroundImage="none",o.style.backgroundImage=`url(${r})`)}})}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload?.()}}Wi.template=`
  <button type="button" role="option" l10n="@title:title-prop;@aria-label:title-prop">
    <div class="uc-preview" ref="preview-el"></div>
    <uc-icon ref="icon-el" set="@name: icon; @size: iconSize;"></uc-icon>
  </button>
`;class xn extends Pr{_operation="";initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-tuning",{name:this.l10n(e).toLowerCase()})),this.bindL10n("title",()=>this.l10n(e)))}),this.sub("*editorTransformations",e=>{if(!this._operation)return;let{zero:t}=at[this._operation],r=e[this._operation],o=typeof r<"u"?r!==t:!1;this.$.active=o})}}function Eh(i,e){let t={};for(let r of e){let o=i[r];(i.hasOwnProperty(r)||o!==void 0)&&(t[r]=o)}return t}function qi(i,e,t){let o=window.devicePixelRatio,a=Math.min(Math.ceil(e*o),3e3),n=o>=2?"lightest":"normal";return pe(i,Me(Go,ur(t),`quality/${n}`,`stretch/off/-/resize/${a}x`,`@clib/${kr}/${Cr}/uc-cloud-image-editor/`))}function Ah(i){return i?[({dimensions:t,coords:r})=>[...t,...r].every(o=>Number.isInteger(o)&&Number.isFinite(o)),({dimensions:t,coords:r})=>t.every(o=>o>0)&&r.every(o=>o>=0)].every(t=>t(i)):!0}class bn extends B{ctxOwner=!0;constructor(){super(),this.init$={...this.init$,image:null,"*padding":su,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=ce(this._commit.bind(this),300),this._handleResizeThrottled=ji(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let e=this.$["*editorTransformations"],t=Eh(e,Object.keys(this.$["*operations"])),r={...this.$["*operations"],...t};this.$["*operations"]=r}_initCanvas(){let e=this.ref["canvas-el"],t=e.getContext("2d"),r=this.offsetWidth,o=this.offsetHeight,a=window.devicePixelRatio;e.style.width=`${r}px`,e.style.height=`${o}px`,e.width=r*a,e.height=o*a,t?.scale(a,a),this._canvas=e,this._ctx=t}_alignImage(){if(!this._isActive||!this.$.image)return;let e=this.$.image,t=this.$["*padding"],r=this.$["*operations"],{rotate:o}=r,a={width:this.offsetWidth,height:this.offsetHeight},n=Et({width:e.naturalWidth,height:e.naturalHeight},o),s;if(n.width>a.width-t*2||n.height>a.height-t*2){let c=n.width/n.height,l=a.width/a.height;if(c>l){let d=a.width-t*2,u=d/c,p=0+t,f=t+(a.height-t*2)/2-u/2;s={x:p,y:f,width:d,height:u}}else{let d=a.height-t*2,u=d*c,p=t+(a.width-t*2)/2-u/2,f=0+t;s={x:p,y:f,width:u,height:d}}}else{let{width:c,height:l}=n,d=t+(a.width-t*2)/2-c/2,u=t+(a.height-t*2)/2-l/2;s={x:d,y:u,width:c,height:l}}this.$["*imageBox"]=wr(s)}_alignCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:o}=r,a=this.$["*editorTransformations"].crop,{width:n,x:s,y:c}=this.$["*imageBox"];if(a){let{dimensions:[u,p],coords:[f,g]}=a,{width:m}=Et(this._imageSize,o),_=n/m;e=_r(wr({x:s+f*_,y:c+g*_,width:u*_,height:p*_}),this.$["*imageBox"])}const l=this.$["*cropPresetList"]?.[0],d=l?l.width/l.height:void 0;if(!ku(e,t)||d&&!Cu(e,d)){const u=t.width/t.height;let p=t.width,f=t.height;d&&(u>d?p=Math.min(t.height*d,t.width):f=Math.min(t.width/d,t.height)),e={x:t.x+t.width/2-p/2,y:t.y+t.height/2-f/2,width:p,height:f}}this.$["*cropBox"]=_r(wr(e),this.$["*imageBox"])}_drawImage(){let e=this._ctx;if(!e)return;let t=this.$.image,r=this.$["*imageBox"],o=this.$["*operations"],{mirror:a,flip:n,rotate:s}=o,c=Et({width:r.width,height:r.height},s);e.save(),e.translate(r.x+r.width/2,r.y+r.height/2),e.rotate(s*Math.PI*-1/180),e.scale(a?-1:1,n?-1:1),e.drawImage(t,-c.width/2,-c.height/2,c.width,c.height),e.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let e=this._canvas;this._ctx.clearRect(0,0,e.width,e.height),this._drawImage()}_animateIn({fromViewer:e}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=xe({"uc-active_from_viewer":e,"uc-active_from_editor":!e,"uc-inactive_to_editor":!1})}))}_getCropDimensions(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:o}=r,{width:a,height:n}=t,{width:s,height:c}=Et(this._imageSize,o),{width:l,height:d}=e,u=a/s,p=n/c;return[ct(Math.round(l/u),1,s),ct(Math.round(d/p),1,c)]}_getCropTransformation(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:o}=r,{width:a,height:n,x:s,y:c}=t,{width:l,height:d}=Et(this._imageSize,o),{x:u,y:p}=e,f=a/l,g=n/d,m=this._getCropDimensions(),_={dimensions:m,coords:[ct(Math.round((u-s)/f),0,l-m[0]),ct(Math.round((p-c)/g),0,d-m[1])]};if(!Ah(_)){console.error("Cropper is trying to create invalid crop object",{payload:_});return}if(!(m[0]===l&&m[1]===d))return _}_commit(){if(!this.isConnected||!this._imageSize)return;let e=this.$["*operations"],{rotate:t,mirror:r,flip:o}=e,a=this._getCropTransformation(),s={...this.$["*editorTransformations"],crop:a,rotate:t,mirror:r,flip:o};this.$["*editorTransformations"]=s}setValue(e,t){this.$["*operations"]={...this.$["*operations"],[e]:t},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(e){return this.$["*operations"][e]}async activate(e,{fromViewer:t}={}){if(!this._isActive){this._isActive=!0,this._imageSize=e,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:t})}catch(r){console.error("Failed to activate cropper",{error:r})}this._observer=new ResizeObserver(([r])=>{r.contentRect.width>0&&r.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:e=!1}={}){this._isActive&&(!e&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=xe({"uc-active_from_viewer":!1,"uc-active_from_editor":!1,"uc-inactive_to_editor":!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),this._observer?.disconnect())}_transitionToCrop(){let e=this._getCropDimensions(),t=Math.min(this.offsetWidth,e[0])/this.$["*cropBox"].width,r=Math.min(this.offsetHeight,e[1])/this.$["*cropBox"].height,o=Math.min(t,r),a=this.$["*cropBox"].x+this.$["*cropBox"].width/2,n=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${o}) translate(${(this.offsetWidth/2-a)/o}px, ${(this.offsetHeight/2-n)/o}px)`,this.style.transformOrigin=`${a}px ${n}px`}_transitionToImage(){let e=this.$["*cropBox"].x+this.$["*cropBox"].width/2,t=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${e}px ${t}px`}_reset(){this._isActive||(this.$.image=null)}async _waitForImage(e,t){let r=this.offsetWidth;t={...t,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let o=await this.proxyUrl(qi(e,r,t)),{promise:a,cancel:n,image:s}=Rr(o),c=this._handleImageLoading(o);return s.addEventListener("load",c,{once:!0}),s.addEventListener("error",c,{once:!0}),this._cancelPreload?.(),this._cancelPreload=n,a.then(()=>s).catch(l=>(console.error("Failed to load image",{error:l}),this.$["*networkProblems"]=!0,Promise.resolve(s)))}_handleImageLoading(e){let t="crop",r=this.$["*loadingOperations"];return r.get(t)||r.set(t,new Map),r.get(t).get(e)||(r.set(t,r.get(t).set(e,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(t)?.has(e)&&(r.get(t).delete(e),this.$["*loadingOperations"]=r)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",e=>{e||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}bn.template=`
  <canvas class="uc-canvas" ref="canvas-el"></canvas>
  <uc-crop-frame ref="frame-el"></uc-crop-frame>
`;function vn(i,e,t){let r=Array(t);t--;for(let o=t;o>=0;o--)r[o]=Math.ceil((o*e+(t-o)*i)/t);return r}function Ih(i){return i.reduce((e,t,r)=>r<i.length-1?[...e,[t,i[r+1]]]:e,[])}function Th(i,e,t){let r=Ih(i).find(([o,a])=>o<=e&&e<=a);return i.map(o=>{let a=Math.abs(r[0]-r[1]),n=Math.abs(e-r[0])/a;return r[0]===o?e>t?1:1-n:r[1]===o?e>=t?n:1:0})}function Sh(i,e){return i.map((t,r)=>t<e?i.length-r:r)}function yn(i,e){let t=at[i].keypointsNumber,{range:r,zero:o}=at[i];return[...new Set([...vn(r[0],o,t+1),...vn(o,r[1],t+1),o,e])].sort((a,n)=>a-n)}class $h extends B{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=ce(this._addKeypoint.bind(this),600),this.classList.add("uc-inactive_to_cropper")}_handleImageLoading(e){let t=this._operation,r=this.$["*loadingOperations"];return r.get(t)||r.set(t,new Map),r.get(t).get(e)||(r.set(t,r.get(t).set(e,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(t)?.has(e)&&(r.get(t).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:t}=e;t&&(t.style.opacity=e.opacity.toString(),t.style.zIndex=e.zIndex.toString())}})}async _imageSrc({url:e=this._url,filter:t=this._filter,operation:r,value:o}={}){let a={...this._transformations};r&&(a[r]=t?{name:t,amount:o}:o);let n=this.offsetWidth;return await this.proxyUrl(qi(e,n,a))}async _constructKeypoint(e,t){return{src:await this._imageSrc({operation:e,value:t}),image:null,opacity:0,zIndex:0,value:t}}_isSame(e,t){return this._operation===e&&this._filter===t}async _addKeypoint(e,t,r){let o=()=>!this._isSame(e,t)||this._value!==r||!!this._keypoints.find(c=>c.value===r);if(o())return;let a=await this._constructKeypoint(e,r),n=new Image;n.src=a.src;let s=this._handleImageLoading(a.src);n.addEventListener("load",s,{once:!0}),n.addEventListener("error",s,{once:!0}),a.image=n,n.classList.add("uc-fader-image"),n.addEventListener("load",()=>{if(o())return;let c=this._keypoints,l=c.findIndex(u=>u.value>r),d=l<c.length?c[l].image:null;!this._container||d&&!this._container.contains(d)||(c.splice(l,0,a),this._container.insertBefore(n,d),this._update(e,r))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,t){this._operation=e,this._value=t;let{zero:r}=at[e],o=this._keypoints.map(s=>s.value),a=Th(o,t,r),n=Sh(o,r);for(let[s,c]of Object.entries(this._keypoints))c.opacity=a[s],c.zIndex=n[s];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("uc-fader-image","uc-fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let t=document.createElement("div");e.appendChild(t);let r=this._keypoints.map(l=>l.src),{images:o,promise:a,cancel:n}=Gi(r);o.forEach(l=>{let d=this._handleImageLoading(l.src);l.addEventListener("load",d),l.addEventListener("error",d)}),this._cancelLastImages=()=>{n(),this._cancelLastImages=void 0};let s=this._operation,c=this._filter;await a,this._isActive&&this._isSame(s,c)&&(this._container&&this._container.remove(),this._container=t,this._keypoints.forEach((l,d)=>{let u=o[d];u.classList.add("uc-fader-image"),l.image=u,this._container.appendChild(u)}),this.appendChild(e),this._flush())}async setTransformations(e){if(this._transformations=e,this._previewImage){let t=await this._imageSrc(),r=this._handleImageLoading(t);this._previewImage.src=t,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}async preload({url:e,filter:t,operation:r,value:o}){this._cancelBatchPreload&&this._cancelBatchPreload();let a=yn(r,o),n=await Promise.all(a.map(c=>this._imageSrc({url:e,filter:t,operation:r,value:c}))),{cancel:s}=Gi(n);this._cancelBatchPreload=s}_setOriginalSrc(e){let t=this._previewImage||this._createPreviewImage();if(!this.contains(t)&&this.appendChild(t),this._previewImage=t,t.src===e){t.style.opacity="1",t.style.transform="scale(1)",this.className=xe({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1});return}t.style.opacity="0";let r=this._handleImageLoading(e);t.addEventListener("error",r,{once:!0}),t.src=e,t.addEventListener("load",()=>{r(),t&&(t.style.opacity="1",t.style.transform="scale(1)",this.className=xe({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1}))},{once:!0}),t.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}async activate({url:e,operation:t,value:r,filter:o,fromViewer:a}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=t||"initial",this._value=r,this._filter=o,this._fromViewer=a,typeof r!="number"&&!o){let s=await this._imageSrc({operation:t,value:r});this._setOriginalSrc(s),this._container&&this._container.remove();return}this._keypoints=await Promise.all(yn(t,r).map(s=>this._constructKeypoint(t,s))),this._update(t,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=xe({"uc-active_from_viewer":!1,"uc-active_from_cropper":!1,"uc-inactive_to_cropper":!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const Oh=1;class _n extends B{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:t,deltaX:r}=e;Math.abs(r)>Oh?this.scrollLeft+=r:this.scrollLeft+=t},{passive:!1}),this.addEventListener("scroll",()=>{},{passive:!0})}}_n.template=" <slot></slot> ";function Lh(i){return`
    <uc-presence-toggle
      class="uc-tab-toggle"
      set="visible: presence.tabToggle.${i}; styles: presence.tabToggleStyles;"
    >
      <uc-btn-ui
        theme="tab"
        ref="tab-toggle-${i}"
        data-id="${i}"
        icon="${i}"
        set="onclick: on.clickTab; aria-role:tab_role; aria-controls:tab_${i}; title-prop: a11y-editor-tab-${i}"
      >
      </uc-btn-ui>
    </uc-presence-toggle>
  `}function Uh(i){return`
    <uc-presence-toggle
      id="tab_${i}"
      class="uc-tab-content"
      set="visible: presence.tabContent.${i}; styles: presence.tabContentStyles"
    >
      <uc-editor-scroller hidden-scrollbar>
        <div class="uc-controls-list_align">
          <div
            role="listbox"
            aria-orientation="horizontal"
            class="uc-controls-list_inner"
            ref="controls-list-${i}"
          ></div>
        </div>
      </uc-editor-scroller>
    </uc-presence-toggle>
  `}class wn extends B{constructor(){super(),this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ve,"*currentOperation":null,showLoader:!1,filters:$c,colorOperations:Sc,cropOperations:Oc,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"uc-sub-toolbar--top-hidden",visible:"uc-sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"uc-sub-toolbar--bottom-hidden",visible:"uc-sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"uc-tab-content--hidden",visible:"uc-tab-content--visible"},"presence.tabToggleStyles":{hidden:"uc-tab-toggle--hidden",visible:"uc-tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"uc-tab-toggles--hidden",visible:"uc-tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload?.(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{const t=e.currentTarget.getAttribute("data-id");t&&this._activateTab(t,{fromViewer:!1})},tab_role:"tab",[`tab_${G.TUNING}`]:`tab_${G.TUNING}`,[`tab_${G.CROP}`]:`tab_${G.CROP}`,[`tab_${G.FILTERS}`]:`tab_${G.FILTERS}`,cancel:"cancel",apply:"apply","a11y-editor-tab-filters":"a11y-editor-tab-filters","a11y-editor-tab-tuning":"a11y-editor-tab-tuning","a11y-editor-tab-crop":"a11y-editor-tab-crop"},this._debouncedShowLoader=ce(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===G.TUNING&&this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",!1)}_createOperationControl(e){let t=new xn;return t.operation=e,t}_createFilterControl(e){let t=new Wi;return t.filter=e,t}_createToggleControl(e){let t=new gn;return t.operation=e,t}_renderControlsList(e){let t=this.ref[`controls-list-${e}`],r=document.createDocumentFragment();e===G.CROP?this.$.cropOperations.forEach(o=>{let a=this._createToggleControl(o);r.appendChild(a)}):e===G.FILTERS?[Ve,...this.$.filters].forEach(o=>{let a=this._createFilterControl(o);r.appendChild(a)}):e===G.TUNING&&this.$.colorOperations.forEach(o=>{let a=this._createOperationControl(o);r.appendChild(a)}),[...r.children].forEach((o,a)=>{a===r.childNodes.length-1&&o.classList.add("uc-controls-list_last-item")}),t.innerHTML="",t.appendChild(r)}_activateTab(e,{fromViewer:t}){this.$["*tabId"]=e,e===G.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:t})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:t}),this.$["*cropperEl"].deactivate());for(let r of ye){let o=r===e,a=this.ref[`tab-toggle-${r}`];a.active=o,o?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=o}}_unmountTabControls(e){let t=this.ref[`controls-list-${e}`];t&&(t.innerHTML="")}_syncTabIndicator(){let e=this.ref[`tab-toggle-${this.$["*tabId"]}`],t=this.ref["tabs-indicator"];t.style.transform=`translateX(${e.offsetLeft}px)`}async _preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let e=this.$["*imgContainerEl"].offsetWidth,t=await this.proxyUrl(qi(this.$["*originalUrl"],e,this.$["*editorTransformations"]));this._cancelPreload?.();let{cancel:r}=Gi([t]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}_updateInfoTooltip=ce(()=>{const e=this.$["*editorTransformations"],t=this.$["*currentOperation"];let r="",o=!1;if(this.$["*tabId"]===G.FILTERS)if(o=!0,this.$["*currentFilter"]&&e?.filter?.name===this.$["*currentFilter"]){let a=e?.filter?.amount||100;r=this.$["*currentFilter"]+" "+a}else r=this.l10n(Ve);else if(this.$["*tabId"]===G.TUNING&&t){o=!0;let a=e?.[t]||at[t].zero;r=this.l10n(t)+" "+a}o&&(this.$["*operationTooltip"]=r),this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",o)},0);initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",e=>{e&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",e=>{let t=e?.filter?.name;this.$["*currentFilter"]!==t&&(this.$["*currentFilter"]=t)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)}),this.sub("*loadingOperations",e=>{let t=!1;for(let[,r]of e.entries()){if(t)break;for(let[,o]of r.entries())if(o){t=!0;break}}this._debouncedShowLoader(t)}),this.sub("*showSlider",e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e}),this.sub("*tabList",e=>{this.$["presence.tabToggles"]=e.length>1;for(const t of ye){this.$[`presence.tabToggle.${t}`]=e.includes(t);const r=this.ref[`tab-toggle-${t}`];r.style.gridColumn=e.indexOf(t)+1}e.includes(this.$["*tabId"])||this._activateTab(e[0],{fromViewer:!1})}),this._updateInfoTooltip()}destroyCallback(){this.$["*showSlider"]=!1}}wn.template=`
  <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>
  <div class="uc-info-tooltip_container">
    <div class="uc-info-tooltip_wrapper">
      <div ref="tooltip-el" class="uc-info-tooltip uc-info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="uc-toolbar-container">
    <uc-presence-toggle
      role="tablist"
      class="uc-sub-toolbar"
      set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles"
    >
      <div class="uc-tab-content-row">${ye.map(Uh).join("")}</div>
      <div class="uc-controls-row">
        <uc-presence-toggle
          class="uc-tab-toggles"
          set="visible: presence.tabToggles; styles: presence.tabTogglesStyles"
        >
          <div ref="tabs-indicator" class="uc-tab-toggles_indicator"></div>
          ${ye.map(Lh).join("")}
        </uc-presence-toggle>
        <uc-btn-ui style="order: -1" theme="secondary-icon" icon="closeMax" set="onclick: on.cancel; title-prop:cancel">
        </uc-btn-ui>
        <uc-btn-ui theme="primary-icon" icon="done" set="onclick: on.apply; title-prop:apply"> </uc-btn-ui>
      </div>
    </uc-presence-toggle>
    <uc-presence-toggle
      class="uc-sub-toolbar"
      set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles"
    >
      <div class="uc-slider">
        <uc-editor-slider ref="slider-el"></uc-editor-slider>
      </div>
      <div class="uc-controls-row">
        <uc-btn-ui theme="secondary" set="onclick: on.cancelSlider" l10n="@text:cancel"> </uc-btn-ui>
        <uc-btn-ui theme="primary" set="onclick: on.applySlider" l10n="@text:apply"> </uc-btn-ui>
      </div>
    </uc-presence-toggle>
  </div>
`;class Xi extends B{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null,"aria-role":"","aria-controls":"","title-prop":""},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return xe("uc-icon",{"uc-icon_left":!this._iconReversed,"uc-icon_right":this._iconReversed,"uc-icon_hidden":this._iconHidden,"uc-icon_single":this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=`uc-${e}`)}),this.sub("text",e=>{this._iconSingle=!1}),this.hasAttribute("theme")||this.setAttribute("theme","default"),this.defineAccessor("aria-role",e=>{this.$["aria-role"]=e||""}),this.defineAccessor("aria-controls",e=>{this.$["aria-controls"]=e||""}),this.defineAccessor("title-prop",e=>{this.$["title-prop"]=e||""})}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Xi.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),Xi.template=`
  <button
    type="button"
    set="@role:aria-role; @aria-controls: aria-controls; @aria-label:title-prop"
    l10n="@title:title-prop;"
  >
    <uc-icon set="className: iconCss; @name: icon; @hidden: !icon"></uc-icon>
    <div class="uc-text">{{text}}</div>
  </button>
`;class kn extends B{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),t=this.ref["line-el"];t.style.transition="transform 1s",t.style.opacity="1",t.style.transform=`translateX(${e}px)`,t.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}kn.template=`
  <div class="uc-inner">
    <div class="uc-line" ref="line-el"></div>
  </div>
`;const Dr={transition:"uc-transition",visible:"uc-visible",hidden:"uc-hidden"};class Cn extends B{constructor(){super(),this._visible=!1,this._visibleStyle=Dr.visible,this._hiddenStyle=Dr.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",bh(this,{[Dr.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.classList.toggle("uc-initial",!0),this._externalTransitions||this.classList.add(Dr.transition),this._handleVisible(),setTimeout(()=>{this.classList.toggle("uc-initial",!1)},0)}}Cn.template="<slot></slot> ";class En extends B{init$={...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e),this.$.onInput&&this.$.onInput(e)},"on.sliderChange":()=>{let e=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(e)}};constructor(){super(),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",t=>{this.$.disabled=t}),this.defineAccessor("min",t=>{this.$.min=t}),this.defineAccessor("max",t=>{this.$.max=t}),this.defineAccessor("defaultValue",t=>{this.$.defaultValue=t,this.ref["input-el"].value=t,this._updateValue(t)}),this.defineAccessor("zero",t=>{this._zero=t}),this.defineAccessor("onInput",t=>{t&&(this.$.onInput=t)}),this.defineAccessor("onChange",t=>{t&&(this.$.onChange=t)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let t=parseInt(this.ref["input-el"].value,10);this._updateValue(t)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let t=parseInt(this.ref["input-el"].value,10);this._updateValue(t)},0),this.sub("disabled",t=>{let r=this.ref["input-el"];t?r.setAttribute("disabled","disabled"):r.removeAttribute("disabled")});let e=this.ref["input-el"];e.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),e.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(e){this._updateZeroDot(e);let{width:t}=this.getBoundingClientRect(),a=100/(this.$.max-this.$.min)*(e-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${a}px)`})}_updateZeroDot(e){if(!this._zeroDotEl)return;e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="1";let{width:t}=this.getBoundingClientRect(),a=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${a}px)`})}_updateSteps(){let t=this.ref["steps-el"],{width:r}=t.getBoundingClientRect(),o=Math.ceil(r/2),a=Math.ceil(o/15)-2;if(this._stepsCount===a)return;let n=document.createDocumentFragment(),s=document.createElement("div"),c=document.createElement("div");s.className="uc-minor-step",c.className="uc-border-step",n.appendChild(c);for(let d=0;d<a;d++)n.appendChild(s.cloneNode());n.appendChild(c.cloneNode());for(let d=0;d<a;d++)n.appendChild(s.cloneNode());n.appendChild(c.cloneNode());let l=document.createElement("div");l.className="uc-zero-dot",n.appendChild(l),this._zeroDotEl=l,t.innerHTML="",t.appendChild(n),this._stepsCount=a}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}En.template=`
  <div class="uc-steps" ref="steps-el"></div>
  <div ref="thumb-el" class="uc-thumb"></div>
  <input
    class="uc-input"
    type="range"
    ref="input-el"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class Mh extends K{couldBeCtxOwner=!0;activityType=y.activities.CLOUD_IMG_EDIT;_entry;_instance;get activityParams(){const e=super.activityParams;if("internalId"in e)return e;throw new Error("Cloud Image Editor activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.subConfigValue("cropPreset",e=>{this._instance&&this._instance.getAttribute("crop-preset")!==e&&this._instance.setAttribute("crop-preset",e)}),this.subConfigValue("cloudImageEditorTabs",e=>{this._instance&&this._instance.getAttribute("tabs")!==e&&this._instance.setAttribute("tabs",e)})}handleApply(e){if(!this._entry)return;let t=e.detail;this._entry.setMultipleValues({cdnUrl:t.cdnUrl,cdnUrlModifiers:t.cdnUrlModifiers}),this.modalManager.close(y.activities.CLOUD_IMG_EDIT),this.historyBack()}handleCancel(){this.modalManager.close(y.activities.CLOUD_IMG_EDIT),this.historyBack()}mountEditor(){const{internalId:e}=this.activityParams,t=this.uploadCollection.read(e);if(!t)throw new Error(`Entry with internalId "${e}" not found`);this._entry=t;const r=this._entry.getValue("cdnUrl");if(!r)throw new Error(`Entry with internalId "${e}" hasn't uploaded yet`);const o=new St,a=this.cfg.cropPreset,n=this.cfg.cloudImageEditorTabs;o.setAttribute("ctx-name",this.ctxName),o.setAttribute("cdn-url",r),a&&o.setAttribute("crop-preset",a),n&&o.setAttribute("tabs",n),o.addEventListener("apply",s=>{const c=s;this.handleApply(c),this.debugPrint('editor event "apply"',c.detail)}),o.addEventListener("cancel",s=>{const c=s;this.handleCancel(),this.debugPrint('editor event "cancel"',c.detail)}),o.addEventListener("change",s=>{const c=s;this.debugPrint('editor event "change"',c.detail)}),this.innerHTML="",this.appendChild(o),this._instance=o}unmountEditor(){this._instance=void 0,this._entry=void 0,this.innerHTML=""}}const Ph=function(i){return i.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Rh=function(i,e="i"){const t=i.split("*").map(Ph);return new RegExp("^"+t.join(".+")+"$",e)};function Dh(i,e){return window.getComputedStyle(i).getPropertyValue(e).trim()}const zh=["--uc-font-family","--uc-font-size","--uc-line-height","--uc-button-size","--uc-preview-size","--uc-input-size","--uc-padding","--uc-radius","--uc-transition","--uc-background","--uc-foreground","--uc-primary","--uc-primary-hover","--uc-primary-transparent","--uc-primary-foreground","--uc-secondary","--uc-secondary-hover","--uc-secondary-foreground","--uc-muted","--uc-muted-foreground","--uc-destructive","--uc-destructive-foreground","--uc-border"];function Fh(i){return zh.reduce((e,t)=>{const r=Dh(i,t);return r&&(e[t]=r),e},{})}const Vh=["selected-files-change","toolbar-state-change"],Nh=i=>!i||typeof i!="object"?!1:"type"in i&&Vh.includes(i.type);class Bh{_handlerMap=new Map;_context;constructor(e){this._context=e,window.addEventListener("message",this._handleMessage)}_handleMessage=e=>{if(e.source!==this._context)return;const t=e.data;if(!Nh(t))return;const r=this._handlerMap.get(t.type);if(r)for(const o of r)o(t)};on(e,t){const r=this._handlerMap.get(e)??new Set;this._handlerMap.has(e)||this._handlerMap.set(e,r),r.add(t)}send(e){this._context.postMessage(e,"*")}destroy(){window.removeEventListener("message",this._handleMessage)}}function jh(i){let e=[];for(let[t,r]of Object.entries(i))r==null||typeof r=="string"&&r.length===0||e.push(`${t}=${encodeURIComponent(r)}`);return e.join("&")}const Hh=()=>{const i=globalThis.top??globalThis.parent??globalThis.self;try{return i.location.origin}catch(e){return console.warn("Unable to access top-level window location:",e),globalThis.location.origin}},Gh={[lt.GDRIVE]:"ngdrive"};class An extends K{couldBeCtxOwner=!0;activityType=y.activities.EXTERNAL;constructor(){super(),this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],total:0,isSelectionReady:!1,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1,counterText:"",doneBtnTextClass:"uc-hidden",toolbarVisible:!0,onDone:()=>{for(const e of this.$.selectedList){const t=this.extractUrlFromSelectedFile(e),{filename:r}=e,{externalSourceType:o}=this.activityParams;this.api.addFileFromUrl(t,{fileName:r,source:o})}this.$["*currentActivity"]=y.activities.UPLOAD_LIST,this.modalManager.open(y.activities.UPLOAD_LIST)},onCancel:()=>{this.historyBack()},onSelectAll:()=>{this._messageBridge?.send({type:"select-all"})},onDeselectAll:()=>{this._messageBridge?.send({type:"deselect-all"})}}}get activityParams(){const e=super.activityParams;if("externalSourceType"in e)return e;throw new Error("External Source activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:e}=this.activityParams;if(!e){this.modalManager.close(this.$["*currentActivity"]),this.$["*currentActivity"]=null,console.error(`Param "externalSourceType" is required for activity "${this.activityType}"`);return}this.set$({activityCaption:`${e?.[0].toUpperCase()}${e?.slice(1)}`,activityIcon:e}),this.mountIframe()}}),this.sub("*currentActivityParams",e=>{this.isActivityActive&&(this.unmountIframe(),this.mountIframe())}),this.sub("*currentActivity",e=>{e!==this.activityType&&this.unmountIframe()}),this.subConfigValue("multiple",e=>{this.$.showSelectionStatus=e}),this.subConfigValue("localeName",e=>{this.setupL10n()}),this.subConfigValue("externalSourcesEmbedCss",e=>{this.applyEmbedCss(e)})}extractUrlFromSelectedFile(e){if(e.alternatives){const t=Ee(this.cfg.externalSourcesPreferredTypes);for(const r of t){const o=Rh(r);for(const[a,n]of Object.entries(e.alternatives))if(o.test(a))return n}}return e.url}handleToolbarStateChange(e){this.set$({toolbarVisible:e.isVisible})}async handleSelectedFilesChange(e){if(this.cfg.multiple!==e.isMultipleMode){console.error("Multiple mode mismatch");return}this.bindL10n("counterText",()=>this.l10n("selected-count",{count:e.selectedCount,total:e.total})),this.set$({doneBtnTextClass:e.isReady?"":"uc-hidden",isSelectionReady:e.isReady,isDoneBtnEnabled:e.isReady&&e.selectedFiles.length>0,showSelectionStatus:e.isMultipleMode&&e.total>0,couldSelectAll:e.selectedCount<e.total,couldDeselectAll:e.selectedCount===e.total,selectedList:e.selectedFiles})}handleIframeLoad(){this.applyEmbedCss(this.cfg.externalSourcesEmbedCss),this.applyTheme(),this.setupL10n()}applyTheme(){this._messageBridge?.send({type:"set-theme-definition",theme:Fh(this)})}applyEmbedCss(e){this._messageBridge?.send({type:"set-embed-css",css:e})}setupL10n(){this._messageBridge?.send({type:"set-locale-definition",localeDefinition:this.cfg.localeName})}remoteUrl(){const{pubkey:e,remoteTabSessionKey:t,socialBaseUrl:r,multiple:o}=this.cfg,{externalSourceType:a}=this.activityParams,n=Gh[a]??a,c={lang:this.l10n("social-source-lang")?.split("-")?.[0]||"en",public_key:e,images_only:"false",session_key:t,wait_for_theme:!0,multiple:o.toString(),origin:this.cfg.topLevelOrigin||Hh(),debug:this.cfg.debug},l=new URL(`/window4/${n}`,r);return l.search=jh(c),l.toString()}mountIframe(){let e=Po({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});e.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(e),e.contentWindow&&(this._messageBridge?.destroy(),this._messageBridge=new Bh(e.contentWindow),this._messageBridge.on("selected-files-change",this.handleSelectedFilesChange.bind(this)),this._messageBridge.on("toolbar-state-change",this.handleToolbarStateChange.bind(this)),this.resetSelectionStatus())}unmountIframe(){this._messageBridge?.destroy(),this._messageBridge=void 0,this.ref.iframeWrapper.innerHTML="",this.resetSelectionStatus()}resetSelectionStatus(){this.set$({selectedList:[],total:0,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1})}}An.template=`
  <uc-activity-header>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *historyBack"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <div class="uc-content">
    <div ref="iframeWrapper" class="uc-iframe-wrapper"></div>
    <div class="uc-toolbar" set="@hidden: !toolbarVisible">
      <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div set="@hidden: !showSelectionStatus" class="uc-selection-status-box">
        <span>{{counterText}}</span>
        <button type="button" set="onclick: onSelectAll; @hidden: !couldSelectAll" l10n="select-all"></button>
        <button type="button" set="onclick: onDeselectAll; @hidden: !couldDeselectAll" l10n="deselect-all"></button>
      </div>
      <button type="button" class="uc-done-btn uc-primary-btn" set="onclick: onDone; @disabled: !isDoneBtnEnabled;">
        <uc-spinner set="@hidden: isSelectionReady"></uc-spinner>
        <span l10n="done" set="@class: doneBtnTextClass"></span>
      </button>
    </div>
  </div>
`;class Wh extends K{requireCtxName=!0;_createValidationInput(){const e=document.createElement("input");return e.type="text",e.name=this.ctxName,e.required=this.cfg.multipleMin>0,e.tabIndex=-1,mi(e,{opacity:0,height:0,width:0}),e}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",e=>{{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",e.status==="uploading"||e.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(e.status==="failed"){const a=e.errors[0]?.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const t=e.group?e.group:null;if(t){this._validationInputElement.value=t.cdnUrl,this._validationInputElement.setCustomValidity("");return}const r=e.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&r.length===1){this._validationInputElement.value=r[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of r){const n=document.createElement("input");n.type="hidden",n.name=`${this.ctxName}[]`,n.value=a,o.appendChild(n)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class qh extends y{}class In extends B{init$={...this.init$,currentText:"",options:[],selectHtml:"",onSelect:e=>{e.preventDefault(),e.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find(t=>t.value==this.value)?.text||"",this.dispatchEvent(new Event("change"))}};initCallback(){super.initCallback(),this.sub("options",e=>{this.$.currentText=e?.[0]?.text||"";let t="";e?.forEach(r=>{t+=`<option value="${r.value}">${r.text}</option>`}),this.$.selectHtml=t})}}In.template=' <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select> ';class Xh extends B{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}static template=`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="uc-credits"
      >Powered by Uploadcare</a
    >
  `}class Tn extends vt{}Tn.template=' <div class="uc-spinner"></div> ';function Zh(i){let e=new Blob([i],{type:"image/svg+xml"});return URL.createObjectURL(e)}function Zi(i="hsl(209, 21%, 65%)",e=32,t=32){return Zh(`
  <svg width="${e}" height="${t}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${i}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function Sn(i,e=40){if(i.type==="image/svg+xml")return URL.createObjectURL(i);let t=document.createElement("canvas"),r=t.getContext("2d"),o=new Image,a=new Promise((n,s)=>{o.onload=()=>{let c=o.height/o.width;c>1?(t.width=e,t.height=e*c):(t.height=e,t.width=e/c),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,t.width,t.height),r.drawImage(o,0,0,t.width,t.height),t.toBlob(l=>{if(!l){s();return}let d=URL.createObjectURL(l);n(d)})},o.onerror=c=>{s(c)}});return o.src=URL.createObjectURL(i),a}const Yh=3e3;class Yi extends tn{_renderedGridOnce=!1;_thumbRect=null;_isIntersecting=!1;_firstViewMode=this.cfg.filesViewMode;constructor(){super(),this.init$={...this.init$,thumbUrl:"",badgeIcon:"",uid:""}}_calculateThumbSize(e=!1){e&&(this._thumbRect=this.getBoundingClientRect());let t=Math.max(parseInt(String(this?._thumbRect?.height||0)),parseInt(String(this?._thumbRect?.width||0)),this.cfg.thumbSize);return window.devicePixelRatio>1&&(t*=window.devicePixelRatio),Math.min(t,Yh)}_generateThumbnail=this._withEntry(async(e,t=!1)=>{const r=e.getValue("fileInfo"),o=e.getValue("isImage"),a=e.getValue("uuid"),n=e.getValue("thumbUrl");let s=this._calculateThumbSize(t);if(r&&o&&a){let l=await this.proxyUrl(pe(yt(this.cfg.cdnCname,a),Me(e.getValue("cdnUrlModifiers"),"stretch/off",`scale_crop/${s}x${s}/center`)));if(n===l)return;const{promise:d}=Rr(l);d.then(()=>{e.setValue("thumbUrl",l),n?.startsWith("blob:")&&URL.revokeObjectURL(n)}).catch(async()=>{if(!n?.startsWith("blob:"))try{const u=e.getValue("file");if(!u)return;const p=await Sn(u,s);e.setValue("thumbUrl",p)}catch{const p=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Zi(p))}});return}if(e.getValue("thumbUrl"))return;const c=e.getValue("file");if(c?.type.includes("image"))try{let l=await Sn(c,s);e.setValue("thumbUrl",l)}catch{let d=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Zi(d))}else{let l=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Zi(l))}});_debouncedGenerateThumb=ce(this._generateThumbnail.bind(this),100);_observerCallback(e){const[t]=e;this._isIntersecting=t.isIntersecting,t.isIntersecting&&(this._thumbRect=t.boundingClientRect,this._debouncedGenerateThumb(),this._observer?.disconnect()),t.intersectionRatio===0&&this._debouncedGenerateThumb.cancel()}_reset(){super._reset(),this._debouncedGenerateThumb.cancel()}_handleEntryId(e){this._reset();let t=this.uploadCollection?.read(e);this._entry=t,t&&(this._subEntry("fileInfo",r=>{r?.isImage&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",r=>{this.$.thumbUrl=r?`url(${r})`:""}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.defineAccessor("badgeIcon",e=>this.$.badgeIcon=e),this.defineAccessor("uid",e=>{this.set$({uid:e})}),this.sub("uid",e=>{this._handleEntryId(e)}),this.subConfigValue("filesViewMode",e=>{e==="grid"&&!this._renderedGridOnce&&(this._firstViewMode==="list"&&this._debouncedGenerateThumb(!0),this._renderedGridOnce=!0)}),this.setAttribute("role","img")}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:.1}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._entrySubs=new Set,this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}}Yi.template=`
  <div class="uc-thumb" set="style.backgroundImage: thumbUrl">
    <div class="uc-badge">
      <uc-icon set="@name: badgeIcon"></uc-icon>
    </div>
  </div>
`,Yi.bindAttributes({badgeIcon:null,uid:null});class Ki extends vr{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-regular"];constructor(){super(),this.init$={...this.init$,isHidden:!1}}initCallback(){super.initCallback(),this.defineAccessor("headless",e=>{this.set$({isHidden:M(e)})})}}Ki.template=`
  <uc-simple-btn set="@hidden: isHidden"></uc-simple-btn>

  <uc-modal id="start-from" strokes block-body-scrolling>
    <uc-start-from>
      <uc-drop-area with-icon clickable></uc-drop-area>
      <uc-source-list role="list" wrap></uc-source-list>
      <button type="button" l10n="start-from-cancel" class="uc-secondary-btn" set="onclick: *historyBack"></button>
      <uc-copyright></uc-copyright>
    </uc-start-from>
  </uc-modal>

  <uc-modal id="upload-list" strokes block-body-scrolling>
    <uc-upload-list></uc-upload-list>
  </uc-modal>

  <uc-modal id="camera" strokes block-body-scrolling>
    <uc-camera-source></uc-camera-source>
  </uc-modal>

  <uc-modal id="url" strokes block-body-scrolling>
    <uc-url-source></uc-url-source>
  </uc-modal>

  <uc-modal id="external" strokes block-body-scrolling>
    <uc-external-source></uc-external-source>
  </uc-modal>

  <uc-modal id="cloud-image-edit" strokes block-body-scrolling>
    <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>
  </uc-modal>
`,Ki.bindAttributes({headless:null});const Ji="active",zr="";class $n extends vr{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-minimal"];constructor(){super(),this.init$={...this.init$,singleUpload:!1,isHiddenStartFrom:!1,classUploadList:zr,classStartFrom:zr}}_handleModalOpen(e){e.id===y.activities.CLOUD_IMG_EDIT&&this.set$({classUploadList:Ji}),this.$["*currentActivity"]===y.activities.UPLOAD_LIST&&this.set$({classUploadList:Ji,isHiddenStartFrom:!0}),this.$["*uploadList"]?.length<=0&&this.set$({classStartFrom:Ji})}_handleModalClose(e){e.id===this.$["*currentActivity"]&&(this.$["*currentActivity"]=y.activities.UPLOAD_LIST,this.set$({isHiddenStartFrom:!1})),e.id===y.activities.CLOUD_IMG_EDIT&&(this.$["*currentActivity"]=y.activities.UPLOAD_LIST)}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t===y.activities.UPLOAD_LIST&&this.modalManager.closeAll(),t||(this.$["*currentActivity"]=e.initActivity||y.activities.START_FROM)}),this.sub("*uploadList",t=>{t?.length>0?(this.$["*currentActivity"]=y.activities.UPLOAD_LIST,this.set$({classStartFrom:zr})):(this.set$({classUploadList:zr,isHiddenStartFrom:!1}),this.$["*currentActivity"]=e.initActivity||y.activities.START_FROM)}),this.subConfigValue("confirmUpload",t=>{t!==!1&&(this.cfg.confirmUpload=!1)}),this.subConfigValue("filesViewMode",t=>{this.setAttribute("mode",t),this.subConfigValue("multiple",r=>{t==="grid"?(r?this.style.removeProperty("--uc-grid-col"):this.style.setProperty("--uc-grid-col","1"),this.$.singleUpload=!r):(this.style.removeProperty("--uc-grid-col"),this.$.singleUpload=!1)})}),this.handleModalOpen=this._handleModalOpen.bind(this),this.handleModalClose=this._handleModalClose.bind(this),this.modalManager.subscribe(Y.OPEN,this.handleModalOpen),this.modalManager.subscribe(Y.CLOSE,this.handleModalClose)}destroyCallback(){super.destroyCallback(),this.modalManager.unsubscribe(Y.OPEN,this.handleModalOpen),this.modalManager.unsubscribe(Y.CLOSE,this.handleModalClose)}}$n.template=`
  <uc-start-from set="@hidden: isHiddenStartFrom; @class:classStartFrom">
    <uc-drop-area set="@single:singleUpload;" initflow clickable tabindex="0" l10n="choose-file"></uc-drop-area>
    <uc-copyright></uc-copyright>
  </uc-start-from>
  <uc-upload-list set="@class:classUploadList" ref="uBlock"></uc-upload-list>

  <uc-modal id="start-from" strokes block-body-scrolling>
    <uc-start-from>
      <uc-drop-area with-icon clickable></uc-drop-area>
      <uc-source-list role="list" wrap></uc-source-list>
      <button type="button" l10n="start-from-cancel" class="uc-secondary-btn" set="onclick: *historyBack"></button>
    </uc-start-from>
  </uc-modal>

  <uc-modal id="camera" strokes block-body-scrolling>
    <uc-camera-source></uc-camera-source>
  </uc-modal>

  <uc-modal id="url" strokes block-body-scrolling>
    <uc-url-source></uc-url-source>
  </uc-modal>

  <uc-modal id="external" strokes block-body-scrolling>
    <uc-external-source></uc-external-source>
  </uc-modal>

  <uc-modal id="cloud-image-edit" strokes block-body-scrolling>
    <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>
  </uc-modal>
`;class On extends vr{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-inline"];constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=y.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==y.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t||(this.$["*currentActivity"]=e.initActivity||y.activities.START_FROM)}),this.sub("*uploadList",t=>{t?.length>0&&this.$["*currentActivity"]===(e.initActivity||y.activities.START_FROM)&&(this.$["*currentActivity"]=y.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}On.template=`
  <uc-start-from>
    <uc-drop-area with-icon clickable></uc-drop-area>
    <uc-source-list role="list" wrap></uc-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="uc-cancel-btn uc-secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <uc-copyright></uc-copyright>
  </uc-start-from>
  <uc-upload-list ref="uBlock"></uc-upload-list>
  <uc-camera-source></uc-camera-source>
  <uc-url-source></uc-url-source>
  <uc-external-source></uc-external-source>
  <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>
`;class Kh extends St{static styleAttrs=[...super.styleAttrs,"uc-wgt-common"];initCallback(){super.initCallback(),this.a11y?.registerBlock(this)}}function Ln(i){for(let e in i){let t=[...e].reduce((r,o)=>(o.toUpperCase()===o&&(o="-"+o.toLowerCase()),r+=o),"");t.startsWith("-")&&(t=t.replace("-","")),t.startsWith("uc-")||(t="uc-"+t),i[e].reg&&i[e].reg(t)}}const Qi="UC";async function Jh(i,e=!1){return new Promise((t,r)=>{if(typeof document!="object"){t(null);return}if(typeof window=="object"&&window[Qi]){t(window[Qi]);return}let o=document.createElement("script");o.async=!0,o.src=i,o.onerror=()=>{r()},o.onload=()=>{let a=window[Qi];e&&Ln(a),t(a)},document.head.appendChild(o)})}var eo=Object.freeze({__proto__:null,ActivityBlock:y,ActivityHeader:qh,BaseComponent:vt,Block:B,BtnUi:Xi,CameraSource:ln,CloudImageEditor:Kh,CloudImageEditorActivity:Mh,CloudImageEditorBlock:St,Config:Id,Copyright:Xh,CropFrame:fn,Data:L,DropArea:Vi,EditorCropButtonControl:gn,EditorFilterControl:Wi,EditorImageCropper:bn,EditorImageFader:$h,EditorOperationControl:xn,EditorScroller:_n,EditorSlider:mn,EditorToolbar:wn,ExternalSource:An,ExternalUploadSource:lt,FileItem:Je,FileUploaderInline:On,FileUploaderMinimal:$n,FileUploaderRegular:Ki,FormInput:Wh,Icon:Di,Img:Ud,LineLoaderUi:kn,Modal:rn,ModalEvents:Y,PACKAGE_NAME:kr,PACKAGE_VERSION:Cr,PresenceToggle:Cn,ProgressBar:hn,ProgressBarCommon:dn,Select:In,SimpleBtn:zi,SliderUi:En,SolutionBlock:vr,SourceBtn:Ni,SourceList:Vd,Spinner:Tn,StartFrom:Na,Thumb:Yi,UID:sr,UploadCtxProvider:xh,UploadList:on,UploadSource:J,UploaderBlock:K,UrlSource:an,defineComponents:Ln,defineLocale:xa,loadFileUploaderFrom:Jh,toKebabCase:Tr});const Ne=Vr;(function(i,e){const t=Vr,r=i();for(;;)try{if(parseInt(t(223))/1+-parseInt(t(229))/2+parseInt(t(239))/3*(-parseInt(t(226))/4)+-parseInt(t(235))/5*(-parseInt(t(228))/6)+-parseInt(t(240))/7+-parseInt(t(221))/8+parseInt(t(227))/9===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Fr,771147);function Fr(){const i=["config","3823080njKUqo","Local","380960PXKXZc","pluginName","locale","932GrgvHb","10025865kugSRq","114yhzayI","235042nWIdcz","defineComponents","uploadcare.locale","define","Uploadcare","defineLocale","110975XYtIMT","_defineLocale","isPremiumPlugin","URL","906XtXPKw","3358117ovEQKf","get","requires","editor","isOfficialPlugin","contentLanguage","uploadcare.uploader.sourceList"];return Fr=function(){return i},Fr()}function Vr(i,e){const t=Fr();return Vr=function(r,o){return r=r-215,t[r]},Vr(i,e)}class Qh extends He{static get[Ne(215)](){return[rt,lo]}static get[Ne(224)](){return Ne(233)}static get[Ne(217)](){return!0}static get[Ne(237)](){return!0}constructor(e){const t=Ne;super(e),e[t(220)][t(232)](t(219),[O[t(222)],O[t(238)]]),eo[t(230)](eo),this[t(236)]()}[Ne(236)](){const e=Ne,t=this[e(216)][e(220)][e(241)](e(231)),r=this[e(216)][e(225)][e(218)];t&&eo[e(234)](r,t)}}class e0 extends pt{constructor(e){super(e);const t=e.t,r=this.bindTemplate,o=new Xn;o.isVisible=!0,this.setTemplate({tag:"div",attributes:{class:["ck-uploadcare-form__loading"],tabindex:"-1"},children:[{tag:"div",attributes:{class:["ck-uploadcare-form__loading-spinner"]},children:[o,{text:r.to("imageUploadProgress",a=>t("Loading image...")+" ("+(a||0)+"%)")}]},{tag:"div",attributes:{class:["ck-uploadcare-form__skeleton"]},children:[{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"}]},{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"}]}]}]})}}class t0 extends pt{constructor(e){super(e);const t=e.t;this.set("errorType",null);const r=new Mt(e);r.label=t({id:"Try again (Uploadcare)",string:"Try again"}),r.withText=!0,r.class="ck-button-action",r.on("execute",()=>{this.fire("retry")}),r.bind("isVisible").to(this,"errorType",n=>n!=="NotFound");const o=new Zn;o.content=Gn,o.extendTemplate({attributes:{style:{width:"50px",height:"50px"}}});const a=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck-uploadcare-form__error"],tabindex:"-1"},children:[{tag:"div",attributes:{class:["ck-uploadcare-form__error-contents"]},children:[o,{tag:"h3",attributes:{style:{fontWeight:"bold"}},children:[{text:t("Unable to load")}]},{text:a.to("errorType",n=>t(n!=="NotFound"?"We were unable to load the image due to network connection issues.":"The image was not found. Its source may have been removed."))},r]},{tag:"div",attributes:{class:["ck-uploadcare-form__skeleton"]},children:[{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"}]},{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"}]}]}]})}}function Nr(i,e){const t=Br();return Nr=function(r,o){return r=r-445,t[r]},Nr(i,e)}(function(i,e){const t=Nr,r=i();for(;;)try{if(parseInt(t(451))/1+-parseInt(t(449))/2+parseInt(t(446))/3+parseInt(t(454))/4*(-parseInt(t(459))/5)+parseInt(t(445))/6+parseInt(t(447))/7+-parseInt(t(457))/8===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Br,365856);class r0 extends pt{constructor(e,t){const r=Nr;super(e);const o=this[r(452)];this[r(453)](r(460),""),this[r(458)]({tag:r(455),attributes:{...t,class:[r(450),r(448)],"ctx-name":r(456),"cdn-url":o.to(r(460))}})}}function Br(){const i=["285615upUBkt","imageSrc","908178InkceQ","1057614AQSpuD","4904942jRSiVA","ck-uploadcare-theme","724724RxCdbk","uc-light","573895ollqwz","bindTemplate","set","36NeFmpP","uc-cloud-image-editor","image-edit","4289416ubjdVL","setTemplate"];return Br=function(){return i},Br()}const Q=jr;(function(i,e){const t=jr,r=i();for(;;)try{if(-parseInt(t(524))/1*(-parseInt(t(515))/2)+parseInt(t(499))/3*(-parseInt(t(513))/4)+-parseInt(t(521))/5*(-parseInt(t(485))/6)+-parseInt(t(500))/7*(parseInt(t(491))/8)+-parseInt(t(495))/9*(-parseInt(t(531))/10)+-parseInt(t(494))/11+parseInt(t(536))/12*(-parseInt(t(502))/13)===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Hr,303520);function jr(i,e){const t=Hr();return jr=function(r,o){return r=r-479,t[r]},jr(i,e)}function Hr(){const i=["5280099DDsOZi","3942tlcwZH","uc-cloud-image-editor","ck-uploadcare-form","clear","122007ZyDMMP","1351YyAqPe","addEventListener","13zWyklG","_focusableView","filter","uploading","getFocusableElement","once","focus","error","apply","retry","element","4RsGSOU","target","422WrwVfO","set","div","_errorView","render","_addUploadcareImageEditorListeners","2425ZZubSU","length","nodeName","2432DubbQx","_setView","_addErrorViewListeners","addMany","ck-reset_all-excluded","ready","observe","11120SADzhW","cancel","_waitForImageEditorComponent","_loadingView","status","4122852TJlikT","setTemplate","toLowerCase","disconnect","cdnUrl","change:status","_items","4026SdeqJZ","add","createCollection","_editingView","detail","querySelector","6544keavHh","addedNodes","fire"];return Hr=function(){return i},Hr()}class i0 extends uo{[Q(484)];[Q(534)];[Q(518)];[Q(488)];[Q(503)];constructor(e,t,r){const o=Q;super(e),this[o(484)]=this[o(487)](),this[o(534)]=new e0(e),this[o(518)]=new t0(e),this[o(488)]=new r0(e,r),this[o(503)]=new pt(e),this[o(503)][o(479)](this[o(506)]()),this[o(516)](o(535),t),this[o(479)]({tag:o(517),attributes:{class:["ck",o(528),o(497)],tabindex:"-1"},children:this[o(484)]}),this[o(525)](),this[o(507)](o(519),()=>{const a=o;this[a(533)](this[a(512)],n=>{this[a(520)](n)})}),this.on(o(483),()=>{this[o(525)]()}),this[o(526)]()}[Q(508)](){const e=Q;this[e(512)][e(508)]()}[Q(525)](){const e=Q;switch(this[e(484)][e(498)](),this[e(535)]){case e(505):this[e(484)][e(486)](this[e(534)]);break;case e(509):this[e(484)][e(486)](this[e(518)]);break;case e(529):this[e(484)][e(527)]([this[e(488)],this[e(503)]])}}[Q(533)](e,t){const r=Q,o=r(496),a=e[r(490)](o);if(a)return t(a);const n=new MutationObserver(s=>{const c=r,l=s[c(504)](d=>d[c(514)]===e&&d[c(492)][c(522)]>0&&d[c(492)][0][c(523)][c(480)]()===o);l[c(522)]&&(n[c(481)](),t(l[0][c(492)][0]))});n[r(530)](e,{childList:!0,subtree:!0})}[Q(520)](e){const t=Q;e[t(501)](t(510),r=>{const o=t;this[o(493)](o(510),{imageSrc:r[o(489)][o(482)]})}),e[t(501)](t(532),()=>{const r=t;this[r(493)](r(532))})}[Q(526)](){const e=Q;this[e(518)].on(e(511),()=>{const t=e;this[t(493)](t(511))})}}class o0 extends no(){_editor;_dialog;_imageElement;_imageCache;_controller;_attributes;constructor(e,t,r){super(),this._editor=e,this._dialog=t,this._imageElement=r,this._imageCache=this._editor.plugins.get("UploadcareImageEditUI").imageCache,this._attributes=this._editor.config.get("uploadcare.editor")||{},this.set({isActive:!0,imageStatus:"ready",imageErrorType:null,imageId:null,imageSrc:null,imageDimension:null,imageUploadProgress:null}),this._prepareImage(),this._showDialog()}destroy(){this.isActive=!1,this.stopListening(),this.stopDelegating(),this.imageStatus==="uploading"&&this._controller&&this._controller.abort()}async _prepareImage(){const e=this._imageElement,t=e.getAttribute("uploadcareImageId"),r=e.getAttribute("src");if(t)await this._loadImageInfo(t,r);else if(this._imageCache.has(r)){const o=this._imageCache.get(r);this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=o.url,this.imageDimension=o.dimension,this.imageId=o.id}else this.imageStatus="uploading",this.imageUploadProgress=0,this._controller=new AbortController,await this._uploadImage(this._imageElement,this._controller)}_showDialog(){const{locale:e}=this._editor,t=e.t,r=new i0(e,this.imageStatus,this._attributes);r.bind("status").to(this,"imageStatus"),r._loadingView.bind("imageUploadProgress").to(this,"imageUploadProgress"),r._editingView.bind("imageSrc").to(this,"imageSrc"),r._errorView.bind("errorType").to(this,"imageErrorType"),this._addEditViewListeners(r,this._imageElement),this._dialog.show({id:"uploadcareImageEdit",icon:oo,title:t({id:"Edit Image (Uploadcare)",string:"Edit image"}),content:r,position:ao.EDITOR_TOP_CENTER,isModal:!0,onShow:()=>{r.focus()},onHide:()=>{r.destroy(),this.destroy()},keystrokeHandlerOptions:{filter:o=>!mo(o,r.element)}})}_loadImageInfo(e,t){return fi.getInfo(e,{publicKey:this._editor.config.get("uploadcare.pubkey"),baseURL:this._editor.config.get("uploadcare.uploader.baseUrl")}).then(r=>{const{width:o,height:a}=r.imageInfo;this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=t,this.imageDimension={width:o,height:a},this.imageId=e}).catch(r=>{this.imageStatus="error",this.imageErrorType=r.code==="FileNotFoundError"?"NotFound":"Network",this.imageSrc=null,this.imageDimension=null,this.imageId=null,this.imageUploadProgress=null})}_uploadImage(e,t){return this._getImageAsFile(e).then(r=>fi.upload({publicKey:this._editor.config.get("uploadcare.pubkey"),baseURL:this._editor.config.get("uploadcare.uploader.baseUrl"),baseCDN:this._editor.config.get("uploadcare.uploader.cdnCname"),signal:t.signal,file:r,onProgress:o=>{o&&o.isComputable&&(this.imageUploadProgress=Math.ceil(100*o.value))}})).then(r=>{const{width:o,height:a}=r.imageInfo;this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=r.cdnUrl,this.imageDimension={width:o,height:a},this.imageId=r.uuid,this.imageUploadProgress=null;const n=e.getAttribute("src");this._imageCache.set(n,{id:r.uuid,url:r.cdnUrl,dimension:this.imageDimension})}).catch(r=>{this.imageStatus="error",this.imageErrorType=r.code==="FileNotFoundError"?"NotFound":"Network",this.imageSrc=null,this.imageDimension=null,this.imageId=null,this.imageUploadProgress=null})}_addEditViewListeners(e,t){e.on("apply",(r,o)=>{this._replaceImage(t,o.imageSrc,this.imageId),this._dialog.hide()}),e.on("retry",()=>{this.imageStatus="uploading",this.imageUploadProgress=0,this._controller=new AbortController,this._uploadImage(this._imageElement,this._controller)}),e.on("cancel",()=>{this._dialog.hide()})}_replaceImage(e,t,r){const o=this._editor,{width:a,height:n}=po(t,this.imageDimension.width,this.imageDimension.height),{imageFallbackUrl:s,imageSources:c}=oi(t,a);o.model.change(l=>{if(e.root.rootName==="$graveyard"){o.execute("insertImage",{imageType:e.is("element","imageInline")?"imageInline":null,source:{...Object.fromEntries(e.getAttributes()),uploadcareImageId:r,src:s,sources:c,width:a,height:n}});const d=e.getChildren();e=o.model.document.selection.getSelectedElement();for(const u of d)l.append(l.cloneElement(u),e)}else l.setSelection(e,"on"),o.execute("uploadcareImageReplace",{...Object.fromEntries(e.getAttributes()),uploadcareImageId:r,src:s,sources:c,width:a,height:n},e);l.setSelection(e,"on")})}async _getImageAsFile(e){const t=ke.window,r=ke.document.location.href,o=new t.URL(e.getAttribute("src"),r);if(o.protocol==="data:"){const c=o.href.split(","),l=c[0].match(/:(.*?);/)[1],d=l.split("/")[1],u=t.atob(c[c.length-1]);let p=u.length;const f=new t.Uint8Array(p);for(;p--;)f[p]=u.charCodeAt(p);return new t.File([f],"image."+d,{type:l})}const a=o.href.split("/"),n=a[a.length-1],s=n.split(".")[1];return t.fetch(o.href).then(c=>c.clone().blob()).then(c=>new t.File([c],n,{type:"image/"+s}))}}const Be=Gr;(function(i,e){const t=Gr,r=i();for(;;)try{if(parseInt(t(417))/1+-parseInt(t(407))/2*(parseInt(t(414))/3)+parseInt(t(425))/4+-parseInt(t(409))/5*(parseInt(t(403))/6)+parseInt(t(412))/7+parseInt(t(418))/8+-parseInt(t(426))/9===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Wr,231586);function Gr(i,e){const t=Wr();return Gr=function(r,o){return r=r-401,t[r]},Gr(i,e)}function Wr(){const i=["uploadcare.allowExternalImagesEditing","imageInline","plugins","requires","unbind","1539612qNYhMZ","2878074IsQgjE","bind","refresh","get","execute","element","model","_isEditable","6LMchVT","config","isActive","imageEditController","3970SRPPrK","selection","2057630qLLlzY","getSelectedElement","set","2903229XMxbBz","document","543gztDqO","editor","imageBlock","273001UkhbIb","1996256nwnIyB","isEnabled"];return Wr=function(){return i},Wr()}class Un extends ri{[Be(406)];static get[Be(423)](){return[ft]}[Be(402)];constructor(e){const t=Be;super(e),this[t(406)]=void 0,this[t(402)]=ts(e[t(404)][t(429)](t(420))||[]),this[t(411)]({isActive:!1})}[Be(428)](){const e=Be,t=this[e(415)][e(401)][e(413)][e(408)][e(410)]();this[e(419)]=this[e(402)](t)}[Be(430)](){const e=Be;this[e(406)]&&(this[e(424)](e(405)),this[e(406)]=void 0);const t=this[e(415)][e(401)][e(413)][e(408)][e(410)]();t&&(t.is(e(431),e(416))||t.is(e(431),e(421)))&&(this[e(406)]=new o0(this[e(415)],this[e(415)][e(422)][e(429)](ft),t),this[e(427)](e(405)).to(this[e(406)],e(405)))}}function qr(i,e){const t=Zr();return qr=function(r,o){return r=r-372,t[r]},qr(i,e)}const Xr=qr;(function(i,e){const t=qr,r=i();for(;;)try{if(-parseInt(t(383))/1+parseInt(t(377))/2+-parseInt(t(388))/3+parseInt(t(391))/4+parseInt(t(379))/5*(-parseInt(t(378))/6)+parseInt(t(380))/7+-parseInt(t(373))/8*(parseInt(t(384))/9)===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Zr,209583);class a0 extends ri{[Xr(375)](){const e=Xr,t=this[e(396)][e(376)][e(381)][e(390)][e(372)]();this[e(395)]=!!(t&&(t.is(e(389),e(374))||t.is(e(389),e(382))))}[Xr(393)](e){const t=Xr,r=this[t(396)][t(376)][t(381)][t(390)][t(372)]();this[t(396)][t(376)][t(392)](o=>{const a=t;o[a(386)](e,r),o[a(387)](a(385),r),o[a(387)](a(394),r)})}}function Zr(){const i=["model","798004VJndPG","3252szxlwf","10RteZyX","1257410RsMqpW","document","imageInline","131489GLWWPo","37917ghOsLf","srcset","setAttributes","removeAttribute","596646Cmlsgw","element","selection","1315748CWfCkF","change","execute","sizes","isEnabled","editor","getSelectedElement","696hdlYOt","imageBlock","refresh"];return Zr=function(){return i},Zr()}function Yr(i,e){const t=Kr();return Yr=function(r,o){return r=r-445,t[r]},Yr(i,e)}function Kr(){const i=["768464TyaZvw","isPremiumPlugin","ImageUtils","8ljjEPO","uploadcareImageReplace","15kdQPfs","requires","init","uploadcareImageEdit","3SOZCfd","167917CzqIbx","16301170lSugpg","ImageEditing","UploadcareImageEditEditing","7857036ENaXil","2744542jrjxTa","isOfficialPlugin","add","pluginName","commands","12968820sJRHtU","9595852LeJakE"];return Kr=function(){return i},Kr()}const je=Yr;(function(i,e){const t=Yr,r=i();for(;;)try{if(parseInt(t(463))/1+parseInt(t(446))/2*(parseInt(t(462))/3)+-parseInt(t(453))/4*(parseInt(t(458))/5)+-parseInt(t(445))/6+-parseInt(t(452))/7*(-parseInt(t(456))/8)+parseInt(t(451))/9+-parseInt(t(464))/10===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Kr,836033);class Mn extends He{static get[je(449)](){return je(466)}static get[je(459)](){const e=je;return[rt,Yn,e(455),e(465)]}static get[je(447)](){return!0}static get[je(454)](){return!0}[je(460)](){const e=je,{editor:t}=this;t[e(450)][e(448)](e(461),new Un(t)),t[e(450)][e(448)](e(457),new a0(t))}}gt(':where([uc-wgt-common]){--uc-font-family:system-ui;--uc-font-size:14px;--uc-line-height:normal;--uc-simple-btn-font-family:system-ui;--uc-simple-btn-font-size:14px;--uc-button-size:32px;--uc-preview-size:32px;--uc-padding:10px;--uc-radius:8px;--uc-transition:.2s ease;--uc-dialog-width:430px;--uc-dialog-max-width:920px;--uc-dialog-max-height:675px;--uc-simple-btn-padding:7px 14px;--uc-grid-col:3;--uc-grid-preview-image-height:auto;--uc-grid-gap:calc(var(--uc-padding)/2);--uc-grid-aspect-ratio:1/1;--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}@supports not (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-rgb-light:23 75 215;--uc-primary-light:rgb(var(--uc-primary-rgb-light));--uc-primary-hover-light:rgb(var(--uc-primary-rgb-light)/90%);--uc-primary-transparent-light:rgb(var(--uc-primary-rgb-light)/10%);--uc-background-light:#fff;--uc-foreground-light:#181818;--uc-primary-foreground-light:#fff;--uc-secondary-light:hsla(0,0%,9%,.05);--uc-secondary-hover-light:hsla(0,0%,9%,.08);--uc-secondary-foreground-light:#181818;--uc-muted-light:#f5f5f5;--uc-muted-foreground-light:#717171;--uc-destructive-light:rgb(232 19 20/5%);--uc-destructive-foreground-light:#e81314;--uc-border-light:#e4e4e8;--uc-dialog-shadow-light:0px 6px 20px rgba(0,0,0,.1);--uc-simple-btn-light:#ebebeb;--uc-simple-btn-hover-light:#e4e4e4;--uc-simple-btn-foreground-light:#181818;--uc-primary-rgb-dark:87 154 255;--uc-primary-dark:rgb(var(--uc-primary-rgb-dark));--uc-primary-hover-dark:rgb(var(--uc-primary-rgb-dark)/90%);--uc-primary-transparent-dark:rgb(var(--uc-primary-rgb-dark)/7%);--uc-background-dark:#1b1b1b;--uc-foreground-dark:#e1e1e1;--uc-primary-foreground-dark:#000;--uc-secondary-dark:hsla(0,0%,88%,.07);--uc-secondary-hover-dark:hsla(0,0%,88%,.1);--uc-secondary-foreground-dark:#e1e1e1;--uc-muted-dark:#242424;--uc-muted-foreground-dark:#989898;--uc-destructive-dark:rgba(244,90,79,.1);--uc-destructive-foreground-dark:#f45a4f;--uc-border-dark:#3d3d3d;--uc-dialog-shadow-dark:0px 6px 20px rgba(0,0,0,.25);--uc-simple-btn-dark:#242424;--uc-simple-btn-hover-dark:#2b2b2b;--uc-simple-btn-foreground-dark:#fff}}@supports (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-oklch-light:47% .22 264;--uc-primary-light:oklch(var(--uc-primary-oklch-light));--uc-primary-hover-light:oklch(var(--uc-primary-oklch-light)/90%);--uc-primary-transparent-light:oklch(var(--uc-primary-oklch-light)/7%);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(21% 0 0);--uc-primary-foreground-light:oklch(100% 0 0);--uc-secondary-light:oklch(21% 0 0/.05);--uc-secondary-hover-light:oklch(21% 0 0/.08);--uc-secondary-foreground-light:oklch(21% 0 0);--uc-muted-light:oklch(97% 0 0);--uc-muted-foreground-light:oklch(40% 0 0);--uc-destructive-light:oklch(59% .235 28.5/.05);--uc-destructive-foreground-light:oklch(59% .235 28.5);--uc-border-light:oklch(92% 0 0);--uc-dialog-shadow-light:0px 6px 20px oklch(0% 0 0/.1);--uc-simple-btn-light:oklch(94% 0 0);--uc-simple-btn-hover-light:oklch(92% 0 0);--uc-simple-btn-foreground-light:oklch(20% 0 0);--uc-primary-oklch-dark:69% .1768 258.4;--uc-primary-dark:oklch(var(--uc-primary-oklch-dark));--uc-primary-hover-dark:oklch(var(--uc-primary-oklch-dark)/90%);--uc-primary-transparent-dark:oklch(var(--uc-primary-oklch-dark)/7%);--uc-background-dark:oklch(22% 0 0);--uc-foreground-dark:oklch(91% 0 0);--uc-primary-foreground-dark:oklch(0% 0 0);--uc-secondary-dark:oklch(91% 0 0/.07);--uc-secondary-hover-dark:oklch(91% 0 0/.1);--uc-secondary-foreground-dark:oklch(91% 0 0);--uc-muted-dark:oklch(26% 0 0);--uc-muted-foreground-dark:oklch(68% 0 0);--uc-destructive-dark:oklch(67% .191 27.5/.1);--uc-destructive-foreground-dark:oklch(67% .191 27.5);--uc-border-dark:oklch(36% 0 0);--uc-dialog-shadow-dark:0px 6px 20px oklch(0% 0 0/.25);--uc-simple-btn-dark:oklch(26% 0 0);--uc-simple-btn-hover-dark:oklch(29% 0 0);--uc-simple-btn-foreground-dark:oklch(100% 0 0)}}@media only screen and (max-height:600px){:where([uc-wgt-common]){--uc-dialog-max-height:100%}}@media only screen and (max-width:680px){:where([uc-wgt-common]){--uc-grid-col:2}}@media only screen and (max-width:430px){:where([uc-wgt-common]){--uc-dialog-max-width:100vw;--uc-dialog-max-height:var(--uploadcare-blocks-window-height);--uc-grid-col:1}}@media (prefers-color-scheme:light){:where([uc-wgt-common]){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}}@media (prefers-color-scheme:dark){:where([uc-wgt-common]){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}}:where(.uc-light){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}:where(.uc-dark){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}:where(.uc-purple){--uc-primary-oklch-light:47% .22 300;--uc-primary-oklch-dark:69% .1768 300}:where(.uc-red){--uc-primary-oklch-light:47% .21 21;--uc-primary-oklch-dark:71% .1768 21}:where(.uc-orange){--uc-primary-oklch-light:47% .1376 51.88;--uc-primary-oklch-dark:69% .1768 51.88}:where(.uc-green){--uc-primary-oklch-light:45% .14 130;--uc-primary-oklch-dark:69% .1768 130}:where(.uc-turquoise){--uc-primary-oklch-light:45% .0854 174;--uc-primary-oklch-dark:69% .1768 174}:where(.uc-gray){--uc-primary-oklch-light:10% 0 0;--uc-primary-oklch-dark:97% 0 0}:where(.uc-contrast){--uc-border-light:oklch(50% 0 0);--uc-border-dark:oklch(50% 0 0);--uc-muted-light:oklch(98% 0 0);--uc-muted-dark:oklch(16% 0 0);--uc-muted-foreground-light:oklch(20% 0 0);--uc-muted-foreground-dark:oklch(80% 0 0);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(0% 0 0);--uc-background-dark:oklch(10% 0 0);--uc-foreground-dark:oklch(100% 0 0)}[uc-cloud-image-editor]{--color-primary-accent:var(--uc-primary);--color-text-base:var(--uc-foreground);--color-text-accent-contrast:var(--uc-background);--color-fill-contrast:var(--uc-background);--color-modal-backdrop:oklch(0 0 0/.1);--color-image-background:var(--uc-muted);--color-focus-ring:var(--color-primary-accent);--color-crop-guides:var(--uc-foreground);--font-size-ui:var(--uc-font-size);--size-touch-area:var(--uc-button-size);--size-panel-heading:calc(var(--uc-button-size) + var(--uc-padding)*2);--size-ui-min-width:130px;--size-line-width:1px;--size-modal-width:650px;--size-icon:calc(var(--uc-button-size)/2);--border-radius-editor:var(--uc-radius);--border-radius-thumb:var(--uc-radius);--border-radius-ui:var(--uc-radius);--border-radius-base:var(--uc-radius);--cldtr-gap-min:5px;--cldtr-gap-mid-1:10px;--cldtr-gap-mid-2:15px;--cldtr-gap-max:20px;--transition-duration-2:var(--transition-duration-all,.2s);--transition-duration-3:var(--transition-duration-all,.3s);--transition-duration-4:var(--transition-duration-all,.4s);--transition-duration-5:var(--transition-duration-all,.5s);--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading);--transparent-pixel:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=);display:block;height:100%;max-height:100%;width:100%}[uc-cloud-image-editor] :is([can-handle-paste]:hover,[can-handle-paste]:focus){--can-handle-paste:"true"}[uc-cloud-image-editor] :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover){--filter-effect:var(--hover-filter)!important;--opacity-effect:var(--hover-opacity)!important;--color-effect:var(--hover-color-rgb)!important;--background-effect:var(--hover-background)!important}[uc-cloud-image-editor] :is([tabindex]:active,[with-effects]:active){--filter-effect:var(--down-filter)!important;--opacity-effect:var(--down-opacity)!important;--color-effect:var(--down-color-rgb)!important;--background-effect:var(--down-background)!important}[uc-cloud-image-editor] :is([tabindex][active],[with-effects][active]){--filter-effect:var(--active-filter)!important;--opacity-effect:var(--active-opacity)!important;--color-effect:var(--active-color-rgb)!important;--background-effect:var(--active-background)!important}[uc-cloud-image-editor] [hidden-scrollbar]::-webkit-scrollbar{display:none}[uc-cloud-image-editor] [hidden-scrollbar]{-ms-overflow-style:none;scrollbar-width:none}[uc-cloud-image-editor].uc-editor_ON{--modal-header-opacity:0;--modal-header-height:0px;--modal-toolbar-height:calc(var(--size-panel-heading)*2)}[uc-cloud-image-editor].uc-editor_OFF{--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading)}[uc-cloud-image-editor]>.uc-wrapper{--l-min-img-height:var(--modal-toolbar-height);--l-max-img-height:100%;--l-edit-button-width:120px;--l-toolbar-horizontal-padding:var(--cldtr-gap-mid-1);display:grid;grid-template-rows:minmax(var(--l-min-img-height),var(--l-max-img-height)) minmax(var(--modal-toolbar-height),auto);height:100%;overflow:hidden;overflow-y:auto;position:relative}@media only screen and (max-width:800px){[uc-cloud-image-editor]>.uc-wrapper{--l-edit-button-width:70px;--l-toolbar-horizontal-padding:var(--cldtr-gap-min)}}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport{align-items:center;display:flex;justify-content:center;overflow:hidden}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image{--viewer-image-opacity:1;background-color:var(--color-image-background);box-sizing:border-box;display:block;height:100%;left:0;object-fit:scale-down;opacity:var(--viewer-image-opacity);pointer-events:auto;position:absolute;top:0;transform:scale(1);user-select:none;width:100%;z-index:10}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_visible_viewer{transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_to_cropper{--viewer-image-opacity:0;background-image:var(--transparent-pixel);pointer-events:none;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_effects{--viewer-image-opacity:0;pointer-events:none;transform:scale(1);transition:opacity var(--transition-duration-3) cubic-bezier(.5,0,1,1),transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container{background-color:var(--color-image-background);display:block;height:100%;position:relative;transition:var(--transition-duration-3);width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar{position:relative;transition:.3s}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content{background-color:var(--color-fill-contrast);bottom:0;box-sizing:border-box;height:var(--modal-toolbar-height);left:0;min-height:var(--size-panel-heading);position:absolute;width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__viewer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:space-between;padding-left:var(--l-toolbar-horizontal-padding);padding-right:var(--l-toolbar-horizontal-padding)}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__editor{display:flex}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-info_pan{position:absolute;user-select:none}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer{display:flex;max-width:120px;position:absolute;transform:translate(-40px);user-select:none;z-index:2}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer>.uc-file_type{padding:4px .8em}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash{background-color:var(--color-fill-contrast);display:flex;flex-direction:column;height:100%;position:absolute;width:100%;z-index:4}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content{align-items:center;display:flex;flex:1;flex-direction:column;justify-content:center}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_icon{align-items:center;background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);display:flex;height:40px;justify-content:center;width:40px}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_text{color:var(--uc-foreground);font-size:var(--font-size-ui);margin-top:var(--cldtr-gap-max)}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_footer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:center}uc-crop-frame>.uc-svg{border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);height:100%;left:0;opacity:inherit;position:absolute;top:0;transition:var(--transition-duration-3);width:100%;z-index:2}uc-crop-frame>.uc-thumb{--idle-color-rgb:var(--color-text-base);--hover-color-rgb:var(--color-primary-accent);--focus-color-rgb:var(--color-primary-accent);--down-color-rgb:var(--color-primary-accent);--color-effect:var(--idle-color-rgb);color:var(--color-effect);transition:color var(--transition-duration-3),opacity var(--transition-duration-3)}uc-crop-frame>.uc-thumb--visible{opacity:1;pointer-events:auto}uc-crop-frame>.uc-thumb--hidden{opacity:0;pointer-events:none}uc-crop-frame>.uc-guides{transition:var(--transition-duration-3)}uc-crop-frame>.uc-guides--hidden{opacity:0}uc-crop-frame>.uc-guides--semi-hidden{opacity:.2}uc-crop-frame>.uc-guides--visible{opacity:1}uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control{--l-base-min-width:var(--uc-button-size);--l-base-height:var(--uc-button-size);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--filter-effect:var(--idle-filter);--idle-color-rgb:var(--uc-secondary-foreground);--idle-opacity:1;--idle-filter:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-opacity:1;--hover-filter:.8;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--hover-color-rgb);--down-opacity:1;--down-filter:.6;--down-background:var(--uc-secondary);border-radius:var(--uc-radius)}uc-editor-button-control>button,uc-editor-crop-button-control>button,uc-editor-filter-control>button,uc-editor-operation-control>button{all:unset;align-items:center;color:var(--color-effect);cursor:pointer;display:grid;grid-template-columns:var(--l-base-min-width) auto;grid-template-rows:100%;height:var(--l-base-height);opacity:var(--opacity-effect);position:relative;transition:var(--l-width-transition)}:where(uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control)>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-filter-control>uc-icon.uc-original-icon>svg{height:100%;width:100%}uc-editor-button-control.uc-active,uc-editor-crop-button-control.uc-active,uc-editor-filter-control.uc-active,uc-editor-operation-control.uc-active{--idle-color-rgb:var(--uc-primary-foreground);--idle-background:var(--uc-primary);--idle-opacity:1;--hover-color-rgb:var(--uc-primary-foreground);--hover-background:var(--uc-primary);--hover-opacity:1}uc-editor-filter-control.uc-not_active .uc-preview[loaded]{opacity:1}uc-editor-filter-control.uc-active .uc-preview{opacity:0}uc-editor-button-control.uc-not_active,uc-editor-crop-button-control.uc-not_active,uc-editor-filter-control.uc-not_active,uc-editor-operation-control.uc-not_active{--idle-color-rgb:var(--uc-secondary-foreground)}:where(.uc-contrast) uc-editor-button-control.uc-not_active,:where(.uc-contrast) uc-editor-crop-button-control.uc-not_active,:where(.uc-contrast) uc-editor-filter-control.uc-not_active,:where(.uc-contrast) uc-editor-operation-control.uc-not_active{--idle-background:transparent;--hover-background:var(--uc-secondary);outline:1px solid var(--uc-border);outline-offset:-1px}uc-editor-button-control>button:before,uc-editor-crop-button-control>button:before,uc-editor-filter-control>button:before,uc-editor-operation-control>button:before{background-color:var(--background-effect);border-radius:var(--border-radius-editor);content:"";height:100%;left:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-button-control>button .uc-title,uc-editor-crop-button-control>button .uc-title,uc-editor-filter-control>button .uc-title,uc-editor-operation-control>button .uc-title{font-size:.7em;letter-spacing:1.004px;padding-right:var(--cldtr-gap-mid-1);text-transform:uppercase}uc-editor-button-control>button uc-icon,uc-editor-crop-button-control>button uc-icon,uc-editor-filter-control>button uc-icon,uc-editor-operation-control>button uc-icon{pointer-events:none}uc-editor-filter-control>button .uc-preview{background-repeat:no-repeat;background-size:contain;border-radius:var(--border-radius-editor);filter:brightness(var(--filter-effect));height:var(--l-base-height);left:0;opacity:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-filter-control>.uc-original-icon{color:var(--color-effect);opacity:.3}uc-editor-image-cropper{color:var(--color-crop-guides);display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;touch-action:none;width:100%;z-index:10}uc-editor-image-cropper.uc-active_from_editor,uc-editor-image-cropper.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1) translate(0);transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3)}uc-editor-image-cropper.uc-inactive_to_editor{opacity:0;pointer-events:none;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1),opacity var(--transition-duration-3) calc(var(--transition-duration-3) + .05s)}uc-editor-image-cropper>.uc-canvas{z-index:1}uc-editor-image-cropper>.uc-canvas,uc-editor-image-fader{display:block;height:100%;left:0;position:absolute;top:0;width:100%}uc-editor-image-fader.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-start;z-index:3}uc-editor-image-fader.uc-active_from_cropper{opacity:1;pointer-events:auto}uc-editor-image-fader.uc-active_from_cropper,uc-editor-image-fader.uc-inactive_to_cropper{transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end;z-index:3}uc-editor-image-fader.uc-inactive_to_cropper{opacity:0;pointer-events:none}uc-editor-image-fader .uc-fader-image{content-visibility:auto;display:block;height:100%;left:0;object-fit:scale-down;position:absolute;top:0;transform:scale(1);user-select:none;width:100%}uc-editor-image-fader .uc-fader-image--preview{background-color:var(--color-image-background);border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);opacity:0;transform:scale(1);transition:var(--transition-duration-3)}uc-editor-scroller{height:100%;overflow-x:scroll}uc-editor-scroller,uc-editor-slider{align-items:center;display:flex;width:100%}uc-editor-slider{height:var(--size-panel-heading);justify-content:center}uc-editor-toolbar{height:100%;position:relative;width:100%}@media only screen and (max-width:600px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-mid-1);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}@media only screen and (min-width:601px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-max);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}uc-editor-toolbar>.uc-toolbar-container{height:100%;overflow:hidden;position:relative;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar{background-color:var(--color-fill-contrast);display:grid;grid-template-rows:1fr 1fr;height:100%;position:absolute;transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-3) ease-in-out,visibility var(--transition-duration-3) ease-in-out;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--visible{opacity:1;pointer-events:auto;transform:translateY(0)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--top-hidden{opacity:0;pointer-events:none;transform:translateY(100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--bottom-hidden{opacity:0;pointer-events:none;transform:translateY(-100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row{align-items:center;display:flex;justify-content:space-between;padding-left:var(--l-controls-padding);padding-right:var(--l-controls-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles{display:grid;grid-auto-flow:column;position:relative;grid-gap:0 var(--l-tab-gap);align-items:center;height:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggles_indicator{background-color:var(--uc-secondary-foreground);bottom:0;height:2px;left:0;position:absolute;transform:translate(0);transition:transform var(--transition-duration-3);width:var(--size-touch-area)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row{position:relative}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content{content-visibility:auto;display:flex;height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--visible{opacity:1;pointer-events:auto}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--hidden{opacity:0;pointer-events:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--visible{display:contents}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles.uc-tab-toggles--hidden,uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--hidden{display:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui{width:var(--uc-button-size)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_align{box-sizing:border-box;display:grid;grid-template-areas:". inner .";grid-template-columns:1fr auto 1fr;min-width:100%;padding-left:var(--uc-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner{display:grid;gap:6px;grid-area:inner;grid-auto-flow:column}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner:last-child{padding-right:var(--uc-padding)}uc-editor-toolbar .uc-controls-list_last-item{margin-right:var(--cldtr-gap-max)}uc-editor-toolbar .uc-info-tooltip_container{align-items:flex-start;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-editor-toolbar .uc-info-tooltip_wrapper{display:flex;flex-direction:column;height:100%;justify-content:flex-end;pointer-events:none;position:absolute;top:calc(-100% - var(--cldtr-gap-mid-2))}uc-editor-toolbar .uc-info-tooltip{background-color:var(--color-text-accent-contrast);border-radius:var(--border-radius-editor);color:var(--color-text-base);font-size:.7em;letter-spacing:1px;opacity:0;padding:3px 6px;text-transform:uppercase;transform:translateY(100%);transition:var(--transition-duration-3);z-index:3}uc-editor-toolbar .uc-info-tooltip_visible{opacity:1;transform:translateY(0)}uc-editor-toolbar .uc-slider{padding-left:var(--l-slider-padding);padding-right:var(--l-slider-padding)}uc-btn-ui>button{--filter-effect:var(--idle-brightness);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--l-transition-effect:var( --css-transition,color var(--transition-duration-2),background-color var(--transition-duration-2),filter var(--transition-duration-2) );all:unset;align-items:center;background-color:var(--background-effect);border-radius:var(--uc-radius);box-sizing:var(--css-box-sizing,border-box);color:var(--color-effect);cursor:pointer;display:inline-flex;filter:brightness(var(--filter-effect));font-size:1em;height:var(--css-height,var(--uc-button-size));opacity:var(--opacity-effect);padding-left:var(--css-padding-left,14px);padding-right:var(--css-padding-right,14px);transition:var(--l-transition-effect);user-select:none}uc-btn-ui>button>uc-icon{pointer-events:none}uc-btn-ui .uc-text{white-space:nowrap}uc-btn-ui .uc-icon{align-items:center;color:var(--color-effect);display:flex;filter:brightness(var(--filter-effect));justify-content:center;transition:var(--l-transition-effect)}uc-btn-ui .uc-icon_left{margin-left:0;margin-right:var(--cldtr-gap-mid-1)}uc-btn-ui .uc-icon_right{margin-left:var(--cldtr-gap-mid-1);margin-right:0}uc-btn-ui .uc-icon_single{margin-left:0;margin-right:0}uc-btn-ui .uc-icon_hidden{display:none;margin:0}uc-btn-ui.uc-primary>button{--idle-color-rgb:var(--uc-primary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-primary);--hover-color-rgb:var(--uc-primary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-hover);--down-color-rgb:var(--uc-primary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary)}uc-btn-ui.uc-primary-icon>button{--idle-color-rgb:var(--uc-primary);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-primary);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-transparent);--down-color-rgb:var(--uc-primary);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary-transparent);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary);padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-secondary>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary-hover);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent}:where(.uc-contrast) uc-btn-ui.uc-secondary>button{border:1px solid var(--uc-border)}uc-btn-ui.uc-secondary-icon>button,uc-btn-ui.uc-tab>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent;padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-default>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-primary);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary-transparent)}:where(.uc-contrast) uc-btn-ui.uc-default>button{--idle-background:transparent;--hover-background:var(--uc-secondary);--active-background:var(--uc-foreground);--active-color-rgb:var(--uc-background)}uc-line-loader-ui{height:2px;left:0;opacity:.5;position:absolute;top:0;width:100%;z-index:9999}uc-line-loader-ui .uc-inner{height:100%;max-width:200px;width:25%}uc-line-loader-ui .uc-line{background-color:var(--uc-primary);height:100%;transform:translate(-101%);transition:transform 1s;width:100%}uc-slider-ui{--l-thumb-size:24px;--l-zero-dot-size:5px;--l-zero-dot-offset:2px;--idle-color-rgb:var(--uc-foreground);--hover-color-rgb:var(--uc-primary);--down-color-rgb:var(--uc-primary);--color-effect:var(--idle-color-rgb);--l-color:var(--color-effect);align-items:center;display:flex;height:calc(var(--l-thumb-size) + (var(--l-zero-dot-size) + var(--l-zero-dot-offset))*2);justify-content:center;position:relative;width:100%}uc-slider-ui .uc-thumb{background-color:var(--l-color);border-radius:50%;height:var(--l-thumb-size);left:0;opacity:1;position:absolute;transform:translate(0);transition:opacity var(--transition-duration-2),background-color var(--transition-duration-2);width:var(--l-thumb-size)}uc-slider-ui .uc-steps{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding-left:calc(var(--l-thumb-size)/2);padding-right:calc(var(--l-thumb-size)/2);position:absolute;width:100%}uc-slider-ui .uc-border-step{height:10px;opacity:1}uc-slider-ui .uc-border-step,uc-slider-ui .uc-minor-step{border-right:1px solid var(--uc-foreground);transition:border-color var(--transition-duration-2);width:0}uc-slider-ui .uc-minor-step{height:4px;opacity:.6}uc-slider-ui .uc-zero-dot{background-color:var(--color-primary-accent);border-radius:50%;height:var(--l-zero-dot-size);left:calc(var(--l-thumb-size)/2 - var(--l-zero-dot-size)/2);opacity:0;position:absolute;top:calc(100% - var(--l-zero-dot-offset)*2);transition:var(--transition-duration-3);width:var(--l-zero-dot-size)}uc-slider-ui .uc-input{cursor:pointer;height:100%;margin:0;opacity:0;position:absolute;width:calc(100% - 10px)}uc-presence-toggle.uc-transition{transition:opacity var(--transition-duration-3),visibility var(--transition-duration-3)}uc-presence-toggle.uc-visible{opacity:1;pointer-events:inherit}uc-presence-toggle.uc-hidden{opacity:0;pointer-events:none}uc-presence-toggle.uc-initial{display:none!important;transition:none!important}[uc-cloud-image-editor] [role=button]:focus-visible,[uc-cloud-image-editor] button:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}[uc-cloud-image-editor] .uc-cloud-mask{pointer-events:none}:where([uc-cloud-image-editor]) uc-icon{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-cloud-image-editor]) uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}');class Pn extends He{_imageCache=new Map;static get pluginName(){return"UploadcareImageEditUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}get imageCache(){return this._imageCache}init(){const e=this.editor;e.ui.componentFactory.add("uploadcareImageEdit",t=>{const r=e.commands.get("uploadcareImageEdit"),o=new Mt(t),a=t.t;return o.set({icon:oo,tooltip:!0,label:a({id:"Edit Image (Uploadcare)",string:"Edit image"})}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"isActive"),this.listenTo(o,"execute",()=>{e.execute("uploadcareImageEdit"),e.editing.view.focus()}),o}),this._initConfig()}_initConfig(){const e=ii(document,"uc-config",{"ctx-name":"image-edit",removeCopyright:"true",localeName:this.editor.locale.contentLanguage});document.body.appendChild(e),this.listenTo(this.editor,"destroy",()=>{e.remove()})}}var Ot=Jr;(function(i,e){for(var t=Jr,r=i();;)try{var o=parseInt(t(145))/1*(parseInt(t(148))/2)+-parseInt(t(142))/3+parseInt(t(143))/4*(parseInt(t(138))/5)+parseInt(t(147))/6+-parseInt(t(141))/7*(parseInt(t(149))/8)+parseInt(t(140))/9+-parseInt(t(144))/10*(parseInt(t(146))/11);if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(Qr,367007);function Jr(i,e){var t=Qr();return Jr=function(r,o){r=r-135;var a=t[r];return a},Jr(i,e)}function Qr(){var i=["isPremiumPlugin","4579398SWZsjv","307797zfSRrj","154389hAqOPv","12468oIctSv","8180PiYjtW","59jWipem","20141GoIHXf","1999362zaRujL","22322syEFwB","48xTCtcW","UploadcareImageEdit","isOfficialPlugin","requires","pluginName","1090rluyyC"];return Qr=function(){return i},Qr()}class n0 extends He{static get[Ot(137)](){var e=Ot;return e(150)}static get[Ot(136)](){return[Mn,Pn]}static get[Ot(135)](){return!0}static get[Ot(139)](){return!0}}(function(i,e){for(var t=to,r=i();;)try{var o=parseInt(t(150))/1*(-parseInt(t(153))/2)+-parseInt(t(158))/3+-parseInt(t(156))/4+parseInt(t(157))/5*(parseInt(t(154))/6)+parseInt(t(149))/7+-parseInt(t(155))/8*(-parseInt(t(152))/9)+parseInt(t(151))/10;if(o===e)break;r.push(r.shift())}catch{r.push(r.shift())}})(ei,871025);function ei(){var i=["153SdVBVl","614BiHZDv","114TRuPFC","85040hhrCUH","2456848DtOGcH","282465LQHIqn","4601748zLxgbJ","11475765inkOBZ","3209MOWfCg","11108440WRWKBF"];return ei=function(){return i},ei()}function to(i,e){var t=ei();return to=function(r,o){r=r-149;var a=t[r];return a},to(i,e)}export{Qh as Uploadcare,xo as UploadcareCommand,rt as UploadcareEditing,n0 as UploadcareImageEdit,Un as UploadcareImageEditCommand,Mn as UploadcareImageEditEditing,Pn as UploadcareImageEditUI,lo as UploadcareUI,$o as UploadcareUploadAdapter};
