import{Command as k,Plugin as l}from"@ckeditor/ckeditor5-core";import{findOptimalInsertionRange as f,toWidget as b,Widget as h}from"@ckeditor/ckeditor5-widget";import{IconPageBreak as B}from"@ckeditor/ckeditor5-icons";import{ButtonView as y,MenuBarMenuListItemButtonView as P}from"@ckeditor/ckeditor5-ui";/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class d extends k{refresh(){const e=this.editor.model,t=e.schema,n=e.document.selection;this.isEnabled=x(n,t,e)}execute(){const e=this.editor.model;e.change(t=>{const n=t.createElement("pageBreak");e.insertObject(n,null,null,{setSelection:"after"})})}}function x(r,e,t){const n=w(r,t);return e.checkChild(n,"pageBreak")}function w(r,e){const n=f(r,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function E(r,{insertAt:e}={}){if(typeof document>"u")return;const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",window.litNonce&&n.setAttribute("nonce",window.litNonce),e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}E('.ck-content .page-break{align-items:center;clear:both;display:flex;justify-content:center;padding:5px 0;position:relative}.ck-content .page-break:after{border-bottom:2px dashed #c4c4c4;content:"";position:absolute;width:100%}.ck-content .page-break__label{background:#fff;border:1px solid #c4c4c4;border-radius:2px;box-shadow:2px 2px 1px rgba(0,0,0,.15);color:#333;display:block;font-size:.75em;font-weight:700;padding:.3em .6em;position:relative;text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}.ck-content :has(+.page-break){margin-bottom:0}}');/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class g extends l{static get pluginName(){return"PageBreakEditing"}static get licenseFeatureCode(){return"PB"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,n=e.t,s=e.conversion;t.register("pageBreak",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:a})=>a.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},a.createContainerElement("span",{style:"display: none"}))}),s.for("editingDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:a})=>{const c=n("Page break"),i=a.createContainerElement("div"),p=a.createRawElement("span",{class:"page-break__label"},function(m){m.innerText=n("Page break")});return a.addClass("page-break",i),a.insert(a.createPositionAt(i,0),p),v(i,a,c)}}),s.for("upcast").elementToElement({view:o=>{const a=o.getStyle("page-break-before")=="always",c=o.getStyle("page-break-after")=="always";if(!a&&!c)return null;if(o.childCount==1){const i=o.getChild(0);if(!i.is("element","span")||i.getStyle("display")!="none")return null}else if(o.childCount>1)return null;return{name:!0,styles:[...a?["page-break-before"]:[],...c?["page-break-after"]:[]],...o.hasClass("page-break")&&{classes:["page-break"]}}},model:"pageBreak",converterPriority:"high"}),e.commands.add("pageBreak",new d(e))}}function v(r,e,t){return e.setCustomProperty("pageBreak",!0,r),b(r,e,{label:t})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class u extends l{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("pageBreak",()=>{const t=this._createButton(y);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(P))}_createButton(e){const t=this.editor,n=t.locale,s=t.commands.get("pageBreak"),o=new e(t.locale),a=n.t;return o.set({label:a("Page break"),icon:B}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("pageBreak"),t.editing.view.focus()}),o}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class C extends l{static get requires(){return[g,u,h]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}export{C as PageBreak,d as PageBreakCommand,g as PageBreakEditing,u as PageBreakUI};
